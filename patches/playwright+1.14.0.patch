diff --git a/node_modules/playwright/lib/client/browserType.js b/node_modules/playwright/lib/client/browserType.js
index 1b1277c..ca7fad6 100644
--- a/node_modules/playwright/lib/client/browserType.js
+++ b/node_modules/playwright/lib/client/browserType.js
@@ -269,6 +269,7 @@ class BrowserType extends _channelOwner.ChannelOwner {
       }, params.headers);
       const headers = paramsHeaders ? (0, _utils.headersObjectToArray)(paramsHeaders) : undefined;
       const result = await channel.connectOverCDP({
+        customBrowserName: params.customBrowserName,
         sdkLanguage: 'javascript',
         endpointURL,
         headers,
diff --git a/node_modules/playwright/lib/client/page.js b/node_modules/playwright/lib/client/page.js
index 7cf16eb..9497ac3 100644
--- a/node_modules/playwright/lib/client/page.js
+++ b/node_modules/playwright/lib/client/page.js
@@ -159,7 +159,9 @@ class Page extends _channelOwner.ChannelOwner {
 
     this._channel.on('frameDetached', ({
       frame
-    }) => this._onFrameDetached(_frame.Frame.from(frame)));
+    }) => {
+      return frame ? this._onFrameDetached(_frame.Frame.from(frame)) : null;
+    });
 
     this._channel.on('load', () => this.emit(_events.Events.Page.Load, this));
 
diff --git a/node_modules/playwright/lib/generated/injectedScriptSource.js b/node_modules/playwright/lib/generated/injectedScriptSource.js
index 2baf741..e11effa 100644
--- a/node_modules/playwright/lib/generated/injectedScriptSource.js
+++ b/node_modules/playwright/lib/generated/injectedScriptSource.js
@@ -4,5 +4,5 @@ Object.defineProperty(exports, "__esModule", {
   value: true
 });
 exports.source = void 0;
-const source = "var pwExport=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,\"a\",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p=\"\",n(n.s=9)}([function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.parseSelector=function(e){const t=function(e){let t,n=0,r=0;const o={parts:[]},i=()=>{const t=e.substring(r,n).trim(),i=t.indexOf(\"=\");let s,c;-1!==i&&t.substring(0,i).trim().match(/^[a-zA-Z_0-9-+:*]+$/)?(s=t.substring(0,i).trim(),c=t.substring(i+1)):t.length>1&&'\"'===t[0]&&'\"'===t[t.length-1]||t.length>1&&\"'\"===t[0]&&\"'\"===t[t.length-1]?(s=\"text\",c=t):/^\\(*\\/\\//.test(t)||t.startsWith(\"..\")?(s=\"xpath\",c=t):(s=\"css\",c=t);let u=!1;if(\"*\"===s[0]&&(u=!0,s=s.substring(1)),o.parts.push({name:s,body:c}),u){if(void 0!==o.capture)throw new Error(\"Only one of the selectors can capture using * modifier\");o.capture=o.parts.length-1}};if(!e.includes(\">>\"))return n=e.length,i(),o;for(;n<e.length;){const o=e[n];\"\\\\\"===o&&n+1<e.length?n+=2:o===t?(t=void 0,n++):t||'\"'!==o&&\"'\"!==o&&\"`\"!==o?t||\">\"!==o||\">\"!==e[n+1]?n++:(i(),n+=2,r=n):(t=o,n++)}return i(),o}(e),n=t.parts.map(e=>{if(\"css\"===e.name||\"css:light\"===e.name){\"css:light\"===e.name&&(e.body=\":light(\"+e.body+\")\");return{name:\"css\",body:(0,r.parseCSS)(e.body,o).selector}}return e});return{capture:t.capture,parts:n}},t.customCSSNames=void 0;var r=n(1);const o=new Set([\"not\",\"is\",\"where\",\"has\",\"scope\",\"light\",\"visible\",\"text\",\"text-matches\",\"text-is\",\"has-text\",\"above\",\"below\",\"right-of\",\"left-of\",\"near\",\"nth-match\"]);t.customCSSNames=o},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.parseCSS=function(e,t){let n;try{n=r.tokenize(e),n[n.length-1]instanceof r.EOFToken||n.push(new r.EOFToken)}catch(t){const n=t.message+` while parsing selector \"${e}\"`,r=(t.stack||\"\").indexOf(t.message);throw-1!==r&&(t.stack=t.stack.substring(0,r)+n+t.stack.substring(r+t.message.length)),t.message=n,t}const o=n.find(e=>e instanceof r.AtKeywordToken||e instanceof r.BadStringToken||e instanceof r.BadURLToken||e instanceof r.ColumnToken||e instanceof r.CDOToken||e instanceof r.CDCToken||e instanceof r.SemicolonToken||e instanceof r.OpenCurlyToken||e instanceof r.CloseCurlyToken||e instanceof r.URLToken||e instanceof r.PercentageToken);if(o)throw new Error(`Unsupported token \"${o.toSource()}\" while parsing selector \"${e}\"`);let i=0;const s=new Set;function c(){return new Error(`Unexpected token \"${n[i].toSource()}\" while parsing selector \"${e}\"`)}function u(){for(;n[i]instanceof r.WhitespaceToken;)i++}function a(e=i){return n[e]instanceof r.IdentToken}function l(e=i){return n[e]instanceof r.CommaToken}function p(e=i){return n[e]instanceof r.CloseParenToken}function h(e=i){return n[e]instanceof r.DelimToken&&\"*\"===n[e].value}function f(e=i){return n[e]instanceof r.EOFToken}function d(e=i){return n[e]instanceof r.DelimToken&&[\">\",\"+\",\"~\"].includes(n[e].value)}function m(e=i){return l(e)||p(e)||f(e)||d(e)||n[e]instanceof r.WhitespaceToken}function g(){const e=[y()];for(;u(),l();)i++,e.push(y());return e}function y(){return u(),function(e=i){return n[e]instanceof r.NumberToken}()||function(e=i){return n[e]instanceof r.StringToken}()?n[i++].value:function(){u();const e={simples:[{selector:v(),combinator:\"\"}]};for(;;){if(u(),d())e.simples[e.simples.length-1].combinator=n[i++].value,u();else if(m())break;e.simples.push({combinator:\"\",selector:v()})}return e}()}function v(){let e=\"\";const o=[];for(;!m();)if(a()||h())e+=n[i++].toSource();else if(n[i]instanceof r.HashToken)e+=n[i++].toSource();else if(n[i]instanceof r.DelimToken&&\".\"===n[i].value){if(i++,!a())throw c();e+=\".\"+n[i++].toSource()}else if(n[i]instanceof r.ColonToken)if(i++,a())if(t.has(n[i].value.toLowerCase())){const e=n[i++].value.toLowerCase();o.push({name:e,args:[]}),s.add(e)}else e+=\":\"+n[i++].toSource();else{if(!(n[i]instanceof r.FunctionToken))throw c();{const r=n[i++].value.toLowerCase();if(t.has(r)?(o.push({name:r,args:g()}),s.add(r)):e+=`:${r}(${w()})`,u(),!p())throw c();i++}}else{if(!(n[i]instanceof r.OpenSquareToken))throw c();for(e+=\"[\",i++;!(n[i]instanceof r.CloseSquareToken||f());)e+=n[i++].toSource();if(!(n[i]instanceof r.CloseSquareToken))throw c();e+=\"]\",i++}if(!e&&!o.length)throw c();return{css:e||void 0,functions:o}}function w(){let e=\"\";for(;!p()&&!f();)e+=n[i++].toSource();return e}const b=g();if(!f())throw new Error(`Error while parsing selector \"${e}\"`);if(b.some(e=>\"object\"!=typeof e||!(\"simples\"in e)))throw new Error(`Error while parsing selector \"${e}\"`);return{selector:b,names:Array.from(s)}},t.serializeSelector=function e(t){return t.map(t=>\"string\"==typeof t?`\"${t}\"`:\"number\"==typeof t?String(t):t.simples.map(({selector:t,combinator:n})=>{let r=t.css||\"\";return r+=t.functions.map(t=>`:${t.name}(${e(t.args)})`).join(\"\"),n&&(r+=\" \"+n),r}).join(\" \")).join(\", \")};var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||\"object\"!=typeof e&&\"function\"!=typeof e)return{default:e};var n=o(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if(\"default\"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var c=i?Object.getOwnPropertyDescriptor(e,s):null;c&&(c.get||c.set)?Object.defineProperty(r,s,c):r[s]=e[s]}r.default=e,n&&n.set(e,r);return r}(n(2));function o(e){if(\"function\"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(o=function(e){return e?n:t})(e)}},function(e,t,n){\"use strict\";var r,o,i;o=[t],void 0===(i=\"function\"==typeof(r=function(e){var t=function(e,t,n){return e>=t&&e<=n};function n(e){return t(e,48,57)}function r(e){return n(e)||t(e,65,70)||t(e,97,102)}function o(e){return function(e){return t(e,65,90)}(e)||function(e){return t(e,97,122)}(e)}function i(e){return o(e)||function(e){return e>=128}(e)||95==e}function s(e){return i(e)||n(e)||45==e}function c(e){return t(e,0,8)||11==e||t(e,14,31)||127==e}function u(e){return 10==e}function a(e){return u(e)||9==e||32==e}var l=function(e){this.message=e};function p(e){if(e<=65535)return String.fromCharCode(e);e-=Math.pow(2,16);var t=Math.floor(e/Math.pow(2,10))+55296,n=e%Math.pow(2,10)+56320;return String.fromCharCode(t)+String.fromCharCode(n)}function h(){throw\"Abstract Base Class\"}function f(){return this}function d(){return this}function m(){return this}function g(){return this}function y(){return this}function v(){return this}function w(){return this}function b(){return this}function _(){throw\"Abstract Base Class\"}function E(){return this.value=\"{\",this.mirror=\"}\",this}function S(){return this.value=\"}\",this.mirror=\"{\",this}function T(){return this.value=\"[\",this.mirror=\"]\",this}function k(){return this.value=\"]\",this.mirror=\"[\",this}function C(){return this.value=\"(\",this.mirror=\")\",this}function N(){return this.value=\")\",this.mirror=\"(\",this}function x(){return this}function O(){return this}function M(){return this}function A(){return this}function R(){return this}function j(){return this}function P(){return this}function q(e){return this.value=p(e),this}function D(){throw\"Abstract Base Class\"}function L(e){this.value=e}function $(e){this.value=e,this.mirror=\")\"}function I(e){this.value=e}function U(e){this.value=e,this.type=\"unrestricted\"}function W(e){this.value=e}function B(e){this.value=e}function F(){this.value=null,this.type=\"integer\",this.repr=\"\"}function V(){this.value=null,this.repr=\"\"}function Q(){this.value=null,this.type=\"integer\",this.repr=\"\",this.unit=\"\"}function H(e){for(var n=\"\",r=(e=\"\"+e).charCodeAt(0),o=0;o<e.length;o++){var i=e.charCodeAt(o);if(0==i)throw new l(\"Invalid character: the input contains U+0000.\");t(i,1,31)||127==i||0==o&&t(i,48,57)||1==o&&t(i,48,57)&&45==r?n+=\"\\\\\"+i.toString(16)+\" \":i>=128||45==i||95==i||t(i,48,57)||t(i,65,90)||t(i,97,122)?n+=e[o]:n+=\"\\\\\"+e[o]}return n}function J(e){e=\"\"+e;for(var n=\"\",r=0;r<e.length;r++){var o=e.charCodeAt(r);if(0==o)throw new l(\"Invalid character: the input contains U+0000.\");t(o,1,31)||127==o?n+=\"\\\\\"+o.toString(16)+\" \":n+=34==o||92==o?\"\\\\\"+e[r]:e[r]}return n}(l.prototype=new Error).name=\"InvalidCharacterError\",h.prototype.toJSON=function(){return{token:this.tokenType}},h.prototype.toString=function(){return this.tokenType},h.prototype.toSource=function(){return\"\"+this},f.prototype=Object.create(h.prototype),f.prototype.tokenType=\"BADSTRING\",d.prototype=Object.create(h.prototype),d.prototype.tokenType=\"BADURL\",m.prototype=Object.create(h.prototype),m.prototype.tokenType=\"WHITESPACE\",m.prototype.toString=function(){return\"WS\"},m.prototype.toSource=function(){return\" \"},g.prototype=Object.create(h.prototype),g.prototype.tokenType=\"CDO\",g.prototype.toSource=function(){return\"\\x3c!--\"},y.prototype=Object.create(h.prototype),y.prototype.tokenType=\"CDC\",y.prototype.toSource=function(){return\"--\\x3e\"},v.prototype=Object.create(h.prototype),v.prototype.tokenType=\":\",w.prototype=Object.create(h.prototype),w.prototype.tokenType=\";\",b.prototype=Object.create(h.prototype),b.prototype.tokenType=\",\",_.prototype=Object.create(h.prototype),E.prototype=Object.create(_.prototype),E.prototype.tokenType=\"{\",S.prototype=Object.create(_.prototype),S.prototype.tokenType=\"}\",T.prototype=Object.create(_.prototype),T.prototype.tokenType=\"[\",k.prototype=Object.create(_.prototype),k.prototype.tokenType=\"]\",C.prototype=Object.create(_.prototype),C.prototype.tokenType=\"(\",N.prototype=Object.create(_.prototype),N.prototype.tokenType=\")\",x.prototype=Object.create(h.prototype),x.prototype.tokenType=\"~=\",O.prototype=Object.create(h.prototype),O.prototype.tokenType=\"|=\",M.prototype=Object.create(h.prototype),M.prototype.tokenType=\"^=\",A.prototype=Object.create(h.prototype),A.prototype.tokenType=\"$=\",R.prototype=Object.create(h.prototype),R.prototype.tokenType=\"*=\",j.prototype=Object.create(h.prototype),j.prototype.tokenType=\"||\",P.prototype=Object.create(h.prototype),P.prototype.tokenType=\"EOF\",P.prototype.toSource=function(){return\"\"},q.prototype=Object.create(h.prototype),q.prototype.tokenType=\"DELIM\",q.prototype.toString=function(){return\"DELIM(\"+this.value+\")\"},q.prototype.toJSON=function(){var e=this.constructor.prototype.constructor.prototype.toJSON.call(this);return e.value=this.value,e},q.prototype.toSource=function(){return\"\\\\\"==this.value?\"\\\\\\n\":this.value},D.prototype=Object.create(h.prototype),D.prototype.ASCIIMatch=function(e){return this.value.toLowerCase()==e.toLowerCase()},D.prototype.toJSON=function(){var e=this.constructor.prototype.constructor.prototype.toJSON.call(this);return e.value=this.value,e},L.prototype=Object.create(D.prototype),L.prototype.tokenType=\"IDENT\",L.prototype.toString=function(){return\"IDENT(\"+this.value+\")\"},L.prototype.toSource=function(){return H(this.value)},$.prototype=Object.create(D.prototype),$.prototype.tokenType=\"FUNCTION\",$.prototype.toString=function(){return\"FUNCTION(\"+this.value+\")\"},$.prototype.toSource=function(){return H(this.value)+\"(\"},I.prototype=Object.create(D.prototype),I.prototype.tokenType=\"AT-KEYWORD\",I.prototype.toString=function(){return\"AT(\"+this.value+\")\"},I.prototype.toSource=function(){return\"@\"+H(this.value)},U.prototype=Object.create(D.prototype),U.prototype.tokenType=\"HASH\",U.prototype.toString=function(){return\"HASH(\"+this.value+\")\"},U.prototype.toJSON=function(){var e=this.constructor.prototype.constructor.prototype.toJSON.call(this);return e.value=this.value,e.type=this.type,e},U.prototype.toSource=function(){return\"id\"==this.type?\"#\"+H(this.value):\"#\"+function(e){for(var n=\"\",r=((e=\"\"+e).charCodeAt(0),0);r<e.length;r++){var o=e.charCodeAt(r);if(0==o)throw new l(\"Invalid character: the input contains U+0000.\");o>=128||45==o||95==o||t(o,48,57)||t(o,65,90)||t(o,97,122)?n+=e[r]:n+=\"\\\\\"+o.toString(16)+\" \"}return n}(this.value)},W.prototype=Object.create(D.prototype),W.prototype.tokenType=\"STRING\",W.prototype.toString=function(){return'\"'+J(this.value)+'\"'},B.prototype=Object.create(D.prototype),B.prototype.tokenType=\"URL\",B.prototype.toString=function(){return\"URL(\"+this.value+\")\"},B.prototype.toSource=function(){return'url(\"'+J(this.value)+'\")'},F.prototype=Object.create(h.prototype),F.prototype.tokenType=\"NUMBER\",F.prototype.toString=function(){return\"integer\"==this.type?\"INT(\"+this.value+\")\":\"NUMBER(\"+this.value+\")\"},F.prototype.toJSON=function(){var e=this.constructor.prototype.constructor.prototype.toJSON.call(this);return e.value=this.value,e.type=this.type,e.repr=this.repr,e},F.prototype.toSource=function(){return this.repr},V.prototype=Object.create(h.prototype),V.prototype.tokenType=\"PERCENTAGE\",V.prototype.toString=function(){return\"PERCENTAGE(\"+this.value+\")\"},V.prototype.toJSON=function(){var e=this.constructor.prototype.constructor.prototype.toJSON.call(this);return e.value=this.value,e.repr=this.repr,e},V.prototype.toSource=function(){return this.repr+\"%\"},Q.prototype=Object.create(h.prototype),Q.prototype.tokenType=\"DIMENSION\",Q.prototype.toString=function(){return\"DIM(\"+this.value+\",\"+this.unit+\")\"},Q.prototype.toJSON=function(){var e=this.constructor.prototype.constructor.prototype.toJSON.call(this);return e.value=this.value,e.type=this.type,e.repr=this.repr,e.unit=this.unit,e},Q.prototype.toSource=function(){var e=this.repr,n=H(this.unit);return\"e\"!=n[0].toLowerCase()||\"-\"!=n[1]&&!t(n.charCodeAt(1),48,57)||(n=\"\\\\65 \"+n.slice(1,n.length)),e+n},e.tokenize=function(e){e=function(e){for(var n=[],r=0;r<e.length;r++){var o=e.charCodeAt(r);if(13==o&&10==e.charCodeAt(r+1)&&(o=10,r++),13!=o&&12!=o||(o=10),0==o&&(o=65533),t(o,55296,56319)&&t(e.charCodeAt(r+1),56320,57343)){var i=o-55296,s=e.charCodeAt(r+1)-56320;o=Math.pow(2,16)+i*Math.pow(2,10)+s,r++}n.push(o)}return n}(e);for(var o,l=-1,h=[],_=0,D=0,H=0,J={line:_,column:D},z=function(t){return t>=e.length?-1:e[t]},X=function(e){if(void 0===e&&(e=1),e>3)throw\"Spec Error: no more than three codepoints of lookahead.\";return z(l+e)},G=function(e){return void 0===e&&(e=1),u(o=z(l+=e))?(_+=1,H=D,D=0):D+=e,!0},K=function(){return l-=1,u(o)?(_-=1,D=H):D-=1,J.line=_,J.column=D,!0},Y=function(e){return void 0===e&&(e=o),-1==e},Z=function(){return console.log(\"Parse error at index \"+l+\", processing codepoint 0x\"+o.toString(16)+\".\"),!0},ee=function(){if(te(),G(),a(o)){for(;a(X());)G();return new m}if(34==o)return oe();if(35==o){if(s(X())||ce(X(1),X(2))){var e=new U;return ae(X(1),X(2),X(3))&&(e.type=\"id\"),e.value=he(),e}return new q(o)}return 36==o?61==X()?(G(),new A):new q(o):39==o?oe():40==o?new C:41==o?new N:42==o?61==X()?(G(),new R):new q(o):43==o?pe()?(K(),ne()):new q(o):44==o?new b:45==o?pe()?(K(),ne()):45==X(1)&&62==X(2)?(G(2),new y):le()?(K(),re()):new q(o):46==o?pe()?(K(),ne()):new q(o):58==o?new v:59==o?new w:60==o?33==X(1)&&45==X(2)&&45==X(3)?(G(3),new g):new q(o):64==o?ae(X(1),X(2),X(3))?new I(he()):new q(o):91==o?new T:92==o?ue()?(K(),re()):(Z(),new q(o)):93==o?new k:94==o?61==X()?(G(),new M):new q(o):123==o?new E:124==o?61==X()?(G(),new O):124==X()?(G(),new j):new q(o):125==o?new S:126==o?61==X()?(G(),new x):new q(o):n(o)?(K(),ne()):i(o)?(K(),re()):Y()?new P:new q(o)},te=function(){for(;47==X(1)&&42==X(2);)for(G(2);;){if(G(),42==o&&47==X()){G();break}if(Y())return void Z()}},ne=function(){var e,t=fe();return ae(X(1),X(2),X(3))?((e=new Q).value=t.value,e.repr=t.repr,e.type=t.type,e.unit=he(),e):37==X()?(G(),(e=new V).value=t.value,e.repr=t.repr,e):((e=new F).value=t.value,e.repr=t.repr,e.type=t.type,e)},re=function(){var e=he();if(\"url\"==e.toLowerCase()&&40==X()){for(G();a(X(1))&&a(X(2));)G();return 34==X()||39==X()?new $(e):!a(X())||34!=X(2)&&39!=X(2)?ie():new $(e)}return 40==X()?(G(),new $(e)):new L(e)},oe=function(e){void 0===e&&(e=o);for(var t=\"\";G();){if(o==e||Y())return new W(t);if(u(o))return Z(),K(),new f;92==o?Y(X())||(u(X())?G():t+=p(se())):t+=p(o)}},ie=function(){for(var e=new B(\"\");a(X());)G();if(Y(X()))return e;for(;G();){if(41==o||Y())return e;if(a(o)){for(;a(X());)G();return 41==X()||Y(X())?(G(),e):(me(),new d)}if(34==o||39==o||40==o||c(o))return Z(),me(),new d;if(92==o){if(!ue())return Z(),me(),new d;e.value+=p(se())}else e.value+=p(o)}},se=function(){if(G(),r(o)){for(var e=[o],t=0;t<5&&r(X());t++)G(),e.push(o);a(X())&&G();var n=parseInt(e.map((function(e){return String.fromCharCode(e)})).join(\"\"),16);return n>1114111&&(n=65533),n}return Y()?65533:o},ce=function(e,t){return 92==e&&!u(t)},ue=function(){return ce(o,X())},ae=function(e,t,n){return 45==e?i(t)||45==t||ce(t,n):!!i(e)||92==e&&ce(e,t)},le=function(){return ae(o,X(1),X(2))},pe=function(){return e=o,t=X(1),r=X(2),43==e||45==e?!!n(t)||!(46!=t||!n(r)):46==e?!!n(t):!!n(e);var e,t,r},he=function(){for(var e=\"\";G();)if(s(o))e+=p(o);else{if(!ue())return K(),e;e+=p(se())}},fe=function(){var e=[],t=\"integer\";for(43!=X()&&45!=X()||(G(),e+=p(o));n(X());)G(),e+=p(o);if(46==X(1)&&n(X(2)))for(G(),e+=p(o),G(),e+=p(o),t=\"number\";n(X());)G(),e+=p(o);var r=X(1),i=X(2),s=X(3);if(69!=r&&101!=r||!n(i)){if((69==r||101==r)&&(43==i||45==i)&&n(s))for(G(),e+=p(o),G(),e+=p(o),G(),e+=p(o),t=\"number\";n(X());)G(),e+=p(o)}else for(G(),e+=p(o),G(),e+=p(o),t=\"number\";n(X());)G(),e+=p(o);return{type:t,value:de(e),repr:e}},de=function(e){return+e},me=function(){for(;G();){if(41==o||Y())return;ue()&&se()}},ge=0;!Y(X());)if(h.push(ee()),++ge>2*e.length)return\"I'm infinite-looping!\";return h},e.IdentToken=L,e.FunctionToken=$,e.AtKeywordToken=I,e.HashToken=U,e.StringToken=W,e.BadStringToken=f,e.URLToken=B,e.BadURLToken=d,e.DelimToken=q,e.NumberToken=F,e.PercentageToken=V,e.DimensionToken=Q,e.IncludeMatchToken=x,e.DashMatchToken=O,e.PrefixMatchToken=M,e.SuffixMatchToken=A,e.SubstringMatchToken=R,e.ColumnToken=j,e.WhitespaceToken=m,e.CDOToken=g,e.CDCToken=y,e.ColonToken=v,e.SemicolonToken=w,e.CommaToken=b,e.OpenParenToken=C,e.CloseParenToken=N,e.OpenSquareToken=T,e.CloseSquareToken=k,e.OpenCurlyToken=E,e.CloseCurlyToken=S,e.EOFToken=P,e.CSSParserToken=h,e.GroupingToken=_})?r.apply(t,o):r)||(e.exports=i)},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.createLaxTextMatcher=d,t.createStrictTextMatcher=m,t.createRegexTextMatcher=g,t.elementText=v,t.elementMatchesText=w,t.parentElementOrShadowHost=N,t.isVisible=M,t.SelectorEvaluatorImpl=void 0;var r=n(0);t.SelectorEvaluatorImpl=class{constructor(e){this._engines=new Map,this._cacheQueryCSS=new Map,this._cacheMatches=new Map,this._cacheQuery=new Map,this._cacheMatchesSimple=new Map,this._cacheMatchesParents=new Map,this._cacheCallMatches=new Map,this._cacheCallQuery=new Map,this._cacheQuerySimple=new Map,this._cacheText=new Map,this._scoreMap=void 0,this._retainCacheCounter=0;for(const[t,n]of e)this._engines.set(t,n);this._engines.set(\"not\",c),this._engines.set(\"is\",o),this._engines.set(\"where\",o),this._engines.set(\"has\",i),this._engines.set(\"scope\",s),this._engines.set(\"light\",u),this._engines.set(\"visible\",a),this._engines.set(\"text\",l),this._engines.set(\"text-is\",p),this._engines.set(\"text-matches\",h),this._engines.set(\"has-text\",f),this._engines.set(\"right-of\",k(\"right-of\",b)),this._engines.set(\"left-of\",k(\"left-of\",_)),this._engines.set(\"above\",k(\"above\",E)),this._engines.set(\"below\",k(\"below\",S)),this._engines.set(\"near\",k(\"near\",T)),this._engines.set(\"nth-match\",C);const t=[...this._engines.keys()];t.sort();const n=[...r.customCSSNames];if(n.sort(),t.join(\"|\")!==n.join(\"|\"))throw new Error(`Please keep customCSSNames in sync with evaluator engines: ${t.join(\"|\")} vs ${n.join(\"|\")}`)}begin(){++this._retainCacheCounter}end(){--this._retainCacheCounter,this._retainCacheCounter||(this._cacheQueryCSS.clear(),this._cacheMatches.clear(),this._cacheQuery.clear(),this._cacheMatchesSimple.clear(),this._cacheMatchesParents.clear(),this._cacheCallMatches.clear(),this._cacheCallQuery.clear(),this._cacheQuerySimple.clear(),this._cacheText.clear())}_cached(e,t,n,r){e.has(t)||e.set(t,[]);const o=e.get(t),i=o.find(e=>n.every((t,n)=>e.rest[n]===t));if(i)return i.result;const s=r();return o.push({rest:n,result:s}),s}_checkSelector(e){if(!(\"object\"==typeof e&&e&&(Array.isArray(e)||\"simples\"in e&&e.simples.length)))throw new Error(`Malformed selector \"${e}\"`);return e}matches(e,t,n){const r=this._checkSelector(t);this.begin();try{return this._cached(this._cacheMatches,e,[r,n.scope,n.pierceShadow],()=>Array.isArray(r)?this._matchesEngine(o,e,r,n):!!this._matchesSimple(e,r.simples[r.simples.length-1].selector,n)&&this._matchesParents(e,r,r.simples.length-2,n))}finally{this.end()}}query(e,t){const n=this._checkSelector(t);this.begin();try{return this._cached(this._cacheQuery,n,[e.scope,e.pierceShadow],()=>{if(Array.isArray(n))return this._queryEngine(o,e,n);const t=this._scoreMap;this._scoreMap=new Map;let r=this._querySimple(e,n.simples[n.simples.length-1].selector);return r=r.filter(t=>this._matchesParents(t,n,n.simples.length-2,e)),this._scoreMap.size&&r.sort((e,t)=>{const n=this._scoreMap.get(e),r=this._scoreMap.get(t);return n===r?0:void 0===n?1:void 0===r?-1:n-r}),this._scoreMap=t,r})}finally{this.end()}}_markScore(e,t){this._scoreMap&&this._scoreMap.set(e,t)}_matchesSimple(e,t,n){return this._cached(this._cacheMatchesSimple,e,[t,n.scope,n.pierceShadow],()=>{if(!t.functions.some(e=>\"scope\"===e.name||\"is\"===e.name)&&e===n.scope)return!1;if(t.css&&!this._matchesCSS(e,t.css))return!1;for(const r of t.functions)if(!this._matchesEngine(this._getEngine(r.name),e,r.args,n))return!1;return!0})}_querySimple(e,t){return t.functions.length?this._cached(this._cacheQuerySimple,t,[e.scope,e.pierceShadow],()=>{let n=t.css;const r=t.functions;let o;\"*\"===n&&r.length&&(n=void 0);let i=-1;void 0!==n?o=this._queryCSS(e,n):(i=r.findIndex(e=>void 0!==this._getEngine(e.name).query),-1===i&&(i=0),o=this._queryEngine(this._getEngine(r[i].name),e,r[i].args));for(let t=0;t<r.length;t++){if(t===i)continue;const n=this._getEngine(r[t].name);void 0!==n.matches&&(o=o.filter(o=>this._matchesEngine(n,o,r[t].args,e)))}for(let t=0;t<r.length;t++){if(t===i)continue;const n=this._getEngine(r[t].name);void 0===n.matches&&(o=o.filter(o=>this._matchesEngine(n,o,r[t].args,e)))}return o}):this._queryCSS(e,t.css||\"*\")}_matchesParents(e,t,n,r){return n<0||this._cached(this._cacheMatchesParents,e,[t,n,r.scope,r.pierceShadow],()=>{const{selector:o,combinator:i}=t.simples[n];if(\">\"===i){const i=x(e,r);return!(!i||!this._matchesSimple(i,o,r))&&this._matchesParents(i,t,n-1,r)}if(\"+\"===i){const i=O(e,r);return!(!i||!this._matchesSimple(i,o,r))&&this._matchesParents(i,t,n-1,r)}if(\"\"===i){let i=x(e,r);for(;i;){if(this._matchesSimple(i,o,r)){if(this._matchesParents(i,t,n-1,r))return!0;if(\"\"===t.simples[n-1].combinator)break}i=x(i,r)}return!1}if(\"~\"===i){let i=O(e,r);for(;i;){if(this._matchesSimple(i,o,r)){if(this._matchesParents(i,t,n-1,r))return!0;if(\"~\"===t.simples[n-1].combinator)break}i=O(i,r)}return!1}if(\">=\"===i){let i=e;for(;i;){if(this._matchesSimple(i,o,r)){if(this._matchesParents(i,t,n-1,r))return!0;if(\"\"===t.simples[n-1].combinator)break}i=x(i,r)}return!1}throw new Error(`Unsupported combinator \"${i}\"`)})}_matchesEngine(e,t,n,r){if(e.matches)return this._callMatches(e,t,n,r);if(e.query)return this._callQuery(e,n,r).includes(t);throw new Error('Selector engine should implement \"matches\" or \"query\"')}_queryEngine(e,t,n){if(e.query)return this._callQuery(e,n,t);if(e.matches)return this._queryCSS(t,\"*\").filter(r=>this._callMatches(e,r,n,t));throw new Error('Selector engine should implement \"matches\" or \"query\"')}_callMatches(e,t,n,r){return this._cached(this._cacheCallMatches,t,[e,r.scope,r.pierceShadow,...n],()=>e.matches(t,n,r,this))}_callQuery(e,t,n){return this._cached(this._cacheCallQuery,e,[n.scope,n.pierceShadow,...t],()=>e.query(n,t,this))}_matchesCSS(e,t){return e.matches(t)}_queryCSS(e,t){return this._cached(this._cacheQueryCSS,t,[e.scope,e.pierceShadow],()=>{let n=[];return function r(o){if(n=n.concat([...o.querySelectorAll(t)]),e.pierceShadow){o.shadowRoot&&r(o.shadowRoot);for(const e of o.querySelectorAll(\"*\"))e.shadowRoot&&r(e.shadowRoot)}}(e.scope),n})}_getEngine(e){const t=this._engines.get(e);if(!t)throw new Error(`Unknown selector engine \"${e}\"`);return t}};const o={matches(e,t,n,r){if(0===t.length)throw new Error('\"is\" engine expects non-empty selector list');return t.some(t=>r.matches(e,t,n))},query(e,t,n){if(0===t.length)throw new Error('\"is\" engine expects non-empty selector list');let r=[];for(const o of t)r=r.concat(n.query(e,o));return 1===t.length?r:function(e){const t=new Map,n=[],r=[];return e.forEach(e=>(function e(r){let o=t.get(r);if(o)return o;const i=N(r);if(i){e(i).children.push(r)}else n.push(r);return o={children:[],taken:!1},t.set(r,o),o}(e)).taken=!0),n.forEach((function e(n){const o=t.get(n);o.taken&&r.push(n);if(o.children.length>1){const e=new Set(o.children);o.children=[];let t=n.firstElementChild;for(;t&&o.children.length<e.size;)e.has(t)&&o.children.push(t),t=t.nextElementSibling;for(t=n.shadowRoot?n.shadowRoot.firstElementChild:null;t&&o.children.length<e.size;)e.has(t)&&o.children.push(t),t=t.nextElementSibling}o.children.forEach(e)})),r}(r)}},i={matches(e,t,n,r){if(0===t.length)throw new Error('\"has\" engine expects non-empty selector list');return r.query({...n,scope:e},t).length>0}},s={matches(e,t,n,r){if(0!==t.length)throw new Error('\"scope\" engine expects no arguments');return 9===n.scope.nodeType?e===n.scope.documentElement:e===n.scope},query(e,t,n){if(0!==t.length)throw new Error('\"scope\" engine expects no arguments');if(9===e.scope.nodeType){const t=e.scope.documentElement;return t?[t]:[]}return 1===e.scope.nodeType?[e.scope]:[]}},c={matches(e,t,n,r){if(0===t.length)throw new Error('\"not\" engine expects non-empty selector list');return!r.matches(e,t,n)}},u={query:(e,t,n)=>n.query({...e,pierceShadow:!1},t),matches:(e,t,n,r)=>r.matches(e,t,{...n,pierceShadow:!1})},a={matches(e,t,n,r){if(t.length)throw new Error('\"visible\" engine expects no arguments');return M(e)}},l={matches(e,t,n,r){if(1!==t.length||\"string\"!=typeof t[0])throw new Error('\"text\" engine expects a single string');return\"self\"===w(r,e,d(t[0]))}},p={matches(e,t,n,r){if(1!==t.length||\"string\"!=typeof t[0])throw new Error('\"text-is\" engine expects a single string');return\"none\"!==w(r,e,m(t[0]))}},h={matches(e,t,n,r){if(0===t.length||\"string\"!=typeof t[0]||t.length>2||2===t.length&&\"string\"!=typeof t[1])throw new Error('\"text-matches\" engine expects a regexp body and optional regexp flags');return\"self\"===w(r,e,g(t[0],2===t.length?t[1]:void 0))}},f={matches(e,t,n,r){if(1!==t.length||\"string\"!=typeof t[0])throw new Error('\"has-text\" engine expects a single string');if(y(e))return!1;return d(t[0])(v(r,e))}};function d(e){return e=e.trim().replace(/\\s+/g,\" \").toLowerCase(),t=>t.full.trim().replace(/\\s+/g,\" \").toLowerCase().includes(e)}function m(e){return e=e.trim().replace(/\\s+/g,\" \"),t=>t.immediate.some(t=>t.trim().replace(/\\s+/g,\" \")===e)}function g(e,t){const n=new RegExp(e,t);return e=>n.test(e.full)}function y(e){return\"SCRIPT\"===e.nodeName||\"STYLE\"===e.nodeName||document.head&&document.head.contains(e)}function v(e,t){let n=e._cacheText.get(t);if(void 0===n){if(n={full:\"\",immediate:[]},!y(t)){let r=\"\";if(t instanceof HTMLInputElement&&(\"submit\"===t.type||\"button\"===t.type))n={full:t.value,immediate:[t.value]};else{for(let o=t.firstChild;o;o=o.nextSibling)o.nodeType===Node.TEXT_NODE?(n.full+=o.nodeValue||\"\",r+=o.nodeValue||\"\"):(r&&n.immediate.push(r),r=\"\",o.nodeType===Node.ELEMENT_NODE&&(n.full+=v(e,o).full));r&&n.immediate.push(r),t.shadowRoot&&(n.full+=v(e,t.shadowRoot).full)}}e._cacheText.set(t,n)}return n}function w(e,t,n){if(y(t))return\"none\";if(!n(v(e,t)))return\"none\";for(let r=t.firstChild;r;r=r.nextSibling)if(r.nodeType===Node.ELEMENT_NODE&&n(v(e,r)))return\"selfAndChildren\";return t.shadowRoot&&n(v(e,t.shadowRoot))?\"selfAndChildren\":\"self\"}function b(e,t,n){const r=e.left-t.right;if(!(r<0||void 0!==n&&r>n))return r+Math.max(t.bottom-e.bottom,0)+Math.max(e.top-t.top,0)}function _(e,t,n){const r=t.left-e.right;if(!(r<0||void 0!==n&&r>n))return r+Math.max(t.bottom-e.bottom,0)+Math.max(e.top-t.top,0)}function E(e,t,n){const r=t.top-e.bottom;if(!(r<0||void 0!==n&&r>n))return r+Math.max(e.left-t.left,0)+Math.max(t.right-e.right,0)}function S(e,t,n){const r=e.top-t.bottom;if(!(r<0||void 0!==n&&r>n))return r+Math.max(e.left-t.left,0)+Math.max(t.right-e.right,0)}function T(e,t,n){const r=void 0===n?50:n;let o=0;return e.left-t.right>=0&&(o+=e.left-t.right),t.left-e.right>=0&&(o+=t.left-e.right),t.top-e.bottom>=0&&(o+=t.top-e.bottom),e.top-t.bottom>=0&&(o+=e.top-t.bottom),o>r?void 0:o}function k(e,t){return{matches(n,r,o,i){const s=r.length&&\"number\"==typeof r[r.length-1]?r[r.length-1]:void 0,c=void 0===s?r:r.slice(0,r.length-1);if(r.length<1+(void 0===s?0:1))throw new Error(`\"${e}\" engine expects a selector list and optional maximum distance in pixels`);const u=n.getBoundingClientRect();let a;for(const e of i.query(o,c)){if(e===n)continue;const r=t(u,e.getBoundingClientRect(),s);void 0!==r&&((void 0===a||r<a)&&(a=r))}return void 0!==a&&(i._markScore(n,a),!0)}}}const C={query(e,t,n){let r=t[t.length-1];if(t.length<2)throw new Error('\"nth-match\" engine expects non-empty selector list and an index argument');if(\"number\"!=typeof r||r<1)throw new Error('\"nth-match\" engine expects a one-based index as the last argument');const i=o.query(e,t.slice(0,t.length-1),n);return r--,r<i.length?[i[r]]:[]}};function N(e){return e.parentElement?e.parentElement:e.parentNode&&e.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&e.parentNode.host?e.parentNode.host:void 0}function x(e,t){if(e!==t.scope)return t.pierceShadow?N(e):e.parentElement||void 0}function O(e,t){if(e!==t.scope)return e.previousElementSibling||void 0}function M(e){if(!e.ownerDocument||!e.ownerDocument.defaultView)return!0;const t=e.ownerDocument.defaultView.getComputedStyle(e);if(!t||\"hidden\"===t.visibility)return!1;const n=e.getBoundingClientRect();return n.width>0&&n.height>0}},function(e,t){var n;n=function(){return this}();try{n=n||new Function(\"return this\")()}catch(e){\"object\"==typeof window&&(n=window)}e.exports=n},,function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.checkComponentAttribute=function(e,t){for(const n of t.jsonPath)null!=e&&(e=e[n]);const n=\"string\"!=typeof e||t.caseSensetive?e:e.toUpperCase(),r=\"string\"!=typeof t.value||t.caseSensetive?t.value:t.value.toUpperCase();return\"<truthy>\"===t.op?!!n:\"=\"===t.op?n===r:\"string\"==typeof n&&\"string\"==typeof r&&(\"*=\"===t.op?n.includes(r):\"^=\"===t.op?n.startsWith(r):\"$=\"===t.op?n.endsWith(r):\"|=\"===t.op?n===r||n.startsWith(r+\"-\"):\"~=\"===t.op&&n.split(\" \").includes(r))},t.parseComponentSelector=function(e){let t=0,n=0===e.length;const r=()=>e[t]||\"\",o=()=>{const o=r();return++t,n=t>=e.length,o},i=o=>{if(n)throw new Error(`Unexpected end of selector while parsing selector \\`${e}\\``);throw new Error(`Error while parsing selector \\`${e}\\` - unexpected symbol \"${r()}\" at position ${t}`+(o?\" during \"+o:\"\"))};function s(){for(;!n&&/\\s/.test(r());)o()}function c(){let e=\"\";for(s();!n&&/[-$0-9A-Z_]/i.test(r());)e+=o();return e}function u(e){let t=o();for(t!==e&&i(\"parsing quoted string\");!n&&r()!==e;)\"\\\\\"===r()&&o(),t+=o();return r()!==e&&i(\"parsing quoted string\"),t+=o(),t}function a(){let e=\"\";return s(),e=\"'\"===r()||'\"'===r()?u(r()).slice(1,-1):c(),e||i(\"parsing property path\"),e}function l(){o();const t=[];for(t.push(a()),s();\".\"===r();)o(),t.push(a()),s();if(\"]\"===r())return o(),{jsonPath:t,op:\"<truthy>\",value:null,caseSensetive:!1};const c=function(){s();let e=\"\";return n||(e+=o()),n||\"=\"===e||(e+=o()),[\"=\",\"*=\",\"^=\",\"$=\",\"|=\",\"~=\"].includes(e)||i(\"parsing operator\"),e}();let l=void 0,p=!0;if(s(),\"'\"===r()||'\"'===r())l=u(r()).slice(1,-1),s(),\"i\"===r()||\"I\"===r()?(p=!1,o()):\"s\"!==r()&&\"S\"!==r()||(p=!0,o());else{for(l=\"\";!n&&!/\\s/.test(r())&&\"]\"!==r();)l+=o();\"true\"===l?l=!0:\"false\"===l?l=!1:(l=+l,isNaN(l)&&i(\"parsing attribute value\"))}if(s(),\"]\"!==r()&&i(\"parsing attribute value\"),o(),\"=\"!==c&&\"string\"!=typeof l)throw new Error(`Error while parsing selector \\`${e}\\` - cannot use ${c} in attribute with non-string matching value - ${l}`);return{jsonPath:t,op:c,value:l,caseSensetive:p}}const p={name:\"\",attributes:[]};p.name=c(),s();for(;\"[\"===r();)p.attributes.push(l()),s();n||i(void 0);if(!p.name&&!p.attributes.length)throw new Error(`Error while parsing selector \\`${e}\\` - selector cannot be empty`);return p}},,,function(e,t,n){\"use strict\";(function(e){Object.defineProperty(t,\"__esModule\",{value:!0}),t.default=t.InjectedScript=void 0;var r=n(10),o=n(11),i=n(12),s=n(0),c=n(3);class u{constructor(e,t,n){this._engines=void 0,this._evaluator=void 0,this._stableRafCount=void 0,this._replaceRafWithTimeout=void 0,this._evaluator=new c.SelectorEvaluatorImpl(new Map),this._engines=new Map,this._engines.set(\"xpath\",r.XPathEngine),this._engines.set(\"xpath:light\",r.XPathEngine),this._engines.set(\"_react\",o.ReactEngine),this._engines.set(\"_vue\",i.VueEngine),this._engines.set(\"text\",this._createTextEngine(!0)),this._engines.set(\"text:light\",this._createTextEngine(!1)),this._engines.set(\"id\",this._createAttributeEngine(\"id\",!0)),this._engines.set(\"id:light\",this._createAttributeEngine(\"id\",!1)),this._engines.set(\"data-testid\",this._createAttributeEngine(\"data-testid\",!0)),this._engines.set(\"data-testid:light\",this._createAttributeEngine(\"data-testid\",!1)),this._engines.set(\"data-test-id\",this._createAttributeEngine(\"data-test-id\",!0)),this._engines.set(\"data-test-id:light\",this._createAttributeEngine(\"data-test-id\",!1)),this._engines.set(\"data-test\",this._createAttributeEngine(\"data-test\",!0)),this._engines.set(\"data-test:light\",this._createAttributeEngine(\"data-test\",!1)),this._engines.set(\"css\",this._createCSSEngine()),this._engines.set(\"nth\",{queryAll:()=>[]}),this._engines.set(\"visible\",{queryAll:()=>[]});for(const{name:e,engine:t}of n)this._engines.set(e,t);this._stableRafCount=e,this._replaceRafWithTimeout=t}parseSelector(e){const t=(0,s.parseSelector)(e);for(const n of t.parts)if(!this._engines.has(n.name))throw new Error(`Unknown engine \"${n.name}\" while parsing selector ${e}`);return t}querySelector(e,t,n){if(!t.querySelector)throw new Error(\"Node is not queryable.\");this._evaluator.begin();try{var r,o;const i=this._querySelectorRecursively([{element:t,capture:void 0}],e,0,new Map);if(n&&i.length>1)throw new Error(`strict mode violation: selector resolved to ${i.length} elements.`);return(null===(r=i[0])||void 0===r?void 0:r.capture)||(null===(o=i[0])||void 0===o?void 0:o.element)}finally{this._evaluator.end()}}_querySelectorRecursively(e,t,n,r){if(n===t.parts.length)return e;const o=t.parts[n];if(\"nth\"===o.name){let i=[];if(\"0\"===o.body)i=e.slice(0,1);else if(\"-1\"===o.body)e.length&&(i=e.slice(e.length-1));else{if(\"number\"==typeof t.capture)throw new Error(\"Can't query n-th element in a request with the capture.\");const n=+o.body,r=new Set;for(const t of e)r.add(t.element),n+1===r.size&&(i=[t])}return this._querySelectorRecursively(i,t,n+1,r)}if(\"visible\"===o.name){const t=Boolean(o.body);return e.filter(e=>t===(0,c.isVisible)(e.element))}const i=[];for(const o of e){const e=n-1===t.capture?o.element:o.capture;let s=r.get(o.element);s||(s=[],r.set(o.element,s));let c=s[n];c||(c=this._queryEngineAll(t.parts[n],o.element),s[n]=c);for(const t of c)i.push({element:t,capture:e})}return this._querySelectorRecursively(i,t,n+1,r)}querySelectorAll(e,t){if(!t.querySelectorAll)throw new Error(\"Node is not queryable.\");this._evaluator.begin();try{const n=this._querySelectorRecursively([{element:t,capture:void 0}],e,0,new Map),r=new Set;for(const e of n)r.add(e.capture||e.element);return[...r]}finally{this._evaluator.end()}}_queryEngineAll(e,t){return this._engines.get(e.name).queryAll(t,e.body)}_createAttributeEngine(e,t){return{queryAll:(n,r)=>this._evaluator.query({scope:n,pierceShadow:t},(t=>[{simples:[{selector:{css:`[${e}=${JSON.stringify(t)}]`,functions:[]},combinator:\"\"}]}])(r))}}_createCSSEngine(){const e=this._evaluator;return{queryAll:(t,n)=>e.query({scope:t,pierceShadow:!0},n)}}_createTextEngine(e){const t=(t,n)=>{const{matcher:r,kind:o}=function(e){if(\"/\"===e[0]&&e.lastIndexOf(\"/\")>0){const t=e.lastIndexOf(\"/\");return{matcher:(0,c.createRegexTextMatcher)(e.substring(1,t),e.substring(t+1)),kind:\"regex\"}}let t=!1;e.length>1&&'\"'===e[0]&&'\"'===e[e.length-1]&&(e=f(e.substring(1,e.length-1)),t=!0);e.length>1&&\"'\"===e[0]&&\"'\"===e[e.length-1]&&(e=f(e.substring(1,e.length-1)),t=!0);return{matcher:t?(0,c.createStrictTextMatcher)(e):(0,c.createLaxTextMatcher)(e),kind:t?\"strict\":\"lax\"}}(n),i=[];let s=null;const u=e=>{if(\"lax\"===o&&s&&s.contains(e))return!1;const t=(0,c.elementMatchesText)(this._evaluator,e,r);\"none\"===t&&(s=e),(\"self\"===t||\"selfAndChildren\"===t&&\"strict\"===o)&&i.push(e)};t.nodeType===Node.ELEMENT_NODE&&u(t);const a=this._evaluator._queryCSS({scope:t,pierceShadow:e},\"*\");for(const e of a)u(e);return i};return{queryAll:(e,n)=>t(e,n)}}extend(t,n){return new(e.eval(`\\n    (() => {\\n      ${t}\\n      return pwExport;\\n    })()`))(this,n)}isVisible(e){return(0,c.isVisible)(e)}pollRaf(e){return this._runAbortableTask(t=>{let n,r;const o=new Promise((e,t)=>{n=e,r=t}),i=()=>{if(!t.aborted)try{const r=Symbol(\"continuePolling\"),o=e(t,r);o!==r?n(o):requestAnimationFrame(i)}catch(e){t.log(\"  \"+e.message),r(e)}};return i(),o})}pollInterval(e,t){return this._runAbortableTask(n=>{let r,o;const i=new Promise((e,t)=>{r=e,o=t}),s=()=>{if(!n.aborted)try{const o=Symbol(\"continuePolling\"),i=t(n,o);i!==o?r(i):setTimeout(s,e)}catch(e){o(e)}};return s(),i})}_runAbortableTask(e){let t,n=[],r=!1;const o=()=>{t&&(t(n),n=[],t=void 0)};let i=\"\";const s={aborted:!1,log:e=>{i=e,n.push(e),o()},logRepeating:e=>{e!==i&&s.log(e)}};return{takeNextLogs:()=>new Promise(e=>{t=e,(n.length||r)&&o()}),run:()=>{const t=e(s);return t.finally(()=>{r=!0,o()}),t},cancel:()=>{s.aborted=!0},takeLastLogs:()=>n}}getElementBorderWidth(e){if(e.nodeType!==Node.ELEMENT_NODE||!e.ownerDocument||!e.ownerDocument.defaultView)return{left:0,top:0};const t=e.ownerDocument.defaultView.getComputedStyle(e);return{left:parseInt(t.borderLeftWidth||\"\",10),top:parseInt(t.borderTopWidth||\"\",10)}}retarget(e,t){let n=e.nodeType===Node.ELEMENT_NODE?e:e.parentElement;return n?(n.matches(\"input, textarea, select\")||(n=n.closest(\"button, [role=button], [role=checkbox], [role=radio]\")||n),\"follow-label\"===t&&(n.matches(\"input, textarea, button, select, [role=button], [role=checkbox], [role=radio]\")||n.isContentEditable||(n=n.closest(\"label\")||n),\"LABEL\"===n.nodeName&&(n=n.control||n)),n):null}waitForElementStatesAndPerformAction(e,t,n,r){let o,i=0,s=0,c=0;const u=(u,a)=>{if(n)return u.log(\"    forcing action\"),r(e,u,a);for(const n of t){if(\"stable\"!==n){const t=this.checkElementState(e,n);if(\"boolean\"!=typeof t)return t;if(!t)return u.logRepeating(`    element is not ${n} - waiting...`),a;continue}const t=this.retarget(e,\"no-follow-label\");if(!t)return\"error:notconnected\";if(1==++i)return a;const r=performance.now();if(this._stableRafCount>1&&r-c<15)return a;c=r;const l=t.getBoundingClientRect(),p={x:l.top,y:l.left,width:l.width,height:l.height};o&&p.x===o.x&&p.y===o.y&&p.width===o.width&&p.height===o.height?++s:s=0;const h=s>=this._stableRafCount,f=h||!o;if(o=p,f||u.logRepeating(\"    element is not stable - waiting...\"),!h)return a}return r(e,u,a)};return this._replaceRafWithTimeout?this.pollInterval(16,u):this.pollRaf(u)}checkElementState(e,t){const n=this.retarget(e,[\"stable\",\"visible\",\"hidden\"].includes(t)?\"no-follow-label\":\"follow-label\");if(!n||!n.isConnected)return\"hidden\"===t||\"error:notconnected\";if(\"visible\"===t)return this.isVisible(n);if(\"hidden\"===t)return!this.isVisible(n);const r=[\"BUTTON\",\"INPUT\",\"SELECT\",\"TEXTAREA\"].includes(n.nodeName)&&n.hasAttribute(\"disabled\");if(\"disabled\"===t)return r;if(\"enabled\"===t)return!r;const o=!([\"INPUT\",\"TEXTAREA\",\"SELECT\"].includes(n.nodeName)&&n.hasAttribute(\"readonly\"));if(\"editable\"===t)return!r&&o;if(\"checked\"===t)return\"checkbox\"===n.getAttribute(\"role\")?\"true\"===n.getAttribute(\"aria-checked\"):\"INPUT\"!==n.nodeName?\"error:notcheckbox\":[\"radio\",\"checkbox\"].includes(n.type.toLowerCase())?n.checked:\"error:notcheckbox\";throw new Error(`Unexpected element state \"${t}\"`)}selectOptions(e,t,n,r){const o=this.retarget(t,\"follow-label\");if(!o)return\"error:notconnected\";if(\"select\"!==o.nodeName.toLowerCase())return\"error:notselect\";const i=o,s=[...i.options],c=[];let u=e.slice();for(let e=0;e<s.length;e++){const t=s[e],n=n=>{if(n instanceof Node)return t===n;let r=!0;return void 0!==n.value&&(r=r&&n.value===t.value),void 0!==n.label&&(r=r&&n.label===t.label),void 0!==n.index&&(r=r&&n.index===e),r};if(u.some(n)){if(c.push(t),!i.multiple){u=[];break}u=u.filter(e=>!n(e))}}return u.length?(n.logRepeating(\"    did not find some options - waiting... \"),r):(i.value=void 0,c.forEach(e=>e.selected=!0),n.log(\"    selected specified option(s)\"),i.dispatchEvent(new Event(\"input\",{bubbles:!0})),i.dispatchEvent(new Event(\"change\",{bubbles:!0})),c.map(e=>e.value))}fill(e,t,n){const r=this.retarget(t,\"follow-label\");if(!r)return\"error:notconnected\";if(\"input\"===r.nodeName.toLowerCase()){const t=r,o=t.type.toLowerCase(),i=new Set([\"date\",\"time\",\"datetime\",\"datetime-local\",\"month\",\"week\"]);if(!new Set([\"\",\"email\",\"number\",\"password\",\"search\",\"tel\",\"text\",\"url\"]).has(o)&&!i.has(o))return n.log(`    input of type \"${o}\" cannot be filled`),\"error:notfillableinputtype\";if(\"number\"===o&&(e=e.trim(),isNaN(Number(e))))return\"error:notfillablenumberinput\";if(i.has(o))return e=e.trim(),t.focus(),t.value=e,t.value!==e?\"error:notvaliddate\":(r.dispatchEvent(new Event(\"input\",{bubbles:!0})),r.dispatchEvent(new Event(\"change\",{bubbles:!0})),\"done\")}else if(\"textarea\"===r.nodeName.toLowerCase());else if(!r.isContentEditable)return\"error:notfillableelement\";return this.selectText(r),\"needsinput\"}selectText(e){const t=this.retarget(e,\"follow-label\");if(!t)return\"error:notconnected\";if(\"input\"===t.nodeName.toLowerCase()){const e=t;return e.select(),e.focus(),\"done\"}if(\"textarea\"===t.nodeName.toLowerCase()){const e=t;return e.selectionStart=0,e.selectionEnd=e.value.length,e.focus(),\"done\"}const n=t.ownerDocument.createRange();n.selectNodeContents(t);const r=t.ownerDocument.defaultView.getSelection();return r&&(r.removeAllRanges(),r.addRange(n)),t.focus(),\"done\"}focusNode(e,t){if(!e.isConnected)return\"error:notconnected\";if(e.nodeType!==Node.ELEMENT_NODE)return\"error:notelement\";const n=e.getRootNode().activeElement===e&&e.ownerDocument&&e.ownerDocument.hasFocus();if(e.focus(),t&&!n&&\"input\"===e.nodeName.toLowerCase())try{e.setSelectionRange(0,0)}catch(e){}return\"done\"}setInputFiles(e,t){if(e.nodeType!==Node.ELEMENT_NODE)return\"Node is not of type HTMLElement\";const n=e;if(\"INPUT\"!==n.nodeName)return\"Not an <input> element\";const r=n;if(\"file\"!==(r.getAttribute(\"type\")||\"\").toLowerCase())return\"Not an input[type=file] element\";const o=t.map(e=>{const t=Uint8Array.from(atob(e.buffer),e=>e.charCodeAt(0));return new File([t],e.name,{type:e.mimeType})}),i=new DataTransfer;for(const e of o)i.items.add(e);r.files=i.files,r.dispatchEvent(new Event(\"input\",{bubbles:!0})),r.dispatchEvent(new Event(\"change\",{bubbles:!0}))}checkHitTargetAt(e,t){let n=e.nodeType===Node.ELEMENT_NODE?e:e.parentElement;if(!n||!n.isConnected)return\"error:notconnected\";n=n.closest(\"button, [role=button]\")||n;let r=this.deepElementFromPoint(document,t.x,t.y);const o=[];for(;r&&r!==n;)o.push(r),r=(0,c.parentElementOrShadowHost)(r);if(r===n)return\"done\";const i=this.previewNode(o[0]);let s;for(;n;){const e=o.indexOf(n);if(-1!==e){e>1&&(s=this.previewNode(o[e-1]));break}n=(0,c.parentElementOrShadowHost)(n)}return s?{hitTargetDescription:`${i} from ${s} subtree`}:{hitTargetDescription:i}}dispatchEvent(e,t,n){let r;switch(n={bubbles:!0,cancelable:!0,composed:!0,...n},h.get(t)){case\"mouse\":r=new MouseEvent(t,n);break;case\"keyboard\":r=new KeyboardEvent(t,n);break;case\"touch\":r=new TouchEvent(t,n);break;case\"pointer\":r=new PointerEvent(t,n);break;case\"focus\":r=new FocusEvent(t,n);break;case\"drag\":r=new DragEvent(t,n);break;default:r=new Event(t,n)}e.dispatchEvent(r)}deepElementFromPoint(e,t,n){let r,o=e;for(;o;){const e=o.elementsFromPoint(t,n)[0];if(!e||r===e)break;r=e,o=r.shadowRoot}return r}previewNode(e){if(e.nodeType===Node.TEXT_NODE)return p(\"#text=\"+(e.nodeValue||\"\"));if(e.nodeType!==Node.ELEMENT_NODE)return p(`<${e.nodeName.toLowerCase()} />`);const t=e,n=[];for(let e=0;e<t.attributes.length;e++){const{name:r,value:o}=t.attributes[e];\"style\"!==r&&(!o&&l.has(r)?n.push(\" \"+r):n.push(` ${r}=\"${o}\"`))}n.sort((e,t)=>e.length-t.length);let r=n.join(\"\");if(r.length>50&&(r=r.substring(0,49)+\"…\"),a.has(t.nodeName))return p(`<${t.nodeName.toLowerCase()}${r}/>`);const o=t.childNodes;let i=!1;if(o.length<=5){i=!0;for(let e=0;e<o.length;e++)i=i&&o[e].nodeType===Node.TEXT_NODE}let s=i?t.textContent||\"\":o.length?\"…\":\"\";return s.length>50&&(s=s.substring(0,49)+\"…\"),p(`<${t.nodeName.toLowerCase()}${r}>${s}</${t.nodeName.toLowerCase()}>`)}}t.InjectedScript=u;const a=new Set([\"AREA\",\"BASE\",\"BR\",\"COL\",\"COMMAND\",\"EMBED\",\"HR\",\"IMG\",\"INPUT\",\"KEYGEN\",\"LINK\",\"MENUITEM\",\"META\",\"PARAM\",\"SOURCE\",\"TRACK\",\"WBR\"]),l=new Set([\"checked\",\"selected\",\"disabled\",\"readonly\",\"multiple\"]);function p(e){return e.replace(/\\n/g,\"↵\").replace(/\\t/g,\"⇆\")}const h=new Map([[\"auxclick\",\"mouse\"],[\"click\",\"mouse\"],[\"dblclick\",\"mouse\"],[\"mousedown\",\"mouse\"],[\"mouseeenter\",\"mouse\"],[\"mouseleave\",\"mouse\"],[\"mousemove\",\"mouse\"],[\"mouseout\",\"mouse\"],[\"mouseover\",\"mouse\"],[\"mouseup\",\"mouse\"],[\"mouseleave\",\"mouse\"],[\"mousewheel\",\"mouse\"],[\"keydown\",\"keyboard\"],[\"keyup\",\"keyboard\"],[\"keypress\",\"keyboard\"],[\"textInput\",\"keyboard\"],[\"touchstart\",\"touch\"],[\"touchmove\",\"touch\"],[\"touchend\",\"touch\"],[\"touchcancel\",\"touch\"],[\"pointerover\",\"pointer\"],[\"pointerout\",\"pointer\"],[\"pointerenter\",\"pointer\"],[\"pointerleave\",\"pointer\"],[\"pointerdown\",\"pointer\"],[\"pointerup\",\"pointer\"],[\"pointermove\",\"pointer\"],[\"pointercancel\",\"pointer\"],[\"gotpointercapture\",\"pointer\"],[\"lostpointercapture\",\"pointer\"],[\"focus\",\"focus\"],[\"blur\",\"focus\"],[\"drag\",\"drag\"],[\"dragstart\",\"drag\"],[\"dragend\",\"drag\"],[\"dragover\",\"drag\"],[\"dragenter\",\"drag\"],[\"dragleave\",\"drag\"],[\"dragexit\",\"drag\"],[\"drop\",\"drag\"]]);function f(e){if(!e.includes(\"\\\\\"))return e;const t=[];let n=0;for(;n<e.length;)\"\\\\\"===e[n]&&n+1<e.length&&n++,t.push(e[n++]);return t.join(\"\")}var d=u;t.default=d}).call(this,n(4))},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.XPathEngine=void 0;const r={queryAll(e,t){t.startsWith(\"/\")&&(t=\".\"+t);const n=[],r=e instanceof Document?e:e.ownerDocument;if(!r)return n;const o=r.evaluate(t,e,null,XPathResult.ORDERED_NODE_ITERATOR_TYPE);for(let e=o.iterateNext();e;e=o.iterateNext())e.nodeType===Node.ELEMENT_NODE&&n.push(e);return n}};t.XPathEngine=r},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.ReactEngine=void 0;var r=n(6);function o(e){if(\"function\"==typeof e.type)return e.type.displayName||e.type.name||\"Anonymous\";if(\"string\"==typeof e.type)return e.type;if(e._currentElement){const t=e._currentElement.type;if(\"string\"==typeof t)return t;if(\"function\"==typeof t)return t.displayName||t.name||\"Anonymous\"}return\"\"}function i(e){if(e.child){const t=[];for(let n=e.child;n;n=n.sibling)t.push(n);return t}if(!e._currentElement)return[];const t=e=>{var t;const n=null===(t=e._currentElement)||void 0===t?void 0:t.type;return\"function\"==typeof n||\"string\"==typeof n};if(e._renderedComponent){const n=e._renderedComponent;return t(n)?[n]:[]}return e._renderedChildren?[...Object.values(e._renderedChildren)].filter(t):[]}function s(e){var t;const n=e.memoizedProps||(null===(t=e._currentElement)||void 0===t?void 0:t.props);if(!n||\"string\"==typeof n)return n;const r={...n};return delete r.children,r}function c(e){var t;const n={name:o(e),children:i(e).map(c),rootElements:[],props:s(e)},r=e.stateNode||e._hostNode||(null===(t=e._renderedComponent)||void 0===t?void 0:t._hostNode);if(r instanceof Element)n.rootElements.push(r);else for(const e of n.children)n.rootElements.push(...e.rootElements);return n}const u={queryAll(e,t){const{name:n,attributes:o}=(0,r.parseComponentSelector)(t),i=function(){const e=document.createTreeWalker(document);for(;e.nextNode();){if(e.currentNode.hasOwnProperty(\"_reactRootContainer\"))return e.currentNode._reactRootContainer._internalRoot.current;for(const t of Object.keys(e.currentNode))if(t.startsWith(\"__reactInternalInstance\")||t.startsWith(\"__reactFiber\"))return e.currentNode[t]}}();if(!i)return[];const s=function e(t,n,r=[]){n(t)&&r.push(t);for(const o of t.children)e(o,n,r);return r}(c(i),t=>{if(n&&t.name!==n)return!1;if(t.rootElements.some(t=>!e.contains(t)))return!1;for(const e of o)if(!(0,r.checkComponentAttribute)(t.props,e))return!1;return!0}),u=new Set;for(const e of s)for(const t of e.rootElements)u.add(t);return[...u]}};t.ReactEngine=u},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.VueEngine=void 0;var r=n(6);function o(e,t){const n=e.replace(/^[a-zA-Z]:/,\"\").replace(/\\\\/g,\"/\");let r=n.substring(n.lastIndexOf(\"/\")+1);return t&&r.endsWith(t)&&(r=r.substring(0,r.length-t.length)),r}function i(e,t){return t?t.toUpperCase():\"\"}const s=/(?:^|[-_/])(\\w)/g,c=e=>e&&e.replace(s,i);function u(e){function t(e,t){return e.type.__playwright_guessedName=t,t}function n(e){const n=function(e){const t=e.name||e._componentTag||e.__playwright_guessedName;if(t)return t;const n=e.__file;return n?c(o(n,\".vue\")):void 0}(e.type||{});if(n)return n;if(e.root===e)return\"Root\";for(const n in null===(r=e.parent)||void 0===r||null===(i=r.type)||void 0===i?void 0:i.components){var r,i,s;if((null===(s=e.parent)||void 0===s?void 0:s.type.components[n])===e.type)return t(e,n)}for(const n in null===(u=e.appContext)||void 0===u?void 0:u.components){var u;if(e.appContext.components[n]===e.type)return t(e,n)}return\"Anonymous Component\"}function r(e){const t=[];return e.component&&t.push(e.component),e.suspense&&t.push(...r(e.suspense.activeBranch)),Array.isArray(e.children)&&e.children.forEach(e=>{e.component?t.push(e.component):t.push(...r(e))}),t.filter(e=>{var t;return!(function(e){return e._isBeingDestroyed||e.isUnmounted}(e)||null!==(t=e.type.devtools)&&void 0!==t&&t.hide)})}function i(e){return function(e){return\"Symbol(Fragment)\"===e.subTree.type.toString()}(e)?function(e){if(!e.children)return[];const t=[];for(let n=0,r=e.children.length;n<r;n++){const r=e.children[n];r.component?t.push(...i(r.component)):r.el&&t.push(r.el)}return t}(e.subTree):[e.subTree.el]}return function e(t){return{name:n(t),children:r(t.subTree).map(e),rootElements:i(t),props:t.props}}(e)}function a(e){function t(e){const t=function(e){const t=e.displayName||e.name||e._componentTag;if(t)return t;const n=e.__file;return n?c(o(n,\".vue\")):void 0}(e.$options||e.fnOptions||{});return t||(e.$root===e?\"Root\":\"Anonymous Component\")}function n(e){return e.$children?e.$children:Array.isArray(e.subTree.children)?e.subTree.children.filter(e=>!!e.component).map(e=>e.component):[]}return function e(r){return{name:t(r),children:n(r).map(e),rootElements:[r.$el],props:r._props}}(e)}const l={queryAll(e,t){const{name:n,attributes:o}=(0,r.parseComponentSelector)(t),i=function(){const e=document.createTreeWalker(document);for(;e.nextNode();){if(e.currentNode._vnode&&e.currentNode._vnode.component)return{root:e.currentNode._vnode.component,version:3};if(e.currentNode.__vue__)return{root:e.currentNode.__vue__,version:2}}}();if(!i)return[];const s=function e(t,n,r=[]){n(t)&&r.push(t);for(const o of t.children)e(o,n,r);return r}(3===i.version?u(i.root):a(i.root),t=>{if(n&&t.name!==n)return!1;if(t.rootElements.some(t=>!e.contains(t)))return!1;for(const e of o)if(!(0,r.checkComponentAttribute)(t.props,e))return!1;return!0}),c=new Set;for(const e of s)for(const t of e.rootElements)c.add(t);return[...c]}};t.VueEngine=l}]).default;";
+const source = "var pwExport=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,\"a\",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p=\"\",n(n.s=9)}([function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.parseSelector=function(e){const t=function(e){let t,n=0,r=0;const o={parts:[]},i=()=>{const t=e.substring(r,n).trim(),i=t.indexOf(\"=\");let s,c;-1!==i&&t.substring(0,i).trim().match(/^[a-zA-Z_0-9-+:*]+$/)?(s=t.substring(0,i).trim(),c=t.substring(i+1)):t.length>1&&'\"'===t[0]&&'\"'===t[t.length-1]||t.length>1&&\"'\"===t[0]&&\"'\"===t[t.length-1]?(s=\"text\",c=t):/^\\(*\\/\\//.test(t)||t.startsWith(\"..\")?(s=\"xpath\",c=t):(s=\"css\",c=t);let u=!1;if(\"*\"===s[0]&&(u=!0,s=s.substring(1)),o.parts.push({name:s,body:c}),u){if(void 0!==o.capture)throw new Error(\"Only one of the selectors can capture using * modifier\");o.capture=o.parts.length-1}};if(!e.includes(\">>\"))return n=e.length,i(),o;for(;n<e.length;){const o=e[n];\"\\\\\"===o&&n+1<e.length?n+=2:o===t?(t=void 0,n++):t||'\"'!==o&&\"'\"!==o&&\"`\"!==o?t||\">\"!==o||\">\"!==e[n+1]?n++:(i(),n+=2,r=n):(t=o,n++)}return i(),o}(e),n=t.parts.map(e=>{if(\"css\"===e.name||\"css:light\"===e.name){\"css:light\"===e.name&&(e.body=\":light(\"+e.body+\")\");return{name:\"css\",body:(0,r.parseCSS)(e.body,o).selector}}return e});return{capture:t.capture,parts:n}},t.customCSSNames=void 0;var r=n(1);const o=new Set([\"not\",\"is\",\"where\",\"has\",\"scope\",\"light\",\"visible\",\"text\",\"text-matches\",\"text-is\",\"has-text\",\"above\",\"below\",\"right-of\",\"left-of\",\"near\",\"nth-match\"]);t.customCSSNames=o},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.parseCSS=function(e,t){let n;try{n=r.tokenize(e),n[n.length-1]instanceof r.EOFToken||n.push(new r.EOFToken)}catch(t){const n=t.message+` while parsing selector \"${e}\"`,r=(t.stack||\"\").indexOf(t.message);throw-1!==r&&(t.stack=t.stack.substring(0,r)+n+t.stack.substring(r+t.message.length)),t.message=n,t}const o=n.find(e=>e instanceof r.AtKeywordToken||e instanceof r.BadStringToken||e instanceof r.BadURLToken||e instanceof r.ColumnToken||e instanceof r.CDOToken||e instanceof r.CDCToken||e instanceof r.SemicolonToken||e instanceof r.OpenCurlyToken||e instanceof r.CloseCurlyToken||e instanceof r.URLToken||e instanceof r.PercentageToken);if(o)throw new Error(`Unsupported token \"${o.toSource()}\" while parsing selector \"${e}\"`);let i=0;const s=new Set;function c(){return new Error(`Unexpected token \"${n[i].toSource()}\" while parsing selector \"${e}\"`)}function u(){for(;n[i]instanceof r.WhitespaceToken;)i++}function a(e=i){return n[e]instanceof r.IdentToken}function l(e=i){return n[e]instanceof r.CommaToken}function p(e=i){return n[e]instanceof r.CloseParenToken}function h(e=i){return n[e]instanceof r.DelimToken&&\"*\"===n[e].value}function f(e=i){return n[e]instanceof r.EOFToken}function d(e=i){return n[e]instanceof r.DelimToken&&[\">\",\"+\",\"~\"].includes(n[e].value)}function m(e=i){return l(e)||p(e)||f(e)||d(e)||n[e]instanceof r.WhitespaceToken}function y(){const e=[g()];for(;u(),l();)i++,e.push(g());return e}function g(){return u(),function(e=i){return n[e]instanceof r.NumberToken}()||function(e=i){return n[e]instanceof r.StringToken}()?n[i++].value:function(){u();const e={simples:[{selector:v(),combinator:\"\"}]};for(;;){if(u(),d())e.simples[e.simples.length-1].combinator=n[i++].value,u();else if(m())break;e.simples.push({combinator:\"\",selector:v()})}return e}()}function v(){let e=\"\";const o=[];for(;!m();)if(a()||h())e+=n[i++].toSource();else if(n[i]instanceof r.HashToken)e+=n[i++].toSource();else if(n[i]instanceof r.DelimToken&&\".\"===n[i].value){if(i++,!a())throw c();e+=\".\"+n[i++].toSource()}else if(n[i]instanceof r.ColonToken)if(i++,a())if(t.has(n[i].value.toLowerCase())){const e=n[i++].value.toLowerCase();o.push({name:e,args:[]}),s.add(e)}else e+=\":\"+n[i++].toSource();else{if(!(n[i]instanceof r.FunctionToken))throw c();{const r=n[i++].value.toLowerCase();if(t.has(r)?(o.push({name:r,args:y()}),s.add(r)):e+=`:${r}(${w()})`,u(),!p())throw c();i++}}else{if(!(n[i]instanceof r.OpenSquareToken))throw c();for(e+=\"[\",i++;!(n[i]instanceof r.CloseSquareToken||f());)e+=n[i++].toSource();if(!(n[i]instanceof r.CloseSquareToken))throw c();e+=\"]\",i++}if(!e&&!o.length)throw c();return{css:e||void 0,functions:o}}function w(){let e=\"\";for(;!p()&&!f();)e+=n[i++].toSource();return e}const b=y();if(!f())throw new Error(`Error while parsing selector \"${e}\"`);if(b.some(e=>\"object\"!=typeof e||!(\"simples\"in e)))throw new Error(`Error while parsing selector \"${e}\"`);return{selector:b,names:Array.from(s)}},t.serializeSelector=function e(t){return t.map(t=>\"string\"==typeof t?`\"${t}\"`:\"number\"==typeof t?String(t):t.simples.map(({selector:t,combinator:n})=>{let r=t.css||\"\";return r+=t.functions.map(t=>`:${t.name}(${e(t.args)})`).join(\"\"),n&&(r+=\" \"+n),r}).join(\" \")).join(\", \")};var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||\"object\"!=typeof e&&\"function\"!=typeof e)return{default:e};var n=o(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if(\"default\"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var c=i?Object.getOwnPropertyDescriptor(e,s):null;c&&(c.get||c.set)?Object.defineProperty(r,s,c):r[s]=e[s]}r.default=e,n&&n.set(e,r);return r}(n(2));function o(e){if(\"function\"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(o=function(e){return e?n:t})(e)}},function(e,t,n){\"use strict\";var r,o,i;o=[t],void 0===(i=\"function\"==typeof(r=function(e){var t=function(e,t,n){return e>=t&&e<=n};function n(e){return t(e,48,57)}function r(e){return n(e)||t(e,65,70)||t(e,97,102)}function o(e){return function(e){return t(e,65,90)}(e)||function(e){return t(e,97,122)}(e)}function i(e){return o(e)||function(e){return e>=128}(e)||95==e}function s(e){return i(e)||n(e)||45==e}function c(e){return t(e,0,8)||11==e||t(e,14,31)||127==e}function u(e){return 10==e}function a(e){return u(e)||9==e||32==e}var l=function(e){this.message=e};function p(e){if(e<=65535)return String.fromCharCode(e);e-=Math.pow(2,16);var t=Math.floor(e/Math.pow(2,10))+55296,n=e%Math.pow(2,10)+56320;return String.fromCharCode(t)+String.fromCharCode(n)}function h(){throw\"Abstract Base Class\"}function f(){return this}function d(){return this}function m(){return this}function y(){return this}function g(){return this}function v(){return this}function w(){return this}function b(){return this}function _(){throw\"Abstract Base Class\"}function E(){return this.value=\"{\",this.mirror=\"}\",this}function S(){return this.value=\"}\",this.mirror=\"{\",this}function T(){return this.value=\"[\",this.mirror=\"]\",this}function k(){return this.value=\"]\",this.mirror=\"[\",this}function C(){return this.value=\"(\",this.mirror=\")\",this}function N(){return this.value=\")\",this.mirror=\"(\",this}function x(){return this}function O(){return this}function A(){return this}function M(){return this}function R(){return this}function P(){return this}function j(){return this}function D(e){return this.value=p(e),this}function q(){throw\"Abstract Base Class\"}function I(e){this.value=e}function L(e){this.value=e,this.mirror=\")\"}function $(e){this.value=e}function U(e){this.value=e,this.type=\"unrestricted\"}function W(e){this.value=e}function B(e){this.value=e}function F(){this.value=null,this.type=\"integer\",this.repr=\"\"}function H(){this.value=null,this.repr=\"\"}function V(){this.value=null,this.type=\"integer\",this.repr=\"\",this.unit=\"\"}function J(e){for(var n=\"\",r=(e=\"\"+e).charCodeAt(0),o=0;o<e.length;o++){var i=e.charCodeAt(o);if(0==i)throw new l(\"Invalid character: the input contains U+0000.\");t(i,1,31)||127==i||0==o&&t(i,48,57)||1==o&&t(i,48,57)&&45==r?n+=\"\\\\\"+i.toString(16)+\" \":i>=128||45==i||95==i||t(i,48,57)||t(i,65,90)||t(i,97,122)?n+=e[o]:n+=\"\\\\\"+e[o]}return n}function Q(e){e=\"\"+e;for(var n=\"\",r=0;r<e.length;r++){var o=e.charCodeAt(r);if(0==o)throw new l(\"Invalid character: the input contains U+0000.\");t(o,1,31)||127==o?n+=\"\\\\\"+o.toString(16)+\" \":n+=34==o||92==o?\"\\\\\"+e[r]:e[r]}return n}(l.prototype=new Error).name=\"InvalidCharacterError\",h.prototype.toJSON=function(){return{token:this.tokenType}},h.prototype.toString=function(){return this.tokenType},h.prototype.toSource=function(){return\"\"+this},f.prototype=Object.create(h.prototype),f.prototype.tokenType=\"BADSTRING\",d.prototype=Object.create(h.prototype),d.prototype.tokenType=\"BADURL\",m.prototype=Object.create(h.prototype),m.prototype.tokenType=\"WHITESPACE\",m.prototype.toString=function(){return\"WS\"},m.prototype.toSource=function(){return\" \"},y.prototype=Object.create(h.prototype),y.prototype.tokenType=\"CDO\",y.prototype.toSource=function(){return\"\\x3c!--\"},g.prototype=Object.create(h.prototype),g.prototype.tokenType=\"CDC\",g.prototype.toSource=function(){return\"--\\x3e\"},v.prototype=Object.create(h.prototype),v.prototype.tokenType=\":\",w.prototype=Object.create(h.prototype),w.prototype.tokenType=\";\",b.prototype=Object.create(h.prototype),b.prototype.tokenType=\",\",_.prototype=Object.create(h.prototype),E.prototype=Object.create(_.prototype),E.prototype.tokenType=\"{\",S.prototype=Object.create(_.prototype),S.prototype.tokenType=\"}\",T.prototype=Object.create(_.prototype),T.prototype.tokenType=\"[\",k.prototype=Object.create(_.prototype),k.prototype.tokenType=\"]\",C.prototype=Object.create(_.prototype),C.prototype.tokenType=\"(\",N.prototype=Object.create(_.prototype),N.prototype.tokenType=\")\",x.prototype=Object.create(h.prototype),x.prototype.tokenType=\"~=\",O.prototype=Object.create(h.prototype),O.prototype.tokenType=\"|=\",A.prototype=Object.create(h.prototype),A.prototype.tokenType=\"^=\",M.prototype=Object.create(h.prototype),M.prototype.tokenType=\"$=\",R.prototype=Object.create(h.prototype),R.prototype.tokenType=\"*=\",P.prototype=Object.create(h.prototype),P.prototype.tokenType=\"||\",j.prototype=Object.create(h.prototype),j.prototype.tokenType=\"EOF\",j.prototype.toSource=function(){return\"\"},D.prototype=Object.create(h.prototype),D.prototype.tokenType=\"DELIM\",D.prototype.toString=function(){return\"DELIM(\"+this.value+\")\"},D.prototype.toJSON=function(){var e=this.constructor.prototype.constructor.prototype.toJSON.call(this);return e.value=this.value,e},D.prototype.toSource=function(){return\"\\\\\"==this.value?\"\\\\\\n\":this.value},q.prototype=Object.create(h.prototype),q.prototype.ASCIIMatch=function(e){return this.value.toLowerCase()==e.toLowerCase()},q.prototype.toJSON=function(){var e=this.constructor.prototype.constructor.prototype.toJSON.call(this);return e.value=this.value,e},I.prototype=Object.create(q.prototype),I.prototype.tokenType=\"IDENT\",I.prototype.toString=function(){return\"IDENT(\"+this.value+\")\"},I.prototype.toSource=function(){return J(this.value)},L.prototype=Object.create(q.prototype),L.prototype.tokenType=\"FUNCTION\",L.prototype.toString=function(){return\"FUNCTION(\"+this.value+\")\"},L.prototype.toSource=function(){return J(this.value)+\"(\"},$.prototype=Object.create(q.prototype),$.prototype.tokenType=\"AT-KEYWORD\",$.prototype.toString=function(){return\"AT(\"+this.value+\")\"},$.prototype.toSource=function(){return\"@\"+J(this.value)},U.prototype=Object.create(q.prototype),U.prototype.tokenType=\"HASH\",U.prototype.toString=function(){return\"HASH(\"+this.value+\")\"},U.prototype.toJSON=function(){var e=this.constructor.prototype.constructor.prototype.toJSON.call(this);return e.value=this.value,e.type=this.type,e},U.prototype.toSource=function(){return\"id\"==this.type?\"#\"+J(this.value):\"#\"+function(e){for(var n=\"\",r=((e=\"\"+e).charCodeAt(0),0);r<e.length;r++){var o=e.charCodeAt(r);if(0==o)throw new l(\"Invalid character: the input contains U+0000.\");o>=128||45==o||95==o||t(o,48,57)||t(o,65,90)||t(o,97,122)?n+=e[r]:n+=\"\\\\\"+o.toString(16)+\" \"}return n}(this.value)},W.prototype=Object.create(q.prototype),W.prototype.tokenType=\"STRING\",W.prototype.toString=function(){return'\"'+Q(this.value)+'\"'},B.prototype=Object.create(q.prototype),B.prototype.tokenType=\"URL\",B.prototype.toString=function(){return\"URL(\"+this.value+\")\"},B.prototype.toSource=function(){return'url(\"'+Q(this.value)+'\")'},F.prototype=Object.create(h.prototype),F.prototype.tokenType=\"NUMBER\",F.prototype.toString=function(){return\"integer\"==this.type?\"INT(\"+this.value+\")\":\"NUMBER(\"+this.value+\")\"},F.prototype.toJSON=function(){var e=this.constructor.prototype.constructor.prototype.toJSON.call(this);return e.value=this.value,e.type=this.type,e.repr=this.repr,e},F.prototype.toSource=function(){return this.repr},H.prototype=Object.create(h.prototype),H.prototype.tokenType=\"PERCENTAGE\",H.prototype.toString=function(){return\"PERCENTAGE(\"+this.value+\")\"},H.prototype.toJSON=function(){var e=this.constructor.prototype.constructor.prototype.toJSON.call(this);return e.value=this.value,e.repr=this.repr,e},H.prototype.toSource=function(){return this.repr+\"%\"},V.prototype=Object.create(h.prototype),V.prototype.tokenType=\"DIMENSION\",V.prototype.toString=function(){return\"DIM(\"+this.value+\",\"+this.unit+\")\"},V.prototype.toJSON=function(){var e=this.constructor.prototype.constructor.prototype.toJSON.call(this);return e.value=this.value,e.type=this.type,e.repr=this.repr,e.unit=this.unit,e},V.prototype.toSource=function(){var e=this.repr,n=J(this.unit);return\"e\"!=n[0].toLowerCase()||\"-\"!=n[1]&&!t(n.charCodeAt(1),48,57)||(n=\"\\\\65 \"+n.slice(1,n.length)),e+n},e.tokenize=function(e){e=function(e){for(var n=[],r=0;r<e.length;r++){var o=e.charCodeAt(r);if(13==o&&10==e.charCodeAt(r+1)&&(o=10,r++),13!=o&&12!=o||(o=10),0==o&&(o=65533),t(o,55296,56319)&&t(e.charCodeAt(r+1),56320,57343)){var i=o-55296,s=e.charCodeAt(r+1)-56320;o=Math.pow(2,16)+i*Math.pow(2,10)+s,r++}n.push(o)}return n}(e);for(var o,l=-1,h=[],_=0,q=0,J=0,Q={line:_,column:q},X=function(t){return t>=e.length?-1:e[t]},G=function(e){if(void 0===e&&(e=1),e>3)throw\"Spec Error: no more than three codepoints of lookahead.\";return X(l+e)},z=function(e){return void 0===e&&(e=1),u(o=X(l+=e))?(_+=1,J=q,q=0):q+=e,!0},Y=function(){return l-=1,u(o)?(_-=1,q=J):q-=1,Q.line=_,Q.column=q,!0},K=function(e){return void 0===e&&(e=o),-1==e},Z=function(){return console.log(\"Parse error at index \"+l+\", processing codepoint 0x\"+o.toString(16)+\".\"),!0},ee=function(){if(te(),z(),a(o)){for(;a(G());)z();return new m}if(34==o)return oe();if(35==o){if(s(G())||ce(G(1),G(2))){var e=new U;return ae(G(1),G(2),G(3))&&(e.type=\"id\"),e.value=he(),e}return new D(o)}return 36==o?61==G()?(z(),new M):new D(o):39==o?oe():40==o?new C:41==o?new N:42==o?61==G()?(z(),new R):new D(o):43==o?pe()?(Y(),ne()):new D(o):44==o?new b:45==o?pe()?(Y(),ne()):45==G(1)&&62==G(2)?(z(2),new g):le()?(Y(),re()):new D(o):46==o?pe()?(Y(),ne()):new D(o):58==o?new v:59==o?new w:60==o?33==G(1)&&45==G(2)&&45==G(3)?(z(3),new y):new D(o):64==o?ae(G(1),G(2),G(3))?new $(he()):new D(o):91==o?new T:92==o?ue()?(Y(),re()):(Z(),new D(o)):93==o?new k:94==o?61==G()?(z(),new A):new D(o):123==o?new E:124==o?61==G()?(z(),new O):124==G()?(z(),new P):new D(o):125==o?new S:126==o?61==G()?(z(),new x):new D(o):n(o)?(Y(),ne()):i(o)?(Y(),re()):K()?new j:new D(o)},te=function(){for(;47==G(1)&&42==G(2);)for(z(2);;){if(z(),42==o&&47==G()){z();break}if(K())return void Z()}},ne=function(){var e,t=fe();return ae(G(1),G(2),G(3))?((e=new V).value=t.value,e.repr=t.repr,e.type=t.type,e.unit=he(),e):37==G()?(z(),(e=new H).value=t.value,e.repr=t.repr,e):((e=new F).value=t.value,e.repr=t.repr,e.type=t.type,e)},re=function(){var e=he();if(\"url\"==e.toLowerCase()&&40==G()){for(z();a(G(1))&&a(G(2));)z();return 34==G()||39==G()?new L(e):!a(G())||34!=G(2)&&39!=G(2)?ie():new L(e)}return 40==G()?(z(),new L(e)):new I(e)},oe=function(e){void 0===e&&(e=o);for(var t=\"\";z();){if(o==e||K())return new W(t);if(u(o))return Z(),Y(),new f;92==o?K(G())||(u(G())?z():t+=p(se())):t+=p(o)}},ie=function(){for(var e=new B(\"\");a(G());)z();if(K(G()))return e;for(;z();){if(41==o||K())return e;if(a(o)){for(;a(G());)z();return 41==G()||K(G())?(z(),e):(me(),new d)}if(34==o||39==o||40==o||c(o))return Z(),me(),new d;if(92==o){if(!ue())return Z(),me(),new d;e.value+=p(se())}else e.value+=p(o)}},se=function(){if(z(),r(o)){for(var e=[o],t=0;t<5&&r(G());t++)z(),e.push(o);a(G())&&z();var n=parseInt(e.map((function(e){return String.fromCharCode(e)})).join(\"\"),16);return n>1114111&&(n=65533),n}return K()?65533:o},ce=function(e,t){return 92==e&&!u(t)},ue=function(){return ce(o,G())},ae=function(e,t,n){return 45==e?i(t)||45==t||ce(t,n):!!i(e)||92==e&&ce(e,t)},le=function(){return ae(o,G(1),G(2))},pe=function(){return e=o,t=G(1),r=G(2),43==e||45==e?!!n(t)||!(46!=t||!n(r)):46==e?!!n(t):!!n(e);var e,t,r},he=function(){for(var e=\"\";z();)if(s(o))e+=p(o);else{if(!ue())return Y(),e;e+=p(se())}},fe=function(){var e=[],t=\"integer\";for(43!=G()&&45!=G()||(z(),e+=p(o));n(G());)z(),e+=p(o);if(46==G(1)&&n(G(2)))for(z(),e+=p(o),z(),e+=p(o),t=\"number\";n(G());)z(),e+=p(o);var r=G(1),i=G(2),s=G(3);if(69!=r&&101!=r||!n(i)){if((69==r||101==r)&&(43==i||45==i)&&n(s))for(z(),e+=p(o),z(),e+=p(o),z(),e+=p(o),t=\"number\";n(G());)z(),e+=p(o)}else for(z(),e+=p(o),z(),e+=p(o),t=\"number\";n(G());)z(),e+=p(o);return{type:t,value:de(e),repr:e}},de=function(e){return+e},me=function(){for(;z();){if(41==o||K())return;ue()&&se()}},ye=0;!K(G());)if(h.push(ee()),++ye>2*e.length)return\"I'm infinite-looping!\";return h},e.IdentToken=I,e.FunctionToken=L,e.AtKeywordToken=$,e.HashToken=U,e.StringToken=W,e.BadStringToken=f,e.URLToken=B,e.BadURLToken=d,e.DelimToken=D,e.NumberToken=F,e.PercentageToken=H,e.DimensionToken=V,e.IncludeMatchToken=x,e.DashMatchToken=O,e.PrefixMatchToken=A,e.SuffixMatchToken=M,e.SubstringMatchToken=R,e.ColumnToken=P,e.WhitespaceToken=m,e.CDOToken=y,e.CDCToken=g,e.ColonToken=v,e.SemicolonToken=w,e.CommaToken=b,e.OpenParenToken=C,e.CloseParenToken=N,e.OpenSquareToken=T,e.CloseSquareToken=k,e.OpenCurlyToken=E,e.CloseCurlyToken=S,e.EOFToken=j,e.CSSParserToken=h,e.GroupingToken=_})?r.apply(t,o):r)||(e.exports=i)},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.createLaxTextMatcher=d,t.createStrictTextMatcher=m,t.createRegexTextMatcher=y,t.elementText=v,t.elementMatchesText=w,t.parentElementOrShadowHost=N,t.isVisible=A,t.SelectorEvaluatorImpl=void 0;var r=n(0);t.SelectorEvaluatorImpl=class{constructor(e){this._engines=new Map,this._cacheQueryCSS=new Map,this._cacheMatches=new Map,this._cacheQuery=new Map,this._cacheMatchesSimple=new Map,this._cacheMatchesParents=new Map,this._cacheCallMatches=new Map,this._cacheCallQuery=new Map,this._cacheQuerySimple=new Map,this._cacheText=new Map,this._scoreMap=void 0,this._retainCacheCounter=0;for(const[t,n]of e)this._engines.set(t,n);this._engines.set(\"not\",c),this._engines.set(\"is\",o),this._engines.set(\"where\",o),this._engines.set(\"has\",i),this._engines.set(\"scope\",s),this._engines.set(\"light\",u),this._engines.set(\"visible\",a),this._engines.set(\"text\",l),this._engines.set(\"text-is\",p),this._engines.set(\"text-matches\",h),this._engines.set(\"has-text\",f),this._engines.set(\"right-of\",k(\"right-of\",b)),this._engines.set(\"left-of\",k(\"left-of\",_)),this._engines.set(\"above\",k(\"above\",E)),this._engines.set(\"below\",k(\"below\",S)),this._engines.set(\"near\",k(\"near\",T)),this._engines.set(\"nth-match\",C);const t=[...this._engines.keys()];t.sort();const n=[...r.customCSSNames];if(n.sort(),t.join(\"|\")!==n.join(\"|\"))throw new Error(`Please keep customCSSNames in sync with evaluator engines: ${t.join(\"|\")} vs ${n.join(\"|\")}`)}begin(){++this._retainCacheCounter}end(){--this._retainCacheCounter,this._retainCacheCounter||(this._cacheQueryCSS.clear(),this._cacheMatches.clear(),this._cacheQuery.clear(),this._cacheMatchesSimple.clear(),this._cacheMatchesParents.clear(),this._cacheCallMatches.clear(),this._cacheCallQuery.clear(),this._cacheQuerySimple.clear(),this._cacheText.clear())}_cached(e,t,n,r){e.has(t)||e.set(t,[]);const o=e.get(t),i=o.find(e=>n.every((t,n)=>e.rest[n]===t));if(i)return i.result;const s=r();return o.push({rest:n,result:s}),s}_checkSelector(e){if(!(\"object\"==typeof e&&e&&(Array.isArray(e)||\"simples\"in e&&e.simples.length)))throw new Error(`Malformed selector \"${e}\"`);return e}matches(e,t,n){const r=this._checkSelector(t);this.begin();try{return this._cached(this._cacheMatches,e,[r,n.scope,n.pierceShadow],()=>Array.isArray(r)?this._matchesEngine(o,e,r,n):!!this._matchesSimple(e,r.simples[r.simples.length-1].selector,n)&&this._matchesParents(e,r,r.simples.length-2,n))}finally{this.end()}}query(e,t){const n=this._checkSelector(t);this.begin();try{return this._cached(this._cacheQuery,n,[e.scope,e.pierceShadow],()=>{if(Array.isArray(n))return this._queryEngine(o,e,n);const t=this._scoreMap;this._scoreMap=new Map;let r=this._querySimple(e,n.simples[n.simples.length-1].selector);return r=r.filter(t=>this._matchesParents(t,n,n.simples.length-2,e)),this._scoreMap.size&&r.sort((e,t)=>{const n=this._scoreMap.get(e),r=this._scoreMap.get(t);return n===r?0:void 0===n?1:void 0===r?-1:n-r}),this._scoreMap=t,r})}finally{this.end()}}_markScore(e,t){this._scoreMap&&this._scoreMap.set(e,t)}_matchesSimple(e,t,n){return this._cached(this._cacheMatchesSimple,e,[t,n.scope,n.pierceShadow],()=>{if(!t.functions.some(e=>\"scope\"===e.name||\"is\"===e.name)&&e===n.scope)return!1;if(t.css&&!this._matchesCSS(e,t.css))return!1;for(const r of t.functions)if(!this._matchesEngine(this._getEngine(r.name),e,r.args,n))return!1;return!0})}_querySimple(e,t){return t.functions.length?this._cached(this._cacheQuerySimple,t,[e.scope,e.pierceShadow],()=>{let n=t.css;const r=t.functions;let o;\"*\"===n&&r.length&&(n=void 0);let i=-1;void 0!==n?o=this._queryCSS(e,n):(i=r.findIndex(e=>void 0!==this._getEngine(e.name).query),-1===i&&(i=0),o=this._queryEngine(this._getEngine(r[i].name),e,r[i].args));for(let t=0;t<r.length;t++){if(t===i)continue;const n=this._getEngine(r[t].name);void 0!==n.matches&&(o=o.filter(o=>this._matchesEngine(n,o,r[t].args,e)))}for(let t=0;t<r.length;t++){if(t===i)continue;const n=this._getEngine(r[t].name);void 0===n.matches&&(o=o.filter(o=>this._matchesEngine(n,o,r[t].args,e)))}return o}):this._queryCSS(e,t.css||\"*\")}_matchesParents(e,t,n,r){return n<0||this._cached(this._cacheMatchesParents,e,[t,n,r.scope,r.pierceShadow],()=>{const{selector:o,combinator:i}=t.simples[n];if(\">\"===i){const i=x(e,r);return!(!i||!this._matchesSimple(i,o,r))&&this._matchesParents(i,t,n-1,r)}if(\"+\"===i){const i=O(e,r);return!(!i||!this._matchesSimple(i,o,r))&&this._matchesParents(i,t,n-1,r)}if(\"\"===i){let i=x(e,r);for(;i;){if(this._matchesSimple(i,o,r)){if(this._matchesParents(i,t,n-1,r))return!0;if(\"\"===t.simples[n-1].combinator)break}i=x(i,r)}return!1}if(\"~\"===i){let i=O(e,r);for(;i;){if(this._matchesSimple(i,o,r)){if(this._matchesParents(i,t,n-1,r))return!0;if(\"~\"===t.simples[n-1].combinator)break}i=O(i,r)}return!1}if(\">=\"===i){let i=e;for(;i;){if(this._matchesSimple(i,o,r)){if(this._matchesParents(i,t,n-1,r))return!0;if(\"\"===t.simples[n-1].combinator)break}i=x(i,r)}return!1}throw new Error(`Unsupported combinator \"${i}\"`)})}_matchesEngine(e,t,n,r){if(e.matches)return this._callMatches(e,t,n,r);if(e.query)return this._callQuery(e,n,r).includes(t);throw new Error('Selector engine should implement \"matches\" or \"query\"')}_queryEngine(e,t,n){if(e.query)return this._callQuery(e,n,t);if(e.matches)return this._queryCSS(t,\"*\").filter(r=>this._callMatches(e,r,n,t));throw new Error('Selector engine should implement \"matches\" or \"query\"')}_callMatches(e,t,n,r){return this._cached(this._cacheCallMatches,t,[e,r.scope,r.pierceShadow,...n],()=>e.matches(t,n,r,this))}_callQuery(e,t,n){return this._cached(this._cacheCallQuery,e,[n.scope,n.pierceShadow,...t],()=>e.query(n,t,this))}_matchesCSS(e,t){return e.matches(t)}_queryCSS(e,t){return this._cached(this._cacheQueryCSS,t,[e.scope,e.pierceShadow],()=>{let n=[];return function r(o){if(n=n.concat([...o.querySelectorAll(t)]),e.pierceShadow){o.shadowRoot&&r(o.shadowRoot);for(const e of o.querySelectorAll(\"*\"))e.shadowRoot&&r(e.shadowRoot)}}(e.scope),n})}_getEngine(e){const t=this._engines.get(e);if(!t)throw new Error(`Unknown selector engine \"${e}\"`);return t}};const o={matches(e,t,n,r){if(0===t.length)throw new Error('\"is\" engine expects non-empty selector list');return t.some(t=>r.matches(e,t,n))},query(e,t,n){if(0===t.length)throw new Error('\"is\" engine expects non-empty selector list');let r=[];for(const o of t)r=r.concat(n.query(e,o));return 1===t.length?r:function(e){const t=new Map,n=[],r=[];return e.forEach(e=>(function e(r){let o=t.get(r);if(o)return o;const i=N(r);if(i){e(i).children.push(r)}else n.push(r);return o={children:[],taken:!1},t.set(r,o),o}(e)).taken=!0),n.forEach((function e(n){const o=t.get(n);o.taken&&r.push(n);if(o.children.length>1){const e=new Set(o.children);o.children=[];let t=n.firstElementChild;for(;t&&o.children.length<e.size;)e.has(t)&&o.children.push(t),t=t.nextElementSibling;for(t=n.shadowRoot?n.shadowRoot.firstElementChild:null;t&&o.children.length<e.size;)e.has(t)&&o.children.push(t),t=t.nextElementSibling}o.children.forEach(e)})),r}(r)}},i={matches(e,t,n,r){if(0===t.length)throw new Error('\"has\" engine expects non-empty selector list');return r.query({...n,scope:e},t).length>0}},s={matches(e,t,n,r){if(0!==t.length)throw new Error('\"scope\" engine expects no arguments');return 9===n.scope.nodeType?e===n.scope.documentElement:e===n.scope},query(e,t,n){if(0!==t.length)throw new Error('\"scope\" engine expects no arguments');if(9===e.scope.nodeType){const t=e.scope.documentElement;return t?[t]:[]}return 1===e.scope.nodeType?[e.scope]:[]}},c={matches(e,t,n,r){if(0===t.length)throw new Error('\"not\" engine expects non-empty selector list');return!r.matches(e,t,n)}},u={query:(e,t,n)=>n.query({...e,pierceShadow:!1},t),matches:(e,t,n,r)=>r.matches(e,t,{...n,pierceShadow:!1})},a={matches(e,t,n,r){if(t.length)throw new Error('\"visible\" engine expects no arguments');return A(e)}},l={matches(e,t,n,r){if(1!==t.length||\"string\"!=typeof t[0])throw new Error('\"text\" engine expects a single string');return\"self\"===w(r,e,d(t[0]))}},p={matches(e,t,n,r){if(1!==t.length||\"string\"!=typeof t[0])throw new Error('\"text-is\" engine expects a single string');return\"none\"!==w(r,e,m(t[0]))}},h={matches(e,t,n,r){if(0===t.length||\"string\"!=typeof t[0]||t.length>2||2===t.length&&\"string\"!=typeof t[1])throw new Error('\"text-matches\" engine expects a regexp body and optional regexp flags');return\"self\"===w(r,e,y(t[0],2===t.length?t[1]:void 0))}},f={matches(e,t,n,r){if(1!==t.length||\"string\"!=typeof t[0])throw new Error('\"has-text\" engine expects a single string');if(g(e))return!1;return d(t[0])(v(r,e))}};function d(e){return e=e.trim().replace(/\\s+/g,\" \").toLowerCase(),t=>t.full.trim().replace(/\\s+/g,\" \").toLowerCase().includes(e)}function m(e){return e=e.trim().replace(/\\s+/g,\" \"),t=>t.immediate.some(t=>t.trim().replace(/\\s+/g,\" \")===e)}function y(e,t){const n=new RegExp(e,t);return e=>n.test(e.full)}function g(e){return\"SCRIPT\"===e.nodeName||\"STYLE\"===e.nodeName||document.head&&document.head.contains(e)}function v(e,t){let n=e._cacheText.get(t);if(void 0===n){if(n={full:\"\",immediate:[]},!g(t)){let r=\"\";if(t instanceof HTMLInputElement&&(\"submit\"===t.type||\"button\"===t.type))n={full:t.value,immediate:[t.value]};else{for(let o=t.firstChild;o;o=o.nextSibling)o.nodeType===Node.TEXT_NODE?(n.full+=o.nodeValue||\"\",r+=o.nodeValue||\"\"):(r&&n.immediate.push(r),r=\"\",o.nodeType===Node.ELEMENT_NODE&&(n.full+=v(e,o).full));r&&n.immediate.push(r),t.shadowRoot&&(n.full+=v(e,t.shadowRoot).full)}}e._cacheText.set(t,n)}return n}function w(e,t,n){if(g(t))return\"none\";if(!n(v(e,t)))return\"none\";for(let r=t.firstChild;r;r=r.nextSibling)if(r.nodeType===Node.ELEMENT_NODE&&n(v(e,r)))return\"selfAndChildren\";return t.shadowRoot&&n(v(e,t.shadowRoot))?\"selfAndChildren\":\"self\"}function b(e,t,n){const r=e.left-t.right;if(!(r<0||void 0!==n&&r>n))return r+Math.max(t.bottom-e.bottom,0)+Math.max(e.top-t.top,0)}function _(e,t,n){const r=t.left-e.right;if(!(r<0||void 0!==n&&r>n))return r+Math.max(t.bottom-e.bottom,0)+Math.max(e.top-t.top,0)}function E(e,t,n){const r=t.top-e.bottom;if(!(r<0||void 0!==n&&r>n))return r+Math.max(e.left-t.left,0)+Math.max(t.right-e.right,0)}function S(e,t,n){const r=e.top-t.bottom;if(!(r<0||void 0!==n&&r>n))return r+Math.max(e.left-t.left,0)+Math.max(t.right-e.right,0)}function T(e,t,n){const r=void 0===n?50:n;let o=0;return e.left-t.right>=0&&(o+=e.left-t.right),t.left-e.right>=0&&(o+=t.left-e.right),t.top-e.bottom>=0&&(o+=t.top-e.bottom),e.top-t.bottom>=0&&(o+=e.top-t.bottom),o>r?void 0:o}function k(e,t){return{matches(n,r,o,i){const s=r.length&&\"number\"==typeof r[r.length-1]?r[r.length-1]:void 0,c=void 0===s?r:r.slice(0,r.length-1);if(r.length<1+(void 0===s?0:1))throw new Error(`\"${e}\" engine expects a selector list and optional maximum distance in pixels`);const u=n.getBoundingClientRect();let a;for(const e of i.query(o,c)){if(e===n)continue;const r=t(u,e.getBoundingClientRect(),s);void 0!==r&&((void 0===a||r<a)&&(a=r))}return void 0!==a&&(i._markScore(n,a),!0)}}}const C={query(e,t,n){let r=t[t.length-1];if(t.length<2)throw new Error('\"nth-match\" engine expects non-empty selector list and an index argument');if(\"number\"!=typeof r||r<1)throw new Error('\"nth-match\" engine expects a one-based index as the last argument');const i=o.query(e,t.slice(0,t.length-1),n);return r--,r<i.length?[i[r]]:[]}};function N(e){return e.parentElement?e.parentElement:e.parentNode&&e.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&e.parentNode.host?e.parentNode.host:void 0}function x(e,t){if(e!==t.scope)return t.pierceShadow?N(e):e.parentElement||void 0}function O(e,t){if(e!==t.scope)return e.previousElementSibling||void 0}function A(e){if(!e.ownerDocument||!e.ownerDocument.defaultView)return!0;const t=e.ownerDocument.defaultView.getComputedStyle(e);if(!t||\"hidden\"===t.visibility)return!1;const n=e.getBoundingClientRect();return n.width>0&&n.height>0}},function(e,t){var n;n=function(){return this}();try{n=n||new Function(\"return this\")()}catch(e){\"object\"==typeof window&&(n=window)}e.exports=n},,function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.checkComponentAttribute=function(e,t){for(const n of t.jsonPath)null!=e&&(e=e[n]);const n=\"string\"!=typeof e||t.caseSensetive?e:e.toUpperCase(),r=\"string\"!=typeof t.value||t.caseSensetive?t.value:t.value.toUpperCase();return\"<truthy>\"===t.op?!!n:\"=\"===t.op?n===r:\"string\"==typeof n&&\"string\"==typeof r&&(\"*=\"===t.op?n.includes(r):\"^=\"===t.op?n.startsWith(r):\"$=\"===t.op?n.endsWith(r):\"|=\"===t.op?n===r||n.startsWith(r+\"-\"):\"~=\"===t.op&&n.split(\" \").includes(r))},t.parseComponentSelector=function(e){let t=0,n=0===e.length;const r=()=>e[t]||\"\",o=()=>{const o=r();return++t,n=t>=e.length,o},i=o=>{if(n)throw new Error(`Unexpected end of selector while parsing selector \\`${e}\\``);throw new Error(`Error while parsing selector \\`${e}\\` - unexpected symbol \"${r()}\" at position ${t}`+(o?\" during \"+o:\"\"))};function s(){for(;!n&&/\\s/.test(r());)o()}function c(){let e=\"\";for(s();!n&&/[-$0-9A-Z_]/i.test(r());)e+=o();return e}function u(e){let t=o();for(t!==e&&i(\"parsing quoted string\");!n&&r()!==e;)\"\\\\\"===r()&&o(),t+=o();return r()!==e&&i(\"parsing quoted string\"),t+=o(),t}function a(){let e=\"\";return s(),e=\"'\"===r()||'\"'===r()?u(r()).slice(1,-1):c(),e||i(\"parsing property path\"),e}function l(){o();const t=[];for(t.push(a()),s();\".\"===r();)o(),t.push(a()),s();if(\"]\"===r())return o(),{jsonPath:t,op:\"<truthy>\",value:null,caseSensetive:!1};const c=function(){s();let e=\"\";return n||(e+=o()),n||\"=\"===e||(e+=o()),[\"=\",\"*=\",\"^=\",\"$=\",\"|=\",\"~=\"].includes(e)||i(\"parsing operator\"),e}();let l=void 0,p=!0;if(s(),\"'\"===r()||'\"'===r())l=u(r()).slice(1,-1),s(),\"i\"===r()||\"I\"===r()?(p=!1,o()):\"s\"!==r()&&\"S\"!==r()||(p=!0,o());else{for(l=\"\";!n&&!/\\s/.test(r())&&\"]\"!==r();)l+=o();\"true\"===l?l=!0:\"false\"===l?l=!1:(l=+l,isNaN(l)&&i(\"parsing attribute value\"))}if(s(),\"]\"!==r()&&i(\"parsing attribute value\"),o(),\"=\"!==c&&\"string\"!=typeof l)throw new Error(`Error while parsing selector \\`${e}\\` - cannot use ${c} in attribute with non-string matching value - ${l}`);return{jsonPath:t,op:c,value:l,caseSensetive:p}}const p={name:\"\",attributes:[]};p.name=c(),s();for(;\"[\"===r();)p.attributes.push(l()),s();n||i(void 0);if(!p.name&&!p.attributes.length)throw new Error(`Error while parsing selector \\`${e}\\` - selector cannot be empty`);return p}},,,function(e,t,n){\"use strict\";(function(e){Object.defineProperty(t,\"__esModule\",{value:!0}),t.default=t.InjectedScript=t.SelectorTypeEnum=void 0;var r=n(10),o=n(11),i=n(12),s=n(0),c=n(3);let u;t.SelectorTypeEnum=u,function(e){e.ID=\"id\",e.PLAYWRIGHT=\"playwright\",e.DATA_ATTRIBUTE=\"dataAttribute\",e.ATTRIBUTE=\"attribute\",e.INNER_VALUE=\"innerValue\",e.PNC=\"PnC\",e.XPATH=\"xpath\"}(u||(t.SelectorTypeEnum=u={}));class a{constructor(e,t,n){this._engines=void 0,this._evaluator=void 0,this._stableRafCount=void 0,this._replaceRafWithTimeout=void 0,this._evaluator=new c.SelectorEvaluatorImpl(new Map),this._engines=new Map,this._engines.set(\"xpath\",r.XPathEngine),this._engines.set(\"xpath:light\",r.XPathEngine),this._engines.set(\"_react\",o.ReactEngine),this._engines.set(\"_vue\",i.VueEngine),this._engines.set(\"crusher\",this._createCrusherEngine(!0)),this._engines.set(\"text\",this._createTextEngine(!0)),this._engines.set(\"text:light\",this._createTextEngine(!1)),this._engines.set(\"id\",this._createAttributeEngine(\"id\",!0)),this._engines.set(\"id:light\",this._createAttributeEngine(\"id\",!1)),this._engines.set(\"data-testid\",this._createAttributeEngine(\"data-testid\",!0)),this._engines.set(\"data-testid:light\",this._createAttributeEngine(\"data-testid\",!1)),this._engines.set(\"data-test-id\",this._createAttributeEngine(\"data-test-id\",!0)),this._engines.set(\"data-test-id:light\",this._createAttributeEngine(\"data-test-id\",!1)),this._engines.set(\"data-test\",this._createAttributeEngine(\"data-test\",!0)),this._engines.set(\"data-test:light\",this._createAttributeEngine(\"data-test\",!1)),this._engines.set(\"css\",this._createCSSEngine()),this._engines.set(\"nth\",{queryAll:()=>[]}),this._engines.set(\"visible\",{queryAll:()=>[]});for(const{name:e,engine:t}of n)this._engines.set(e,t);this._stableRafCount=e,this._replaceRafWithTimeout=t}parseSelector(e){const t=(0,s.parseSelector)(e);for(const n of t.parts)if(!this._engines.has(n.name))throw new Error(`Unknown engine \"${n.name}\" while parsing selector ${e}`);return t}querySelector(e,t,n){if(!t.querySelector)throw new Error(\"Node is not queryable.\");this._evaluator.begin();try{var r,o;const i=this._querySelectorRecursively([{element:t,capture:void 0}],e,0,new Map);if(n&&i.length>1)throw new Error(`strict mode violation: selector resolved to ${i.length} elements.`);return(null===(r=i[0])||void 0===r?void 0:r.capture)||(null===(o=i[0])||void 0===o?void 0:o.element)}finally{this._evaluator.end()}}_querySelectorRecursively(e,t,n,r){if(n===t.parts.length)return e;const o=t.parts[n];if(\"nth\"===o.name){let i=[];if(\"0\"===o.body)i=e.slice(0,1);else if(\"-1\"===o.body)e.length&&(i=e.slice(e.length-1));else{if(\"number\"==typeof t.capture)throw new Error(\"Can't query n-th element in a request with the capture.\");const n=+o.body,r=new Set;for(const t of e)r.add(t.element),n+1===r.size&&(i=[t])}return this._querySelectorRecursively(i,t,n+1,r)}if(\"visible\"===o.name){const t=Boolean(o.body);return e.filter(e=>t===(0,c.isVisible)(e.element))}const i=[];for(const o of e){const e=n-1===t.capture?o.element:o.capture;let s=r.get(o.element);s||(s=[],r.set(o.element,s));let c=s[n];c||(c=this._queryEngineAll(t.parts[n],o.element),s[n]=c);for(const t of c)i.push({element:t,capture:e})}return this._querySelectorRecursively(i,t,n+1,r)}querySelectorAll(e,t){if(!t.querySelectorAll)throw new Error(\"Node is not queryable.\");this._evaluator.begin();try{const n=this._querySelectorRecursively([{element:t,capture:void 0}],e,0,new Map),r=new Set;for(const e of n)r.add(e.capture||e.element);return[...r]}finally{this._evaluator.end()}}_queryEngineAll(e,t){return this._engines.get(e.name).queryAll(t,e.body)}_createAttributeEngine(e,t){return{queryAll:(n,r)=>this._evaluator.query({scope:n,pierceShadow:t},(t=>[{simples:[{selector:{css:`[${e}=${JSON.stringify(t)}]`,functions:[]},combinator:\"\"}]}])(r))}}_createCSSEngine(){const e=this._evaluator;return{queryAll:(t,n)=>e.query({scope:t,pierceShadow:!0},n)}}_createCrusherEngine(e=!0){const t=(e,t)=>{t.startsWith(\"/\")&&(t=\".\"+t);const n=[],r=e instanceof Document?e:e.ownerDocument;if(!r)return n;const o=r.evaluate(t,e,null,XPathResult.ORDERED_NODE_ITERATOR_TYPE);for(let e=o.iterateNext();e;e=o.iterateNext())e.nodeType===Node.ELEMENT_NODE&&n.push(e);return n},n=(n,r)=>{try{const{uuid:o,selectors:i}=JSON.parse(decodeURIComponent(r));this._evaluator.begin();const s=i.find(e=>e.type===u.PLAYWRIGHT);if(s)try{const e=this.querySelectorAll(this.parseSelector(s.value),n);if(e&&e.length)return this._evaluator.end(),window[o]={selector:s.value,selectorType:s.type},e}catch(e){}const c=i.filter(e=>e.type!==u.PLAYWRIGHT);for(const r of c){let i=[];try{i=r.type===u.XPATH?t(n,r.value):this._evaluator._queryCSS({scope:n,pierceShadow:e},r.value)}catch(e){}if(i&&i.length)return this._evaluator.end(),window[o]={selector:r.value,selectorType:r.type},i}return this._evaluator.end(),[]}catch(e){throw new Error(r)}};return{queryAll:(e,t)=>n(e,t)}}_createTextEngine(e){const t=(t,n)=>{const{matcher:r,kind:o}=function(e){if(\"/\"===e[0]&&e.lastIndexOf(\"/\")>0){const t=e.lastIndexOf(\"/\");return{matcher:(0,c.createRegexTextMatcher)(e.substring(1,t),e.substring(t+1)),kind:\"regex\"}}let t=!1;e.length>1&&'\"'===e[0]&&'\"'===e[e.length-1]&&(e=d(e.substring(1,e.length-1)),t=!0);e.length>1&&\"'\"===e[0]&&\"'\"===e[e.length-1]&&(e=d(e.substring(1,e.length-1)),t=!0);return{matcher:t?(0,c.createStrictTextMatcher)(e):(0,c.createLaxTextMatcher)(e),kind:t?\"strict\":\"lax\"}}(n),i=[];let s=null;const u=e=>{if(\"lax\"===o&&s&&s.contains(e))return!1;const t=(0,c.elementMatchesText)(this._evaluator,e,r);\"none\"===t&&(s=e),(\"self\"===t||\"selfAndChildren\"===t&&\"strict\"===o)&&i.push(e)};t.nodeType===Node.ELEMENT_NODE&&u(t);const a=this._evaluator._queryCSS({scope:t,pierceShadow:e},\"*\");for(const e of a)u(e);return i};return{queryAll:(e,n)=>t(e,n)}}extend(t,n){return new(e.eval(`\\n    (() => {\\n      ${t}\\n      return pwExport;\\n    })()`))(this,n)}isVisible(e){return(0,c.isVisible)(e)}pollRaf(e){return this._runAbortableTask(t=>{let n,r;const o=new Promise((e,t)=>{n=e,r=t}),i=()=>{if(!t.aborted)try{const r=Symbol(\"continuePolling\"),o=e(t,r);o!==r?n(o):requestAnimationFrame(i)}catch(e){t.log(\"  \"+e.message),r(e)}};return i(),o})}pollInterval(e,t){return this._runAbortableTask(n=>{let r,o;const i=new Promise((e,t)=>{r=e,o=t}),s=()=>{if(!n.aborted)try{const o=Symbol(\"continuePolling\"),i=t(n,o);i!==o?r(i):setTimeout(s,e)}catch(e){o(e)}};return s(),i})}_runAbortableTask(e){let t,n=[],r=!1;const o=()=>{t&&(t(n),n=[],t=void 0)};let i=\"\";const s={aborted:!1,log:e=>{i=e,n.push(e),o()},logRepeating:e=>{e!==i&&s.log(e)}};return{takeNextLogs:()=>new Promise(e=>{t=e,(n.length||r)&&o()}),run:()=>{const t=e(s);return t.finally(()=>{r=!0,o()}),t},cancel:()=>{s.aborted=!0},takeLastLogs:()=>n}}getElementBorderWidth(e){if(e.nodeType!==Node.ELEMENT_NODE||!e.ownerDocument||!e.ownerDocument.defaultView)return{left:0,top:0};const t=e.ownerDocument.defaultView.getComputedStyle(e);return{left:parseInt(t.borderLeftWidth||\"\",10),top:parseInt(t.borderTopWidth||\"\",10)}}retarget(e,t){let n=e.nodeType===Node.ELEMENT_NODE?e:e.parentElement;return n?(n.matches(\"input, textarea, select\")||(n=n.closest(\"button, [role=button], [role=checkbox], [role=radio]\")||n),\"follow-label\"===t&&(n.matches(\"input, textarea, button, select, [role=button], [role=checkbox], [role=radio]\")||n.isContentEditable||(n=n.closest(\"label\")||n),\"LABEL\"===n.nodeName&&(n=n.control||n)),n):null}waitForElementStatesAndPerformAction(e,t,n,r){let o,i=0,s=0,c=0;const u=(u,a)=>{if(n)return u.log(\"    forcing action\"),r(e,u,a);for(const n of t){if(\"stable\"!==n){const t=this.checkElementState(e,n);if(\"boolean\"!=typeof t)return t;if(!t)return u.logRepeating(`    element is not ${n} - waiting...`),a;continue}const t=this.retarget(e,\"no-follow-label\");if(!t)return\"error:notconnected\";if(1==++i)return a;const r=performance.now();if(this._stableRafCount>1&&r-c<15)return a;c=r;const l=t.getBoundingClientRect(),p={x:l.top,y:l.left,width:l.width,height:l.height};o&&p.x===o.x&&p.y===o.y&&p.width===o.width&&p.height===o.height?++s:s=0;const h=s>=this._stableRafCount,f=h||!o;if(o=p,f||u.logRepeating(\"    element is not stable - waiting...\"),!h)return a}return r(e,u,a)};return this._replaceRafWithTimeout?this.pollInterval(16,u):this.pollRaf(u)}checkElementState(e,t){const n=this.retarget(e,[\"stable\",\"visible\",\"hidden\"].includes(t)?\"no-follow-label\":\"follow-label\");if(!n||!n.isConnected)return\"hidden\"===t||\"error:notconnected\";if(\"visible\"===t)return this.isVisible(n);if(\"hidden\"===t)return!this.isVisible(n);const r=[\"BUTTON\",\"INPUT\",\"SELECT\",\"TEXTAREA\"].includes(n.nodeName)&&n.hasAttribute(\"disabled\");if(\"disabled\"===t)return r;if(\"enabled\"===t)return!r;const o=!([\"INPUT\",\"TEXTAREA\",\"SELECT\"].includes(n.nodeName)&&n.hasAttribute(\"readonly\"));if(\"editable\"===t)return!r&&o;if(\"checked\"===t)return\"checkbox\"===n.getAttribute(\"role\")?\"true\"===n.getAttribute(\"aria-checked\"):\"INPUT\"!==n.nodeName?\"error:notcheckbox\":[\"radio\",\"checkbox\"].includes(n.type.toLowerCase())?n.checked:\"error:notcheckbox\";throw new Error(`Unexpected element state \"${t}\"`)}selectOptions(e,t,n,r){const o=this.retarget(t,\"follow-label\");if(!o)return\"error:notconnected\";if(\"select\"!==o.nodeName.toLowerCase())return\"error:notselect\";const i=o,s=[...i.options],c=[];let u=e.slice();for(let e=0;e<s.length;e++){const t=s[e],n=n=>{if(n instanceof Node)return t===n;let r=!0;return void 0!==n.value&&(r=r&&n.value===t.value),void 0!==n.label&&(r=r&&n.label===t.label),void 0!==n.index&&(r=r&&n.index===e),r};if(u.some(n)){if(c.push(t),!i.multiple){u=[];break}u=u.filter(e=>!n(e))}}return u.length?(n.logRepeating(\"    did not find some options - waiting... \"),r):(i.value=void 0,c.forEach(e=>e.selected=!0),n.log(\"    selected specified option(s)\"),i.dispatchEvent(new Event(\"input\",{bubbles:!0})),i.dispatchEvent(new Event(\"change\",{bubbles:!0})),c.map(e=>e.value))}fill(e,t,n){const r=this.retarget(t,\"follow-label\");if(!r)return\"error:notconnected\";if(\"input\"===r.nodeName.toLowerCase()){const t=r,o=t.type.toLowerCase(),i=new Set([\"date\",\"time\",\"datetime\",\"datetime-local\",\"month\",\"week\"]);if(!new Set([\"\",\"email\",\"number\",\"password\",\"search\",\"tel\",\"text\",\"url\"]).has(o)&&!i.has(o))return n.log(`    input of type \"${o}\" cannot be filled`),\"error:notfillableinputtype\";if(\"number\"===o&&(e=e.trim(),isNaN(Number(e))))return\"error:notfillablenumberinput\";if(i.has(o))return e=e.trim(),t.focus(),t.value=e,t.value!==e?\"error:notvaliddate\":(r.dispatchEvent(new Event(\"input\",{bubbles:!0})),r.dispatchEvent(new Event(\"change\",{bubbles:!0})),\"done\")}else if(\"textarea\"===r.nodeName.toLowerCase());else if(!r.isContentEditable)return\"error:notfillableelement\";return this.selectText(r),\"needsinput\"}selectText(e){const t=this.retarget(e,\"follow-label\");if(!t)return\"error:notconnected\";if(\"input\"===t.nodeName.toLowerCase()){const e=t;return e.select(),e.focus(),\"done\"}if(\"textarea\"===t.nodeName.toLowerCase()){const e=t;return e.selectionStart=0,e.selectionEnd=e.value.length,e.focus(),\"done\"}const n=t.ownerDocument.createRange();n.selectNodeContents(t);const r=t.ownerDocument.defaultView.getSelection();return r&&(r.removeAllRanges(),r.addRange(n)),t.focus(),\"done\"}focusNode(e,t){if(!e.isConnected)return\"error:notconnected\";if(e.nodeType!==Node.ELEMENT_NODE)return\"error:notelement\";const n=e.getRootNode().activeElement===e&&e.ownerDocument&&e.ownerDocument.hasFocus();if(e.focus(),t&&!n&&\"input\"===e.nodeName.toLowerCase())try{e.setSelectionRange(0,0)}catch(e){}return\"done\"}setInputFiles(e,t){if(e.nodeType!==Node.ELEMENT_NODE)return\"Node is not of type HTMLElement\";const n=e;if(\"INPUT\"!==n.nodeName)return\"Not an <input> element\";const r=n;if(\"file\"!==(r.getAttribute(\"type\")||\"\").toLowerCase())return\"Not an input[type=file] element\";const o=t.map(e=>{const t=Uint8Array.from(atob(e.buffer),e=>e.charCodeAt(0));return new File([t],e.name,{type:e.mimeType})}),i=new DataTransfer;for(const e of o)i.items.add(e);r.files=i.files,r.dispatchEvent(new Event(\"input\",{bubbles:!0})),r.dispatchEvent(new Event(\"change\",{bubbles:!0}))}checkHitTargetAt(e,t){let n=e.nodeType===Node.ELEMENT_NODE?e:e.parentElement;if(!n||!n.isConnected)return\"error:notconnected\";n=n.closest(\"button, [role=button]\")||n;let r=this.deepElementFromPoint(document,t.x,t.y);const o=[];for(;r&&r!==n;)o.push(r),r=(0,c.parentElementOrShadowHost)(r);if(r===n)return\"done\";const i=this.previewNode(o[0]);let s;for(;n;){const e=o.indexOf(n);if(-1!==e){e>1&&(s=this.previewNode(o[e-1]));break}n=(0,c.parentElementOrShadowHost)(n)}return s?{hitTargetDescription:`${i} from ${s} subtree`}:{hitTargetDescription:i}}dispatchEvent(e,t,n){let r;switch(n={bubbles:!0,cancelable:!0,composed:!0,...n},f.get(t)){case\"mouse\":r=new MouseEvent(t,n);break;case\"keyboard\":r=new KeyboardEvent(t,n);break;case\"touch\":r=new TouchEvent(t,n);break;case\"pointer\":r=new PointerEvent(t,n);break;case\"focus\":r=new FocusEvent(t,n);break;case\"drag\":r=new DragEvent(t,n);break;default:r=new Event(t,n)}e.dispatchEvent(r)}deepElementFromPoint(e,t,n){let r,o=e;for(;o;){const e=o.elementsFromPoint(t,n)[0];if(!e||r===e)break;r=e,o=r.shadowRoot}return r}previewNode(e){if(e.nodeType===Node.TEXT_NODE)return h(\"#text=\"+(e.nodeValue||\"\"));if(e.nodeType!==Node.ELEMENT_NODE)return h(`<${e.nodeName.toLowerCase()} />`);const t=e,n=[];for(let e=0;e<t.attributes.length;e++){const{name:r,value:o}=t.attributes[e];\"style\"!==r&&(!o&&p.has(r)?n.push(\" \"+r):n.push(` ${r}=\"${o}\"`))}n.sort((e,t)=>e.length-t.length);let r=n.join(\"\");if(r.length>50&&(r=r.substring(0,49)+\"…\"),l.has(t.nodeName))return h(`<${t.nodeName.toLowerCase()}${r}/>`);const o=t.childNodes;let i=!1;if(o.length<=5){i=!0;for(let e=0;e<o.length;e++)i=i&&o[e].nodeType===Node.TEXT_NODE}let s=i?t.textContent||\"\":o.length?\"…\":\"\";return s.length>50&&(s=s.substring(0,49)+\"…\"),h(`<${t.nodeName.toLowerCase()}${r}>${s}</${t.nodeName.toLowerCase()}>`)}}t.InjectedScript=a;const l=new Set([\"AREA\",\"BASE\",\"BR\",\"COL\",\"COMMAND\",\"EMBED\",\"HR\",\"IMG\",\"INPUT\",\"KEYGEN\",\"LINK\",\"MENUITEM\",\"META\",\"PARAM\",\"SOURCE\",\"TRACK\",\"WBR\"]),p=new Set([\"checked\",\"selected\",\"disabled\",\"readonly\",\"multiple\"]);function h(e){return e.replace(/\\n/g,\"↵\").replace(/\\t/g,\"⇆\")}const f=new Map([[\"auxclick\",\"mouse\"],[\"click\",\"mouse\"],[\"dblclick\",\"mouse\"],[\"mousedown\",\"mouse\"],[\"mouseeenter\",\"mouse\"],[\"mouseleave\",\"mouse\"],[\"mousemove\",\"mouse\"],[\"mouseout\",\"mouse\"],[\"mouseover\",\"mouse\"],[\"mouseup\",\"mouse\"],[\"mouseleave\",\"mouse\"],[\"mousewheel\",\"mouse\"],[\"keydown\",\"keyboard\"],[\"keyup\",\"keyboard\"],[\"keypress\",\"keyboard\"],[\"textInput\",\"keyboard\"],[\"touchstart\",\"touch\"],[\"touchmove\",\"touch\"],[\"touchend\",\"touch\"],[\"touchcancel\",\"touch\"],[\"pointerover\",\"pointer\"],[\"pointerout\",\"pointer\"],[\"pointerenter\",\"pointer\"],[\"pointerleave\",\"pointer\"],[\"pointerdown\",\"pointer\"],[\"pointerup\",\"pointer\"],[\"pointermove\",\"pointer\"],[\"pointercancel\",\"pointer\"],[\"gotpointercapture\",\"pointer\"],[\"lostpointercapture\",\"pointer\"],[\"focus\",\"focus\"],[\"blur\",\"focus\"],[\"drag\",\"drag\"],[\"dragstart\",\"drag\"],[\"dragend\",\"drag\"],[\"dragover\",\"drag\"],[\"dragenter\",\"drag\"],[\"dragleave\",\"drag\"],[\"dragexit\",\"drag\"],[\"drop\",\"drag\"]]);function d(e){if(!e.includes(\"\\\\\"))return e;const t=[];let n=0;for(;n<e.length;)\"\\\\\"===e[n]&&n+1<e.length&&n++,t.push(e[n++]);return t.join(\"\")}var m=a;t.default=m}).call(this,n(4))},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.XPathEngine=void 0;const r={queryAll(e,t){t.startsWith(\"/\")&&(t=\".\"+t);const n=[],r=e instanceof Document?e:e.ownerDocument;if(!r)return n;const o=r.evaluate(t,e,null,XPathResult.ORDERED_NODE_ITERATOR_TYPE);for(let e=o.iterateNext();e;e=o.iterateNext())e.nodeType===Node.ELEMENT_NODE&&n.push(e);return n}};t.XPathEngine=r},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.ReactEngine=void 0;var r=n(6);function o(e){if(\"function\"==typeof e.type)return e.type.displayName||e.type.name||\"Anonymous\";if(\"string\"==typeof e.type)return e.type;if(e._currentElement){const t=e._currentElement.type;if(\"string\"==typeof t)return t;if(\"function\"==typeof t)return t.displayName||t.name||\"Anonymous\"}return\"\"}function i(e){if(e.child){const t=[];for(let n=e.child;n;n=n.sibling)t.push(n);return t}if(!e._currentElement)return[];const t=e=>{var t;const n=null===(t=e._currentElement)||void 0===t?void 0:t.type;return\"function\"==typeof n||\"string\"==typeof n};if(e._renderedComponent){const n=e._renderedComponent;return t(n)?[n]:[]}return e._renderedChildren?[...Object.values(e._renderedChildren)].filter(t):[]}function s(e){var t;const n=e.memoizedProps||(null===(t=e._currentElement)||void 0===t?void 0:t.props);if(!n||\"string\"==typeof n)return n;const r={...n};return delete r.children,r}function c(e){var t;const n={name:o(e),children:i(e).map(c),rootElements:[],props:s(e)},r=e.stateNode||e._hostNode||(null===(t=e._renderedComponent)||void 0===t?void 0:t._hostNode);if(r instanceof Element)n.rootElements.push(r);else for(const e of n.children)n.rootElements.push(...e.rootElements);return n}const u={queryAll(e,t){const{name:n,attributes:o}=(0,r.parseComponentSelector)(t),i=function(){const e=document.createTreeWalker(document);for(;e.nextNode();){if(e.currentNode.hasOwnProperty(\"_reactRootContainer\"))return e.currentNode._reactRootContainer._internalRoot.current;for(const t of Object.keys(e.currentNode))if(t.startsWith(\"__reactInternalInstance\")||t.startsWith(\"__reactFiber\"))return e.currentNode[t]}}();if(!i)return[];const s=function e(t,n,r=[]){n(t)&&r.push(t);for(const o of t.children)e(o,n,r);return r}(c(i),t=>{if(n&&t.name!==n)return!1;if(t.rootElements.some(t=>!e.contains(t)))return!1;for(const e of o)if(!(0,r.checkComponentAttribute)(t.props,e))return!1;return!0}),u=new Set;for(const e of s)for(const t of e.rootElements)u.add(t);return[...u]}};t.ReactEngine=u},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.VueEngine=void 0;var r=n(6);function o(e,t){const n=e.replace(/^[a-zA-Z]:/,\"\").replace(/\\\\/g,\"/\");let r=n.substring(n.lastIndexOf(\"/\")+1);return t&&r.endsWith(t)&&(r=r.substring(0,r.length-t.length)),r}function i(e,t){return t?t.toUpperCase():\"\"}const s=/(?:^|[-_/])(\\w)/g,c=e=>e&&e.replace(s,i);function u(e){function t(e,t){return e.type.__playwright_guessedName=t,t}function n(e){const n=function(e){const t=e.name||e._componentTag||e.__playwright_guessedName;if(t)return t;const n=e.__file;return n?c(o(n,\".vue\")):void 0}(e.type||{});if(n)return n;if(e.root===e)return\"Root\";for(const n in null===(r=e.parent)||void 0===r||null===(i=r.type)||void 0===i?void 0:i.components){var r,i,s;if((null===(s=e.parent)||void 0===s?void 0:s.type.components[n])===e.type)return t(e,n)}for(const n in null===(u=e.appContext)||void 0===u?void 0:u.components){var u;if(e.appContext.components[n]===e.type)return t(e,n)}return\"Anonymous Component\"}function r(e){const t=[];return e.component&&t.push(e.component),e.suspense&&t.push(...r(e.suspense.activeBranch)),Array.isArray(e.children)&&e.children.forEach(e=>{e.component?t.push(e.component):t.push(...r(e))}),t.filter(e=>{var t;return!(function(e){return e._isBeingDestroyed||e.isUnmounted}(e)||null!==(t=e.type.devtools)&&void 0!==t&&t.hide)})}function i(e){return function(e){return\"Symbol(Fragment)\"===e.subTree.type.toString()}(e)?function(e){if(!e.children)return[];const t=[];for(let n=0,r=e.children.length;n<r;n++){const r=e.children[n];r.component?t.push(...i(r.component)):r.el&&t.push(r.el)}return t}(e.subTree):[e.subTree.el]}return function e(t){return{name:n(t),children:r(t.subTree).map(e),rootElements:i(t),props:t.props}}(e)}function a(e){function t(e){const t=function(e){const t=e.displayName||e.name||e._componentTag;if(t)return t;const n=e.__file;return n?c(o(n,\".vue\")):void 0}(e.$options||e.fnOptions||{});return t||(e.$root===e?\"Root\":\"Anonymous Component\")}function n(e){return e.$children?e.$children:Array.isArray(e.subTree.children)?e.subTree.children.filter(e=>!!e.component).map(e=>e.component):[]}return function e(r){return{name:t(r),children:n(r).map(e),rootElements:[r.$el],props:r._props}}(e)}const l={queryAll(e,t){const{name:n,attributes:o}=(0,r.parseComponentSelector)(t),i=function(){const e=document.createTreeWalker(document);for(;e.nextNode();){if(e.currentNode._vnode&&e.currentNode._vnode.component)return{root:e.currentNode._vnode.component,version:3};if(e.currentNode.__vue__)return{root:e.currentNode.__vue__,version:2}}}();if(!i)return[];const s=function e(t,n,r=[]){n(t)&&r.push(t);for(const o of t.children)e(o,n,r);return r}(3===i.version?u(i.root):a(i.root),t=>{if(n&&t.name!==n)return!1;if(t.rootElements.some(t=>!e.contains(t)))return!1;for(const e of o)if(!(0,r.checkComponentAttribute)(t.props,e))return!1;return!0}),c=new Set;for(const e of s)for(const t of e.rootElements)c.add(t);return[...c]}};t.VueEngine=l}]).default;";
 exports.source = source;
\ No newline at end of file
diff --git a/node_modules/playwright/lib/protocol/validator.js b/node_modules/playwright/lib/protocol/validator.js
index cdfc29f..79c6967 100644
--- a/node_modules/playwright/lib/protocol/validator.js
+++ b/node_modules/playwright/lib/protocol/validator.js
@@ -264,10 +264,12 @@ function createScheme(tChannel) {
       omitContent: (0, _validatorPrimitives.tOptional)(_validatorPrimitives.tBoolean),
       path: _validatorPrimitives.tString
     })),
+    strictSelectors: (0, _validatorPrimitives.tOptional)(_validatorPrimitives.tBoolean),
     userDataDir: _validatorPrimitives.tString,
     slowMo: (0, _validatorPrimitives.tOptional)(_validatorPrimitives.tNumber)
   });
   scheme.BrowserTypeConnectOverCDPParams = (0, _validatorPrimitives.tObject)({
+    customBrowserName: (0, _validatorPrimitives.tOptional)(_validatorPrimitives.tString),
     sdkLanguage: _validatorPrimitives.tString,
     endpointURL: _validatorPrimitives.tString,
     headers: (0, _validatorPrimitives.tOptional)((0, _validatorPrimitives.tArray)(tType('NameValue'))),
@@ -324,6 +326,7 @@ function createScheme(tChannel) {
       omitContent: (0, _validatorPrimitives.tOptional)(_validatorPrimitives.tBoolean),
       path: _validatorPrimitives.tString
     })),
+    strictSelectors: (0, _validatorPrimitives.tOptional)(_validatorPrimitives.tBoolean),
     proxy: (0, _validatorPrimitives.tOptional)((0, _validatorPrimitives.tObject)({
       server: _validatorPrimitives.tString,
       bypass: (0, _validatorPrimitives.tOptional)(_validatorPrimitives.tString),
@@ -1102,6 +1105,7 @@ function createScheme(tChannel) {
         height: _validatorPrimitives.tNumber
       }))
     })),
+    strictSelectors: (0, _validatorPrimitives.tOptional)(_validatorPrimitives.tBoolean),
     timezoneId: (0, _validatorPrimitives.tOptional)(_validatorPrimitives.tString)
   });
   scheme.ElectronApplicationBrowserWindowParams = (0, _validatorPrimitives.tObject)({
@@ -1244,6 +1248,7 @@ function createScheme(tChannel) {
       omitContent: (0, _validatorPrimitives.tOptional)(_validatorPrimitives.tBoolean),
       path: _validatorPrimitives.tString
     })),
+    strictSelectors: (0, _validatorPrimitives.tOptional)(_validatorPrimitives.tBoolean),
     proxy: (0, _validatorPrimitives.tOptional)((0, _validatorPrimitives.tObject)({
       server: _validatorPrimitives.tString,
       bypass: (0, _validatorPrimitives.tOptional)(_validatorPrimitives.tString),
diff --git a/node_modules/playwright/lib/server/chromium/chromium.js b/node_modules/playwright/lib/server/chromium/chromium.js
index 1990f7a..56d105b 100644
--- a/node_modules/playwright/lib/server/chromium/chromium.js
+++ b/node_modules/playwright/lib/server/chromium/chromium.js
@@ -39,6 +39,8 @@ var _registry = require("../../utils/registry");
 
 function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }
 
+/* eslint-disable no-console */
+
 /**
  * Copyright 2017 Google Inc. All rights reserved.
  * Modifications copyright (c) Microsoft Corporation.
@@ -65,6 +67,7 @@ class Chromium extends _browserType.BrowserType {
   }
 
   async connectOverCDP(metadata, endpointURL, options, timeout) {
+    console.log('Connecting over cdp', options);
     const controller = new _progress.ProgressController(metadata, this);
     controller.setLogName('browser');
     const browserLogsCollector = new _debugLogger.RecentLogsCollector();
@@ -85,7 +88,7 @@ class Chromium extends _browserType.BrowserType {
       };
       const browserOptions = { ...this._playwrightOptions,
         slowMo: options.slowMo,
-        name: 'chromium',
+        name: options.customBrowserName || 'chromium',
         isChromium: true,
         persistent: {
           sdkLanguage: options.sdkLanguage,
diff --git a/node_modules/playwright/lib/server/chromium/crBrowser.js b/node_modules/playwright/lib/server/chromium/crBrowser.js
index b7d96c2..694a1f1 100644
--- a/node_modules/playwright/lib/server/chromium/crBrowser.js
+++ b/node_modules/playwright/lib/server/chromium/crBrowser.js
@@ -189,7 +189,7 @@ class CRBrowser extends _browser.Browser {
       return;
     }
 
-    if (targetInfo.type === 'page') {
+    if (targetInfo.type === 'page' || targetInfo.type === 'webview') {
       const opener = targetInfo.openerId ? this._crPages.get(targetInfo.openerId) || null : null;
       const crPage = new _crPage.CRPage(session, targetInfo.targetId, context, opener, true, false);
 
@@ -346,7 +346,7 @@ class CRBrowserContext extends _browserContext.BrowserContext {
     (0, _utils.assert)(!Array.from(this._browser._crPages.values()).some(page => page._browserContext === this));
     const promises = [super._initialize()];
 
-    if (this._browser.options.name !== 'electron' && this._browser.options.name !== 'clank') {
+    if (this._browser.options.name !== 'electron' && this._browser.options.name !== 'electron-webview' && this._browser.options.name !== 'clank') {
       promises.push(this._browser._session.send('Browser.setDownloadBehavior', {
         behavior: this._options.acceptDownloads ? 'allowAndName' : 'deny',
         browserContextId: this._browserContextId,
diff --git a/node_modules/playwright/lib/server/chromium/videoRecorder.js b/node_modules/playwright/lib/server/chromium/videoRecorder.js
index 3d26ef6..465f614 100644
--- a/node_modules/playwright/lib/server/chromium/videoRecorder.js
+++ b/node_modules/playwright/lib/server/chromium/videoRecorder.js
@@ -5,16 +5,20 @@ Object.defineProperty(exports, "__esModule", {
 });
 exports.VideoRecorder = void 0;
 
+var _stream = require("stream");
+
+var _fs = _interopRequireDefault(require("fs"));
+
 var _utils = require("../../utils/utils");
 
 var _page = require("../page");
 
-var _processLauncher = require("../../utils/processLauncher");
-
 var _progress = require("../progress");
 
 var _instrumentation = require("../instrumentation");
 
+function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }
+
 /**
  * Copyright (c) Microsoft Corporation.
  *
@@ -55,6 +59,7 @@ class VideoRecorder {
     this._frameQueue = [];
     this._isStopped = false;
     this._ffmpegPath = void 0;
+    this._stream = new _stream.PassThrough();
     this._progress = progress;
     this._ffmpegPath = ffmpegPath;
     page.on(_page.Page.Events.ScreencastFrame, frame => this.writeFrame(frame.buffer, frame.timestamp));
@@ -91,38 +96,24 @@ class VideoRecorder {
     // "-an" means no audio.
     const w = options.width;
     const h = options.height;
-    const args = `-loglevel error -f image2pipe -c:v mjpeg -i - -y -an -r ${fps} -c:v vp8 -qmin 0 -qmax 50 -crf 8 -deadline realtime -b:v 1M -vf pad=${w}:${h}:0:0:gray,crop=${w}:${h}:0:0`.split(' ');
-    args.push(options.outputFile);
     const progress = this._progress;
-    const {
-      launchedProcess,
-      gracefullyClose
-    } = await (0, _processLauncher.launchProcess)({
-      command: this._ffmpegPath,
-      args,
-      stdio: 'stdin',
-      log: message => progress.log(message),
-      tempDirectories: [],
-      attemptToGracefullyClose: async () => {
-        progress.log('Closing stdin...');
-        launchedProcess.stdin.end();
-      },
-      onExit: (exitCode, signal) => {
-        progress.log(`ffmpeg onkill exitCode=${exitCode} signal=${signal}`);
+
+    const writeStream = _fs.default.createWriteStream(options.outputFile);
+
+    this._stream.pipe(writeStream);
+
+    this._stream.on('error', e => {
+      progress.log(`video error`); // do not reject as a result of not having frames
+
+      if (!this._lastFrameBuffer && e.message.includes('pipe:0: End of file')) {
+        return;
       }
+
+      progress.log(`pw-video: error capturing video: ${e.message}`);
     });
-    launchedProcess.stdin.on('finish', () => {
-      progress.log('ffmpeg finished input.');
-    });
-    launchedProcess.stdin.on('error', () => {
-      progress.log('ffmpeg error.');
-    });
-    this._process = launchedProcess;
-    this._gracefullyClose = gracefullyClose;
   }
 
   writeFrame(frame, timestamp) {
-    (0, _utils.assert)(this._process);
     if (this._isStopped) return;
 
     this._progress.log(`writing frame ` + timestamp);
@@ -146,9 +137,7 @@ class VideoRecorder {
   }
 
   async _sendFrame(frame) {
-    return new Promise(f => this._process.stdin.write(frame, f)).then(error => {
-      if (error) this._progress.log(`ffmpeg failed to write: ${error}`);
-    });
+    return this._stream.write(frame);
   }
 
   async stop() {
@@ -156,7 +145,7 @@ class VideoRecorder {
     this.writeFrame(Buffer.from([]), this._lastFrameTimestamp + ((0, _utils.monotonicTime)() - this._lastWriteTimestamp) / 1000);
     this._isStopped = true;
     await this._lastWritePromise;
-    await this._gracefullyClose();
+    await this._stream.end();
   }
 
 }
diff --git a/node_modules/playwright/lib/server/deviceDescriptorsSource.json b/node_modules/playwright/lib/server/deviceDescriptorsSource.json
index 0d142f9..5242d30 100644
--- a/node_modules/playwright/lib/server/deviceDescriptorsSource.json
+++ b/node_modules/playwright/lib/server/deviceDescriptorsSource.json
@@ -1216,7 +1216,7 @@
     "hasTouch": false,
     "defaultBrowserType": "chromium"
   },
-  "Dekstop Edge": {
+  "Desktop Edge": {
     "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/94.0.4595.0 Safari/537.36 Edg/94.0.4595.0",
     "screen": {
       "width": 1920,
diff --git a/node_modules/playwright/lib/server/dom.js b/node_modules/playwright/lib/server/dom.js
index 458179b..d06e748 100644
--- a/node_modules/playwright/lib/server/dom.js
+++ b/node_modules/playwright/lib/server/dom.js
@@ -737,7 +737,7 @@ class ElementHandle extends js.JSHandle {
   }
 
   async querySelector(selector, options) {
-    return this._page.selectors._query(this._context.frame, selector, !!options.strict, this);
+    return this._page.selectors.query(this._context.frame, selector, options, this);
   }
 
   async querySelectorAll(selector) {
@@ -747,7 +747,9 @@ class ElementHandle extends js.JSHandle {
   }
 
   async evalOnSelectorAndWaitForSignals(selector, strict, expression, isFunction, arg) {
-    const handle = await this._page.selectors._query(this._context.frame, selector, strict, this);
+    const handle = await this._page.selectors.query(this._context.frame, selector, {
+      strict
+    }, this);
     if (!handle) throw new Error(`Error: failed to find element matching selector "${selector}"`);
     const result = await handle.evaluateExpressionAndWaitForSignals(expression, isFunction, true, arg);
     handle.dispose();
@@ -810,7 +812,7 @@ class ElementHandle extends js.JSHandle {
     } = options;
     if (!['attached', 'detached', 'visible', 'hidden'].includes(state)) throw new Error(`state: expected one of (attached|detached|visible|hidden)`);
 
-    const info = this._page.selectors._parseSelector(selector, !!options.strict);
+    const info = this._page.parseSelector(selector, options);
 
     const task = waitForSelectorTask(info, state, this);
     const controller = new _progress.ProgressController(metadata, this);
diff --git a/node_modules/playwright/lib/server/frames.js b/node_modules/playwright/lib/server/frames.js
index 22b638c..794ba9e 100644
--- a/node_modules/playwright/lib/server/frames.js
+++ b/node_modules/playwright/lib/server/frames.js
@@ -716,7 +716,7 @@ class Frame extends _instrumentation.SdkObject {
   async querySelector(selector, options) {
     _debugLogger.debugLogger.log('api', `    finding element using the selector "${selector}"`);
 
-    return this._page.selectors._query(this, selector, !!options.strict);
+    return this._page.selectors.query(this, selector, options);
   }
 
   async waitForSelector(metadata, selector, options = {}) {
@@ -728,7 +728,7 @@ class Frame extends _instrumentation.SdkObject {
     } = options;
     if (!['attached', 'detached', 'visible', 'hidden'].includes(state)) throw new Error(`state: expected one of (attached|detached|visible|hidden)`);
 
-    const info = this._page.selectors._parseSelector(selector, !!options.strict);
+    const info = this._page.parseSelector(selector, options);
 
     const task = dom.waitForSelectorTask(info, state);
     return controller.run(async progress => {
@@ -762,7 +762,7 @@ class Frame extends _instrumentation.SdkObject {
   async dispatchEvent(metadata, selector, type, eventInit, options = {}) {
     const controller = new _progress.ProgressController(metadata, this);
 
-    const info = this._page.selectors._parseSelector(selector, !!options.strict);
+    const info = this._page.parseSelector(selector, options);
 
     const task = dom.dispatchEventTask(info, type, eventInit || {});
     await controller.run(async progress => {
@@ -978,7 +978,9 @@ class Frame extends _instrumentation.SdkObject {
   }
 
   async _retryWithProgressIfNotConnected(progress, selector, strict, action) {
-    const info = this._page.selectors._parseSelector(selector, strict);
+    const info = this._page.parseSelector(selector, {
+      strict
+    });
 
     while (progress.isRunning()) {
       progress.log(`waiting for selector "${selector}"`);
@@ -1006,28 +1008,28 @@ class Frame extends _instrumentation.SdkObject {
 
   async _retryWithSelectorIfNotConnected(controller, selector, options, action) {
     return controller.run(async progress => {
-      return this._retryWithProgressIfNotConnected(progress, selector, !!options.strict, handle => action(progress, handle));
+      return this._retryWithProgressIfNotConnected(progress, selector, options.strict, handle => action(progress, handle));
     }, this._page._timeoutSettings.timeout(options));
   }
 
   async click(metadata, selector, options) {
     const controller = new _progress.ProgressController(metadata, this);
     return controller.run(async progress => {
-      return dom.assertDone(await this._retryWithProgressIfNotConnected(progress, selector, !!options.strict, handle => handle._click(progress, options)));
+      return dom.assertDone(await this._retryWithProgressIfNotConnected(progress, selector, options.strict, handle => handle._click(progress, options)));
     }, this._page._timeoutSettings.timeout(options));
   }
 
   async dblclick(metadata, selector, options = {}) {
     const controller = new _progress.ProgressController(metadata, this);
     return controller.run(async progress => {
-      return dom.assertDone(await this._retryWithProgressIfNotConnected(progress, selector, !!options.strict, handle => handle._dblclick(progress, options)));
+      return dom.assertDone(await this._retryWithProgressIfNotConnected(progress, selector, options.strict, handle => handle._dblclick(progress, options)));
     }, this._page._timeoutSettings.timeout(options));
   }
 
   async dragAndDrop(metadata, source, target, options = {}) {
     const controller = new _progress.ProgressController(metadata, this);
     await controller.run(async progress => {
-      await dom.assertDone(await this._retryWithProgressIfNotConnected(progress, source, !!options.strict, async handle => {
+      await dom.assertDone(await this._retryWithProgressIfNotConnected(progress, source, options.strict, async handle => {
         return handle._retryPointerAction(progress, 'move and down', false, async point => {
           await this._page.mouse.move(point.x, point.y);
           await this._page.mouse.down();
@@ -1036,7 +1038,7 @@ class Frame extends _instrumentation.SdkObject {
           timeout: progress.timeUntilDeadline()
         });
       }));
-      await dom.assertDone(await this._retryWithProgressIfNotConnected(progress, target, !!options.strict, async handle => {
+      await dom.assertDone(await this._retryWithProgressIfNotConnected(progress, target, options.strict, async handle => {
         return handle._retryPointerAction(progress, 'move and up', false, async point => {
           await this._page.mouse.move(point.x, point.y);
           await this._page.mouse.up();
@@ -1051,14 +1053,14 @@ class Frame extends _instrumentation.SdkObject {
   async tap(metadata, selector, options) {
     const controller = new _progress.ProgressController(metadata, this);
     return controller.run(async progress => {
-      return dom.assertDone(await this._retryWithProgressIfNotConnected(progress, selector, !!options.strict, handle => handle._tap(progress, options)));
+      return dom.assertDone(await this._retryWithProgressIfNotConnected(progress, selector, options.strict, handle => handle._tap(progress, options)));
     }, this._page._timeoutSettings.timeout(options));
   }
 
   async fill(metadata, selector, value, options) {
     const controller = new _progress.ProgressController(metadata, this);
     return controller.run(async progress => {
-      return dom.assertDone(await this._retryWithProgressIfNotConnected(progress, selector, !!options.strict, handle => handle._fill(progress, value, options)));
+      return dom.assertDone(await this._retryWithProgressIfNotConnected(progress, selector, options.strict, handle => handle._fill(progress, value, options)));
     }, this._page._timeoutSettings.timeout(options));
   }
 
@@ -1071,7 +1073,7 @@ class Frame extends _instrumentation.SdkObject {
   async textContent(metadata, selector, options = {}) {
     const controller = new _progress.ProgressController(metadata, this);
 
-    const info = this._page.selectors._parseSelector(selector, !!options.strict);
+    const info = this._page.parseSelector(selector, options);
 
     const task = dom.textContentTask(info);
     return controller.run(async progress => {
@@ -1083,7 +1085,7 @@ class Frame extends _instrumentation.SdkObject {
   async innerText(metadata, selector, options = {}) {
     const controller = new _progress.ProgressController(metadata, this);
 
-    const info = this._page.selectors._parseSelector(selector, !!options.strict);
+    const info = this._page.parseSelector(selector, options);
 
     const task = dom.innerTextTask(info);
     return controller.run(async progress => {
@@ -1096,7 +1098,7 @@ class Frame extends _instrumentation.SdkObject {
   async innerHTML(metadata, selector, options = {}) {
     const controller = new _progress.ProgressController(metadata, this);
 
-    const info = this._page.selectors._parseSelector(selector, !!options.strict);
+    const info = this._page.parseSelector(selector, options);
 
     const task = dom.innerHTMLTask(info);
     return controller.run(async progress => {
@@ -1108,7 +1110,7 @@ class Frame extends _instrumentation.SdkObject {
   async getAttribute(metadata, selector, name, options = {}) {
     const controller = new _progress.ProgressController(metadata, this);
 
-    const info = this._page.selectors._parseSelector(selector, !!options.strict);
+    const info = this._page.parseSelector(selector, options);
 
     const task = dom.getAttributeTask(info, name);
     return controller.run(async progress => {
@@ -1120,7 +1122,7 @@ class Frame extends _instrumentation.SdkObject {
   async inputValue(metadata, selector, options = {}) {
     const controller = new _progress.ProgressController(metadata, this);
 
-    const info = this._page.selectors._parseSelector(selector, !!options.strict);
+    const info = this._page.parseSelector(selector, options);
 
     const task = dom.inputValueTask(info);
     return controller.run(async progress => {
@@ -1132,7 +1134,7 @@ class Frame extends _instrumentation.SdkObject {
   async _checkElementState(metadata, selector, state, options = {}) {
     const controller = new _progress.ProgressController(metadata, this);
 
-    const info = this._page.selectors._parseSelector(selector, !!options.strict);
+    const info = this._page.parseSelector(selector, options);
 
     const task = dom.elementStateTask(info, state);
     const result = await controller.run(async progress => {
@@ -1174,49 +1176,49 @@ class Frame extends _instrumentation.SdkObject {
   async hover(metadata, selector, options = {}) {
     const controller = new _progress.ProgressController(metadata, this);
     return controller.run(async progress => {
-      return dom.assertDone(await this._retryWithProgressIfNotConnected(progress, selector, !!options.strict, handle => handle._hover(progress, options)));
+      return dom.assertDone(await this._retryWithProgressIfNotConnected(progress, selector, options.strict, handle => handle._hover(progress, options)));
     }, this._page._timeoutSettings.timeout(options));
   }
 
   async selectOption(metadata, selector, elements, values, options = {}) {
     const controller = new _progress.ProgressController(metadata, this);
     return controller.run(async progress => {
-      return await this._retryWithProgressIfNotConnected(progress, selector, !!options.strict, handle => handle._selectOption(progress, elements, values, options));
+      return await this._retryWithProgressIfNotConnected(progress, selector, options.strict, handle => handle._selectOption(progress, elements, values, options));
     }, this._page._timeoutSettings.timeout(options));
   }
 
   async setInputFiles(metadata, selector, files, options = {}) {
     const controller = new _progress.ProgressController(metadata, this);
     return controller.run(async progress => {
-      return dom.assertDone(await this._retryWithProgressIfNotConnected(progress, selector, !!options.strict, handle => handle._setInputFiles(progress, files, options)));
+      return dom.assertDone(await this._retryWithProgressIfNotConnected(progress, selector, options.strict, handle => handle._setInputFiles(progress, files, options)));
     }, this._page._timeoutSettings.timeout(options));
   }
 
   async type(metadata, selector, text, options = {}) {
     const controller = new _progress.ProgressController(metadata, this);
     return controller.run(async progress => {
-      return dom.assertDone(await this._retryWithProgressIfNotConnected(progress, selector, !!options.strict, handle => handle._type(progress, text, options)));
+      return dom.assertDone(await this._retryWithProgressIfNotConnected(progress, selector, options.strict, handle => handle._type(progress, text, options)));
     }, this._page._timeoutSettings.timeout(options));
   }
 
   async press(metadata, selector, key, options = {}) {
     const controller = new _progress.ProgressController(metadata, this);
     return controller.run(async progress => {
-      return dom.assertDone(await this._retryWithProgressIfNotConnected(progress, selector, !!options.strict, handle => handle._press(progress, key, options)));
+      return dom.assertDone(await this._retryWithProgressIfNotConnected(progress, selector, options.strict, handle => handle._press(progress, key, options)));
     }, this._page._timeoutSettings.timeout(options));
   }
 
   async check(metadata, selector, options = {}) {
     const controller = new _progress.ProgressController(metadata, this);
     return controller.run(async progress => {
-      return dom.assertDone(await this._retryWithProgressIfNotConnected(progress, selector, !!options.strict, handle => handle._setChecked(progress, true, options)));
+      return dom.assertDone(await this._retryWithProgressIfNotConnected(progress, selector, options.strict, handle => handle._setChecked(progress, true, options)));
     }, this._page._timeoutSettings.timeout(options));
   }
 
   async uncheck(metadata, selector, options = {}) {
     const controller = new _progress.ProgressController(metadata, this);
     return controller.run(async progress => {
-      return dom.assertDone(await this._retryWithProgressIfNotConnected(progress, selector, !!options.strict, handle => handle._setChecked(progress, false, options)));
+      return dom.assertDone(await this._retryWithProgressIfNotConnected(progress, selector, options.strict, handle => handle._setChecked(progress, false, options)));
     }, this._page._timeoutSettings.timeout(options));
   }
 
diff --git a/node_modules/playwright/lib/server/injected/injectedScript.js b/node_modules/playwright/lib/server/injected/injectedScript.js
new file mode 100644
index 0000000..c8d162c
--- /dev/null
+++ b/node_modules/playwright/lib/server/injected/injectedScript.js
@@ -0,0 +1,949 @@
+"use strict";
+
+Object.defineProperty(exports, "__esModule", {
+  value: true
+});
+exports.default = exports.InjectedScript = exports.SelectorTypeEnum = void 0;
+
+var _xpathSelectorEngine = require("./xpathSelectorEngine");
+
+var _reactSelectorEngine = require("./reactSelectorEngine");
+
+var _vueSelectorEngine = require("./vueSelectorEngine");
+
+var _selectorParser = require("../common/selectorParser");
+
+var _selectorEvaluator = require("./selectorEvaluator");
+
+/**
+ * Copyright (c) Microsoft Corporation.
+ *
+ * Licensed under the Apache License, Version 2.0 (the "License");
+ * you may not use this file except in compliance with the License.
+ * You may obtain a copy of the License at
+ *
+ * http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS,
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ * See the License for the specific language governing permissions and
+ * limitations under the License.
+ */
+let SelectorTypeEnum;
+exports.SelectorTypeEnum = SelectorTypeEnum;
+
+(function (SelectorTypeEnum) {
+  SelectorTypeEnum["ID"] = "id";
+  SelectorTypeEnum["PLAYWRIGHT"] = "playwright";
+  SelectorTypeEnum["DATA_ATTRIBUTE"] = "dataAttribute";
+  SelectorTypeEnum["ATTRIBUTE"] = "attribute";
+  SelectorTypeEnum["INNER_VALUE"] = "innerValue";
+  SelectorTypeEnum["PNC"] = "PnC";
+  SelectorTypeEnum["XPATH"] = "xpath";
+})(SelectorTypeEnum || (exports.SelectorTypeEnum = SelectorTypeEnum = {}));
+
+class InjectedScript {
+  constructor(stableRafCount, replaceRafWithTimeout, customEngines) {
+    this._engines = void 0;
+    this._evaluator = void 0;
+    this._stableRafCount = void 0;
+    this._replaceRafWithTimeout = void 0;
+    this._evaluator = new _selectorEvaluator.SelectorEvaluatorImpl(new Map());
+    this._engines = new Map();
+
+    this._engines.set('xpath', _xpathSelectorEngine.XPathEngine);
+
+    this._engines.set('xpath:light', _xpathSelectorEngine.XPathEngine);
+
+    this._engines.set('_react', _reactSelectorEngine.ReactEngine);
+
+    this._engines.set('_vue', _vueSelectorEngine.VueEngine);
+
+    this._engines.set('crusher', this._createCrusherEngine(true));
+
+    this._engines.set('text', this._createTextEngine(true));
+
+    this._engines.set('text:light', this._createTextEngine(false));
+
+    this._engines.set('id', this._createAttributeEngine('id', true));
+
+    this._engines.set('id:light', this._createAttributeEngine('id', false));
+
+    this._engines.set('data-testid', this._createAttributeEngine('data-testid', true));
+
+    this._engines.set('data-testid:light', this._createAttributeEngine('data-testid', false));
+
+    this._engines.set('data-test-id', this._createAttributeEngine('data-test-id', true));
+
+    this._engines.set('data-test-id:light', this._createAttributeEngine('data-test-id', false));
+
+    this._engines.set('data-test', this._createAttributeEngine('data-test', true));
+
+    this._engines.set('data-test:light', this._createAttributeEngine('data-test', false));
+
+    this._engines.set('css', this._createCSSEngine());
+
+    this._engines.set('nth', {
+      queryAll: () => []
+    });
+
+    this._engines.set('visible', {
+      queryAll: () => []
+    });
+
+    for (const {
+      name,
+      engine
+    } of customEngines) this._engines.set(name, engine);
+
+    this._stableRafCount = stableRafCount;
+    this._replaceRafWithTimeout = replaceRafWithTimeout;
+  }
+
+  parseSelector(selector) {
+    const result = (0, _selectorParser.parseSelector)(selector);
+
+    for (const part of result.parts) {
+      if (!this._engines.has(part.name)) throw new Error(`Unknown engine "${part.name}" while parsing selector ${selector}`);
+    }
+
+    return result;
+  }
+
+  querySelector(selector, root, strict) {
+    if (!root['querySelector']) throw new Error('Node is not queryable.');
+
+    this._evaluator.begin();
+
+    try {
+      var _result$, _result$2;
+
+      const result = this._querySelectorRecursively([{
+        element: root,
+        capture: undefined
+      }], selector, 0, new Map());
+
+      if (strict && result.length > 1) throw new Error(`strict mode violation: selector resolved to ${result.length} elements.`);
+      return ((_result$ = result[0]) === null || _result$ === void 0 ? void 0 : _result$.capture) || ((_result$2 = result[0]) === null || _result$2 === void 0 ? void 0 : _result$2.element);
+    } finally {
+      this._evaluator.end();
+    }
+  }
+
+  _querySelectorRecursively(roots, selector, index, queryCache) {
+    if (index === selector.parts.length) return roots;
+    const part = selector.parts[index];
+
+    if (part.name === 'nth') {
+      let filtered = [];
+
+      if (part.body === '0') {
+        filtered = roots.slice(0, 1);
+      } else if (part.body === '-1') {
+        if (roots.length) filtered = roots.slice(roots.length - 1);
+      } else {
+        if (typeof selector.capture === 'number') throw new Error(`Can't query n-th element in a request with the capture.`);
+        const nth = +part.body;
+        const set = new Set();
+
+        for (const root of roots) {
+          set.add(root.element);
+          if (nth + 1 === set.size) filtered = [root];
+        }
+      }
+
+      return this._querySelectorRecursively(filtered, selector, index + 1, queryCache);
+    }
+
+    if (part.name === 'visible') {
+      const visible = Boolean(part.body);
+      return roots.filter(match => visible === (0, _selectorEvaluator.isVisible)(match.element));
+    }
+
+    const result = [];
+
+    for (const root of roots) {
+      const capture = index - 1 === selector.capture ? root.element : root.capture; // Do not query engine twice for the same element.
+
+      let queryResults = queryCache.get(root.element);
+
+      if (!queryResults) {
+        queryResults = [];
+        queryCache.set(root.element, queryResults);
+      }
+
+      let all = queryResults[index];
+
+      if (!all) {
+        all = this._queryEngineAll(selector.parts[index], root.element);
+        queryResults[index] = all;
+      }
+
+      for (const element of all) result.push({
+        element,
+        capture
+      });
+    }
+
+    return this._querySelectorRecursively(result, selector, index + 1, queryCache);
+  }
+
+  querySelectorAll(selector, root) {
+    if (!root['querySelectorAll']) throw new Error('Node is not queryable.');
+
+    this._evaluator.begin();
+
+    try {
+      const result = this._querySelectorRecursively([{
+        element: root,
+        capture: undefined
+      }], selector, 0, new Map());
+
+      const set = new Set();
+
+      for (const r of result) set.add(r.capture || r.element);
+
+      return [...set];
+    } finally {
+      this._evaluator.end();
+    }
+  }
+
+  _queryEngineAll(part, root) {
+    return this._engines.get(part.name).queryAll(root, part.body);
+  }
+
+  _createAttributeEngine(attribute, shadow) {
+    const toCSS = selector => {
+      const css = `[${attribute}=${JSON.stringify(selector)}]`;
+      return [{
+        simples: [{
+          selector: {
+            css,
+            functions: []
+          },
+          combinator: ''
+        }]
+      }];
+    };
+
+    return {
+      queryAll: (root, selector) => {
+        return this._evaluator.query({
+          scope: root,
+          pierceShadow: shadow
+        }, toCSS(selector));
+      }
+    };
+  }
+
+  _createCSSEngine() {
+    const evaluator = this._evaluator;
+    return {
+      queryAll(root, body) {
+        return evaluator.query({
+          scope: root,
+          pierceShadow: true
+        }, body);
+      }
+
+    };
+  }
+
+  _createCrusherEngine(shadow = true) {
+    const getElementsByXPath = (root, selector) => {
+      if (selector.startsWith('/')) selector = '.' + selector;
+      const result = [];
+      const document = root instanceof Document ? root : root.ownerDocument;
+      if (!document) return result;
+      const it = document.evaluate(selector, root, null, XPathResult.ORDERED_NODE_ITERATOR_TYPE);
+
+      for (let node = it.iterateNext(); node; node = it.iterateNext()) if (node.nodeType === Node.ELEMENT_NODE) result.push(node);
+
+      return result;
+    };
+
+    const queryList = (root, encodedSelectors) => {
+      try {
+        const {
+          uuid,
+          selectors
+        } = JSON.parse(decodeURIComponent(encodedSelectors));
+
+        this._evaluator.begin();
+
+        const playwrightSelector = selectors.find(selector => selector.type === SelectorTypeEnum.PLAYWRIGHT);
+
+        if (playwrightSelector) {
+          try {
+            const elements = this.querySelectorAll(this.parseSelector(playwrightSelector.value), root);
+
+            if (elements && elements.length) {
+              this._evaluator.end();
+
+              window[uuid] = {
+                selector: playwrightSelector.value,
+                selectorType: playwrightSelector.type
+              };
+              return elements;
+            }
+          } catch (e) {}
+        }
+
+        const nonPlaywrightSelectors = selectors.filter(selector => selector.type !== SelectorTypeEnum.PLAYWRIGHT);
+
+        for (const nonPlaywrightSelector of nonPlaywrightSelectors) {
+          let elements = [];
+
+          try {
+            if (nonPlaywrightSelector.type === SelectorTypeEnum.XPATH) elements = getElementsByXPath(root, nonPlaywrightSelector.value);else elements = this._evaluator._queryCSS({
+              scope: root,
+              pierceShadow: shadow
+            }, nonPlaywrightSelector.value);
+          } catch (e) {}
+
+          if (elements && elements.length) {
+            this._evaluator.end();
+
+            window[uuid] = {
+              selector: nonPlaywrightSelector.value,
+              selectorType: nonPlaywrightSelector.type
+            };
+            return elements;
+          }
+        }
+
+        this._evaluator.end();
+
+        return [];
+      } catch (err) {
+        throw new Error(encodedSelectors);
+      }
+    };
+
+    return {
+      queryAll: (root, encodedSelectors) => {
+        return queryList(root, encodedSelectors);
+      }
+    };
+  }
+
+  _createTextEngine(shadow) {
+    const queryList = (root, selector) => {
+      const {
+        matcher,
+        kind
+      } = createTextMatcher(selector);
+      const result = [];
+      let lastDidNotMatchSelf = null;
+
+      const appendElement = element => {
+        // TODO: replace contains() with something shadow-dom-aware?
+        if (kind === 'lax' && lastDidNotMatchSelf && lastDidNotMatchSelf.contains(element)) return false;
+        const matches = (0, _selectorEvaluator.elementMatchesText)(this._evaluator, element, matcher);
+        if (matches === 'none') lastDidNotMatchSelf = element;
+        if (matches === 'self' || matches === 'selfAndChildren' && kind === 'strict') result.push(element);
+      };
+
+      if (root.nodeType === Node.ELEMENT_NODE) appendElement(root);
+
+      const elements = this._evaluator._queryCSS({
+        scope: root,
+        pierceShadow: shadow
+      }, '*');
+
+      for (const element of elements) appendElement(element);
+
+      return result;
+    };
+
+    return {
+      queryAll: (root, selector) => {
+        return queryList(root, selector);
+      }
+    };
+  }
+
+  extend(source, params) {
+    const constrFunction = global.eval(`
+    (() => {
+      ${source}
+      return pwExport;
+    })()`);
+    return new constrFunction(this, params);
+  }
+
+  isVisible(element) {
+    return (0, _selectorEvaluator.isVisible)(element);
+  }
+
+  pollRaf(predicate) {
+    return this._runAbortableTask(progress => {
+      let fulfill;
+      let reject;
+      const result = new Promise((f, r) => {
+        fulfill = f;
+        reject = r;
+      });
+
+      const onRaf = () => {
+        if (progress.aborted) return;
+
+        try {
+          const continuePolling = Symbol('continuePolling');
+          const success = predicate(progress, continuePolling);
+          if (success !== continuePolling) fulfill(success);else requestAnimationFrame(onRaf);
+        } catch (e) {
+          progress.log('  ' + e.message);
+          reject(e);
+        }
+      };
+
+      onRaf();
+      return result;
+    });
+  }
+
+  pollInterval(pollInterval, predicate) {
+    return this._runAbortableTask(progress => {
+      let fulfill;
+      let reject;
+      const result = new Promise((f, r) => {
+        fulfill = f;
+        reject = r;
+      });
+
+      const onTimeout = () => {
+        if (progress.aborted) return;
+
+        try {
+          const continuePolling = Symbol('continuePolling');
+          const success = predicate(progress, continuePolling);
+          if (success !== continuePolling) fulfill(success);else setTimeout(onTimeout, pollInterval);
+        } catch (e) {
+          reject(e);
+        }
+      };
+
+      onTimeout();
+      return result;
+    });
+  }
+
+  _runAbortableTask(task) {
+    let unsentLogs = [];
+    let takeNextLogsCallback;
+    let taskFinished = false;
+
+    const logReady = () => {
+      if (!takeNextLogsCallback) return;
+      takeNextLogsCallback(unsentLogs);
+      unsentLogs = [];
+      takeNextLogsCallback = undefined;
+    };
+
+    const takeNextLogs = () => new Promise(fulfill => {
+      takeNextLogsCallback = fulfill;
+      if (unsentLogs.length || taskFinished) logReady();
+    });
+
+    let lastLog = '';
+    const progress = {
+      aborted: false,
+      log: message => {
+        lastLog = message;
+        unsentLogs.push(message);
+        logReady();
+      },
+      logRepeating: message => {
+        if (message !== lastLog) progress.log(message);
+      }
+    };
+
+    const run = () => {
+      const result = task(progress); // After the task has finished, there should be no more logs.
+      // Release any pending `takeNextLogs` call, and do not block any future ones.
+      // This prevents non-finished protocol evaluation calls and memory leaks.
+
+      result.finally(() => {
+        taskFinished = true;
+        logReady();
+      });
+      return result;
+    };
+
+    return {
+      takeNextLogs,
+      run,
+      cancel: () => {
+        progress.aborted = true;
+      },
+      takeLastLogs: () => unsentLogs
+    };
+  }
+
+  getElementBorderWidth(node) {
+    if (node.nodeType !== Node.ELEMENT_NODE || !node.ownerDocument || !node.ownerDocument.defaultView) return {
+      left: 0,
+      top: 0
+    };
+    const style = node.ownerDocument.defaultView.getComputedStyle(node);
+    return {
+      left: parseInt(style.borderLeftWidth || '', 10),
+      top: parseInt(style.borderTopWidth || '', 10)
+    };
+  }
+
+  retarget(node, behavior) {
+    let element = node.nodeType === Node.ELEMENT_NODE ? node : node.parentElement;
+    if (!element) return null;
+    if (!element.matches('input, textarea, select')) element = element.closest('button, [role=button], [role=checkbox], [role=radio]') || element;
+
+    if (behavior === 'follow-label') {
+      if (!element.matches('input, textarea, button, select, [role=button], [role=checkbox], [role=radio]') && !element.isContentEditable) {
+        // Go up to the label that might be connected to the input/textarea.
+        element = element.closest('label') || element;
+      }
+
+      if (element.nodeName === 'LABEL') element = element.control || element;
+    }
+
+    return element;
+  }
+
+  waitForElementStatesAndPerformAction(node, states, force, callback) {
+    let lastRect;
+    let counter = 0;
+    let samePositionCounter = 0;
+    let lastTime = 0;
+
+    const predicate = (progress, continuePolling) => {
+      if (force) {
+        progress.log(`    forcing action`);
+        return callback(node, progress, continuePolling);
+      }
+
+      for (const state of states) {
+        if (state !== 'stable') {
+          const result = this.checkElementState(node, state);
+          if (typeof result !== 'boolean') return result;
+
+          if (!result) {
+            progress.logRepeating(`    element is not ${state} - waiting...`);
+            return continuePolling;
+          }
+
+          continue;
+        }
+
+        const element = this.retarget(node, 'no-follow-label');
+        if (!element) return 'error:notconnected'; // First raf happens in the same animation frame as evaluation, so it does not produce
+        // any client rect difference compared to synchronous call. We skip the synchronous call
+        // and only force layout during actual rafs as a small optimisation.
+
+        if (++counter === 1) return continuePolling; // Drop frames that are shorter than 16ms - WebKit Win bug.
+
+        const time = performance.now();
+        if (this._stableRafCount > 1 && time - lastTime < 15) return continuePolling;
+        lastTime = time;
+        const clientRect = element.getBoundingClientRect();
+        const rect = {
+          x: clientRect.top,
+          y: clientRect.left,
+          width: clientRect.width,
+          height: clientRect.height
+        };
+        const samePosition = lastRect && rect.x === lastRect.x && rect.y === lastRect.y && rect.width === lastRect.width && rect.height === lastRect.height;
+        if (samePosition) ++samePositionCounter;else samePositionCounter = 0;
+        const isStable = samePositionCounter >= this._stableRafCount;
+        const isStableForLogs = isStable || !lastRect;
+        lastRect = rect;
+        if (!isStableForLogs) progress.logRepeating(`    element is not stable - waiting...`);
+        if (!isStable) return continuePolling;
+      }
+
+      return callback(node, progress, continuePolling);
+    };
+
+    if (this._replaceRafWithTimeout) return this.pollInterval(16, predicate);else return this.pollRaf(predicate);
+  }
+
+  checkElementState(node, state) {
+    const element = this.retarget(node, ['stable', 'visible', 'hidden'].includes(state) ? 'no-follow-label' : 'follow-label');
+
+    if (!element || !element.isConnected) {
+      if (state === 'hidden') return true;
+      return 'error:notconnected';
+    }
+
+    if (state === 'visible') return this.isVisible(element);
+    if (state === 'hidden') return !this.isVisible(element);
+    const disabled = ['BUTTON', 'INPUT', 'SELECT', 'TEXTAREA'].includes(element.nodeName) && element.hasAttribute('disabled');
+    if (state === 'disabled') return disabled;
+    if (state === 'enabled') return !disabled;
+    const editable = !(['INPUT', 'TEXTAREA', 'SELECT'].includes(element.nodeName) && element.hasAttribute('readonly'));
+    if (state === 'editable') return !disabled && editable;
+
+    if (state === 'checked') {
+      if (element.getAttribute('role') === 'checkbox') return element.getAttribute('aria-checked') === 'true';
+      if (element.nodeName !== 'INPUT') return 'error:notcheckbox';
+      if (!['radio', 'checkbox'].includes(element.type.toLowerCase())) return 'error:notcheckbox';
+      return element.checked;
+    }
+
+    throw new Error(`Unexpected element state "${state}"`);
+  }
+
+  selectOptions(optionsToSelect, node, progress, continuePolling) {
+    const element = this.retarget(node, 'follow-label');
+    if (!element) return 'error:notconnected';
+    if (element.nodeName.toLowerCase() !== 'select') return 'error:notselect';
+    const select = element;
+    const options = [...select.options];
+    const selectedOptions = [];
+    let remainingOptionsToSelect = optionsToSelect.slice();
+
+    for (let index = 0; index < options.length; index++) {
+      const option = options[index];
+
+      const filter = optionToSelect => {
+        if (optionToSelect instanceof Node) return option === optionToSelect;
+        let matches = true;
+        if (optionToSelect.value !== undefined) matches = matches && optionToSelect.value === option.value;
+        if (optionToSelect.label !== undefined) matches = matches && optionToSelect.label === option.label;
+        if (optionToSelect.index !== undefined) matches = matches && optionToSelect.index === index;
+        return matches;
+      };
+
+      if (!remainingOptionsToSelect.some(filter)) continue;
+      selectedOptions.push(option);
+
+      if (select.multiple) {
+        remainingOptionsToSelect = remainingOptionsToSelect.filter(o => !filter(o));
+      } else {
+        remainingOptionsToSelect = [];
+        break;
+      }
+    }
+
+    if (remainingOptionsToSelect.length) {
+      progress.logRepeating('    did not find some options - waiting... ');
+      return continuePolling;
+    }
+
+    select.value = undefined;
+    selectedOptions.forEach(option => option.selected = true);
+    progress.log('    selected specified option(s)');
+    select.dispatchEvent(new Event('input', {
+      'bubbles': true
+    }));
+    select.dispatchEvent(new Event('change', {
+      'bubbles': true
+    }));
+    return selectedOptions.map(option => option.value);
+  }
+
+  fill(value, node, progress) {
+    const element = this.retarget(node, 'follow-label');
+    if (!element) return 'error:notconnected';
+
+    if (element.nodeName.toLowerCase() === 'input') {
+      const input = element;
+      const type = input.type.toLowerCase();
+      const kDateTypes = new Set(['date', 'time', 'datetime', 'datetime-local', 'month', 'week']);
+      const kTextInputTypes = new Set(['', 'email', 'number', 'password', 'search', 'tel', 'text', 'url']);
+
+      if (!kTextInputTypes.has(type) && !kDateTypes.has(type)) {
+        progress.log(`    input of type "${type}" cannot be filled`);
+        return 'error:notfillableinputtype';
+      }
+
+      if (type === 'number') {
+        value = value.trim();
+        if (isNaN(Number(value))) return 'error:notfillablenumberinput';
+      }
+
+      if (kDateTypes.has(type)) {
+        value = value.trim();
+        input.focus();
+        input.value = value;
+        if (input.value !== value) return 'error:notvaliddate';
+        element.dispatchEvent(new Event('input', {
+          'bubbles': true
+        }));
+        element.dispatchEvent(new Event('change', {
+          'bubbles': true
+        }));
+        return 'done'; // We have already changed the value, no need to input it.
+      }
+    } else if (element.nodeName.toLowerCase() === 'textarea') {// Nothing to check here.
+    } else if (!element.isContentEditable) {
+      return 'error:notfillableelement';
+    }
+
+    this.selectText(element);
+    return 'needsinput'; // Still need to input the value.
+  }
+
+  selectText(node) {
+    const element = this.retarget(node, 'follow-label');
+    if (!element) return 'error:notconnected';
+
+    if (element.nodeName.toLowerCase() === 'input') {
+      const input = element;
+      input.select();
+      input.focus();
+      return 'done';
+    }
+
+    if (element.nodeName.toLowerCase() === 'textarea') {
+      const textarea = element;
+      textarea.selectionStart = 0;
+      textarea.selectionEnd = textarea.value.length;
+      textarea.focus();
+      return 'done';
+    }
+
+    const range = element.ownerDocument.createRange();
+    range.selectNodeContents(element);
+    const selection = element.ownerDocument.defaultView.getSelection();
+
+    if (selection) {
+      selection.removeAllRanges();
+      selection.addRange(range);
+    }
+
+    element.focus();
+    return 'done';
+  }
+
+  focusNode(node, resetSelectionIfNotFocused) {
+    if (!node.isConnected) return 'error:notconnected';
+    if (node.nodeType !== Node.ELEMENT_NODE) return 'error:notelement';
+    const wasFocused = node.getRootNode().activeElement === node && node.ownerDocument && node.ownerDocument.hasFocus();
+    node.focus();
+
+    if (resetSelectionIfNotFocused && !wasFocused && node.nodeName.toLowerCase() === 'input') {
+      try {
+        const input = node;
+        input.setSelectionRange(0, 0);
+      } catch (e) {// Some inputs do not allow selection.
+      }
+    }
+
+    return 'done';
+  }
+
+  setInputFiles(node, payloads) {
+    if (node.nodeType !== Node.ELEMENT_NODE) return 'Node is not of type HTMLElement';
+    const element = node;
+    if (element.nodeName !== 'INPUT') return 'Not an <input> element';
+    const input = element;
+    const type = (input.getAttribute('type') || '').toLowerCase();
+    if (type !== 'file') return 'Not an input[type=file] element';
+    const files = payloads.map(file => {
+      const bytes = Uint8Array.from(atob(file.buffer), c => c.charCodeAt(0));
+      return new File([bytes], file.name, {
+        type: file.mimeType
+      });
+    });
+    const dt = new DataTransfer();
+
+    for (const file of files) dt.items.add(file);
+
+    input.files = dt.files;
+    input.dispatchEvent(new Event('input', {
+      'bubbles': true
+    }));
+    input.dispatchEvent(new Event('change', {
+      'bubbles': true
+    }));
+  }
+
+  checkHitTargetAt(node, point) {
+    let element = node.nodeType === Node.ELEMENT_NODE ? node : node.parentElement;
+    if (!element || !element.isConnected) return 'error:notconnected';
+    element = element.closest('button, [role=button]') || element;
+    let hitElement = this.deepElementFromPoint(document, point.x, point.y);
+    const hitParents = [];
+
+    while (hitElement && hitElement !== element) {
+      hitParents.push(hitElement);
+      hitElement = (0, _selectorEvaluator.parentElementOrShadowHost)(hitElement);
+    }
+
+    if (hitElement === element) return 'done';
+    const hitTargetDescription = this.previewNode(hitParents[0]); // Root is the topmost element in the hitTarget's chain that is not in the
+    // element's chain. For example, it might be a dialog element that overlays
+    // the target.
+
+    let rootHitTargetDescription;
+
+    while (element) {
+      const index = hitParents.indexOf(element);
+
+      if (index !== -1) {
+        if (index > 1) rootHitTargetDescription = this.previewNode(hitParents[index - 1]);
+        break;
+      }
+
+      element = (0, _selectorEvaluator.parentElementOrShadowHost)(element);
+    }
+
+    if (rootHitTargetDescription) return {
+      hitTargetDescription: `${hitTargetDescription} from ${rootHitTargetDescription} subtree`
+    };
+    return {
+      hitTargetDescription
+    };
+  }
+
+  dispatchEvent(node, type, eventInit) {
+    let event;
+    eventInit = {
+      bubbles: true,
+      cancelable: true,
+      composed: true,
+      ...eventInit
+    };
+
+    switch (eventType.get(type)) {
+      case 'mouse':
+        event = new MouseEvent(type, eventInit);
+        break;
+
+      case 'keyboard':
+        event = new KeyboardEvent(type, eventInit);
+        break;
+
+      case 'touch':
+        event = new TouchEvent(type, eventInit);
+        break;
+
+      case 'pointer':
+        event = new PointerEvent(type, eventInit);
+        break;
+
+      case 'focus':
+        event = new FocusEvent(type, eventInit);
+        break;
+
+      case 'drag':
+        event = new DragEvent(type, eventInit);
+        break;
+
+      default:
+        event = new Event(type, eventInit);
+        break;
+    }
+
+    node.dispatchEvent(event);
+  }
+
+  deepElementFromPoint(document, x, y) {
+    let container = document;
+    let element;
+
+    while (container) {
+      // elementFromPoint works incorrectly in Chromium (http://crbug.com/1188919),
+      // so we use elementsFromPoint instead.
+      const elements = container.elementsFromPoint(x, y);
+      const innerElement = elements[0];
+      if (!innerElement || element === innerElement) break;
+      element = innerElement;
+      container = element.shadowRoot;
+    }
+
+    return element;
+  }
+
+  previewNode(node) {
+    if (node.nodeType === Node.TEXT_NODE) return oneLine(`#text=${node.nodeValue || ''}`);
+    if (node.nodeType !== Node.ELEMENT_NODE) return oneLine(`<${node.nodeName.toLowerCase()} />`);
+    const element = node;
+    const attrs = [];
+
+    for (let i = 0; i < element.attributes.length; i++) {
+      const {
+        name,
+        value
+      } = element.attributes[i];
+      if (name === 'style') continue;
+      if (!value && booleanAttributes.has(name)) attrs.push(` ${name}`);else attrs.push(` ${name}="${value}"`);
+    }
+
+    attrs.sort((a, b) => a.length - b.length);
+    let attrText = attrs.join('');
+    if (attrText.length > 50) attrText = attrText.substring(0, 49) + '\u2026';
+    if (autoClosingTags.has(element.nodeName)) return oneLine(`<${element.nodeName.toLowerCase()}${attrText}/>`);
+    const children = element.childNodes;
+    let onlyText = false;
+
+    if (children.length <= 5) {
+      onlyText = true;
+
+      for (let i = 0; i < children.length; i++) onlyText = onlyText && children[i].nodeType === Node.TEXT_NODE;
+    }
+
+    let text = onlyText ? element.textContent || '' : children.length ? '\u2026' : '';
+    if (text.length > 50) text = text.substring(0, 49) + '\u2026';
+    return oneLine(`<${element.nodeName.toLowerCase()}${attrText}>${text}</${element.nodeName.toLowerCase()}>`);
+  }
+
+}
+
+exports.InjectedScript = InjectedScript;
+const autoClosingTags = new Set(['AREA', 'BASE', 'BR', 'COL', 'COMMAND', 'EMBED', 'HR', 'IMG', 'INPUT', 'KEYGEN', 'LINK', 'MENUITEM', 'META', 'PARAM', 'SOURCE', 'TRACK', 'WBR']);
+const booleanAttributes = new Set(['checked', 'selected', 'disabled', 'readonly', 'multiple']);
+
+function oneLine(s) {
+  return s.replace(/\n/g, '↵').replace(/\t/g, '⇆');
+}
+
+const eventType = new Map([['auxclick', 'mouse'], ['click', 'mouse'], ['dblclick', 'mouse'], ['mousedown', 'mouse'], ['mouseeenter', 'mouse'], ['mouseleave', 'mouse'], ['mousemove', 'mouse'], ['mouseout', 'mouse'], ['mouseover', 'mouse'], ['mouseup', 'mouse'], ['mouseleave', 'mouse'], ['mousewheel', 'mouse'], ['keydown', 'keyboard'], ['keyup', 'keyboard'], ['keypress', 'keyboard'], ['textInput', 'keyboard'], ['touchstart', 'touch'], ['touchmove', 'touch'], ['touchend', 'touch'], ['touchcancel', 'touch'], ['pointerover', 'pointer'], ['pointerout', 'pointer'], ['pointerenter', 'pointer'], ['pointerleave', 'pointer'], ['pointerdown', 'pointer'], ['pointerup', 'pointer'], ['pointermove', 'pointer'], ['pointercancel', 'pointer'], ['gotpointercapture', 'pointer'], ['lostpointercapture', 'pointer'], ['focus', 'focus'], ['blur', 'focus'], ['drag', 'drag'], ['dragstart', 'drag'], ['dragend', 'drag'], ['dragover', 'drag'], ['dragenter', 'drag'], ['dragleave', 'drag'], ['dragexit', 'drag'], ['drop', 'drag']]);
+
+function unescape(s) {
+  if (!s.includes('\\')) return s;
+  const r = [];
+  let i = 0;
+
+  while (i < s.length) {
+    if (s[i] === '\\' && i + 1 < s.length) i++;
+    r.push(s[i++]);
+  }
+
+  return r.join('');
+}
+
+function createTextMatcher(selector) {
+  if (selector[0] === '/' && selector.lastIndexOf('/') > 0) {
+    const lastSlash = selector.lastIndexOf('/');
+    const matcher = (0, _selectorEvaluator.createRegexTextMatcher)(selector.substring(1, lastSlash), selector.substring(lastSlash + 1));
+    return {
+      matcher,
+      kind: 'regex'
+    };
+  }
+
+  let strict = false;
+
+  if (selector.length > 1 && selector[0] === '"' && selector[selector.length - 1] === '"') {
+    selector = unescape(selector.substring(1, selector.length - 1));
+    strict = true;
+  }
+
+  if (selector.length > 1 && selector[0] === "'" && selector[selector.length - 1] === "'") {
+    selector = unescape(selector.substring(1, selector.length - 1));
+    strict = true;
+  }
+
+  const matcher = strict ? (0, _selectorEvaluator.createStrictTextMatcher)(selector) : (0, _selectorEvaluator.createLaxTextMatcher)(selector);
+  return {
+    matcher,
+    kind: strict ? 'strict' : 'lax'
+  };
+}
+
+var _default = InjectedScript;
+exports.default = _default;
\ No newline at end of file
diff --git a/node_modules/playwright/lib/server/injected/packed/consoleApiSource.js b/node_modules/playwright/lib/server/injected/packed/consoleApiSource.js
new file mode 100644
index 0000000..1240c15
--- /dev/null
+++ b/node_modules/playwright/lib/server/injected/packed/consoleApiSource.js
@@ -0,0 +1 @@
+var pwExport=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=13)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseSelector=function(e){const t=function(e){let t,n=0,r=0;const o={parts:[]},i=()=>{const t=e.substring(r,n).trim(),i=t.indexOf("=");let s,c;-1!==i&&t.substring(0,i).trim().match(/^[a-zA-Z_0-9-+:*]+$/)?(s=t.substring(0,i).trim(),c=t.substring(i+1)):t.length>1&&'"'===t[0]&&'"'===t[t.length-1]||t.length>1&&"'"===t[0]&&"'"===t[t.length-1]?(s="text",c=t):/^\(*\/\//.test(t)||t.startsWith("..")?(s="xpath",c=t):(s="css",c=t);let u=!1;if("*"===s[0]&&(u=!0,s=s.substring(1)),o.parts.push({name:s,body:c}),u){if(void 0!==o.capture)throw new Error("Only one of the selectors can capture using * modifier");o.capture=o.parts.length-1}};if(!e.includes(">>"))return n=e.length,i(),o;for(;n<e.length;){const o=e[n];"\\"===o&&n+1<e.length?n+=2:o===t?(t=void 0,n++):t||'"'!==o&&"'"!==o&&"`"!==o?t||">"!==o||">"!==e[n+1]?n++:(i(),n+=2,r=n):(t=o,n++)}return i(),o}(e),n=t.parts.map(e=>{if("css"===e.name||"css:light"===e.name){"css:light"===e.name&&(e.body=":light("+e.body+")");return{name:"css",body:(0,r.parseCSS)(e.body,o).selector}}return e});return{capture:t.capture,parts:n}},t.customCSSNames=void 0;var r=n(1);const o=new Set(["not","is","where","has","scope","light","visible","text","text-matches","text-is","has-text","above","below","right-of","left-of","near","nth-match"]);t.customCSSNames=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseCSS=function(e,t){let n;try{n=r.tokenize(e),n[n.length-1]instanceof r.EOFToken||n.push(new r.EOFToken)}catch(t){const n=t.message+` while parsing selector "${e}"`,r=(t.stack||"").indexOf(t.message);throw-1!==r&&(t.stack=t.stack.substring(0,r)+n+t.stack.substring(r+t.message.length)),t.message=n,t}const o=n.find(e=>e instanceof r.AtKeywordToken||e instanceof r.BadStringToken||e instanceof r.BadURLToken||e instanceof r.ColumnToken||e instanceof r.CDOToken||e instanceof r.CDCToken||e instanceof r.SemicolonToken||e instanceof r.OpenCurlyToken||e instanceof r.CloseCurlyToken||e instanceof r.URLToken||e instanceof r.PercentageToken);if(o)throw new Error(`Unsupported token "${o.toSource()}" while parsing selector "${e}"`);let i=0;const s=new Set;function c(){return new Error(`Unexpected token "${n[i].toSource()}" while parsing selector "${e}"`)}function u(){for(;n[i]instanceof r.WhitespaceToken;)i++}function a(e=i){return n[e]instanceof r.IdentToken}function l(e=i){return n[e]instanceof r.CommaToken}function p(e=i){return n[e]instanceof r.CloseParenToken}function h(e=i){return n[e]instanceof r.DelimToken&&"*"===n[e].value}function f(e=i){return n[e]instanceof r.EOFToken}function y(e=i){return n[e]instanceof r.DelimToken&&[">","+","~"].includes(n[e].value)}function g(e=i){return l(e)||p(e)||f(e)||y(e)||n[e]instanceof r.WhitespaceToken}function m(){const e=[d()];for(;u(),l();)i++,e.push(d());return e}function d(){return u(),function(e=i){return n[e]instanceof r.NumberToken}()||function(e=i){return n[e]instanceof r.StringToken}()?n[i++].value:function(){u();const e={simples:[{selector:w(),combinator:""}]};for(;;){if(u(),y())e.simples[e.simples.length-1].combinator=n[i++].value,u();else if(g())break;e.simples.push({combinator:"",selector:w()})}return e}()}function w(){let e="";const o=[];for(;!g();)if(a()||h())e+=n[i++].toSource();else if(n[i]instanceof r.HashToken)e+=n[i++].toSource();else if(n[i]instanceof r.DelimToken&&"."===n[i].value){if(i++,!a())throw c();e+="."+n[i++].toSource()}else if(n[i]instanceof r.ColonToken)if(i++,a())if(t.has(n[i].value.toLowerCase())){const e=n[i++].value.toLowerCase();o.push({name:e,args:[]}),s.add(e)}else e+=":"+n[i++].toSource();else{if(!(n[i]instanceof r.FunctionToken))throw c();{const r=n[i++].value.toLowerCase();if(t.has(r)?(o.push({name:r,args:m()}),s.add(r)):e+=`:${r}(${S()})`,u(),!p())throw c();i++}}else{if(!(n[i]instanceof r.OpenSquareToken))throw c();for(e+="[",i++;!(n[i]instanceof r.CloseSquareToken||f());)e+=n[i++].toSource();if(!(n[i]instanceof r.CloseSquareToken))throw c();e+="]",i++}if(!e&&!o.length)throw c();return{css:e||void 0,functions:o}}function S(){let e="";for(;!p()&&!f();)e+=n[i++].toSource();return e}const v=m();if(!f())throw new Error(`Error while parsing selector "${e}"`);if(v.some(e=>"object"!=typeof e||!("simples"in e)))throw new Error(`Error while parsing selector "${e}"`);return{selector:v,names:Array.from(s)}},t.serializeSelector=function e(t){return t.map(t=>"string"==typeof t?`"${t}"`:"number"==typeof t?String(t):t.simples.map(({selector:t,combinator:n})=>{let r=t.css||"";return r+=t.functions.map(t=>`:${t.name}(${e(t.args)})`).join(""),n&&(r+=" "+n),r}).join(" ")).join(", ")};var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=o(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var c=i?Object.getOwnPropertyDescriptor(e,s):null;c&&(c.get||c.set)?Object.defineProperty(r,s,c):r[s]=e[s]}r.default=e,n&&n.set(e,r);return r}(n(2));function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(o=function(e){return e?n:t})(e)}},function(e,t,n){"use strict";var r,o,i;o=[t],void 0===(i="function"==typeof(r=function(e){var t=function(e,t,n){return e>=t&&e<=n};function n(e){return t(e,48,57)}function r(e){return n(e)||t(e,65,70)||t(e,97,102)}function o(e){return function(e){return t(e,65,90)}(e)||function(e){return t(e,97,122)}(e)}function i(e){return o(e)||function(e){return e>=128}(e)||95==e}function s(e){return i(e)||n(e)||45==e}function c(e){return t(e,0,8)||11==e||t(e,14,31)||127==e}function u(e){return 10==e}function a(e){return u(e)||9==e||32==e}var l=function(e){this.message=e};function p(e){if(e<=65535)return String.fromCharCode(e);e-=Math.pow(2,16);var t=Math.floor(e/Math.pow(2,10))+55296,n=e%Math.pow(2,10)+56320;return String.fromCharCode(t)+String.fromCharCode(n)}function h(){throw"Abstract Base Class"}function f(){return this}function y(){return this}function g(){return this}function m(){return this}function d(){return this}function w(){return this}function S(){return this}function v(){return this}function _(){throw"Abstract Base Class"}function T(){return this.value="{",this.mirror="}",this}function b(){return this.value="}",this.mirror="{",this}function E(){return this.value="[",this.mirror="]",this}function k(){return this.value="]",this.mirror="[",this}function C(){return this.value="(",this.mirror=")",this}function O(){return this.value=")",this.mirror="(",this}function M(){return this}function x(){return this}function N(){return this}function A(){return this}function j(){return this}function P(){return this}function $(){return this}function q(e){return this.value=p(e),this}function L(){throw"Abstract Base Class"}function R(e){this.value=e}function D(e){this.value=e,this.mirror=")"}function I(e){this.value=e}function U(e){this.value=e,this.type="unrestricted"}function B(e){this.value=e}function Q(e){this.value=e}function F(){this.value=null,this.type="integer",this.repr=""}function J(){this.value=null,this.repr=""}function W(){this.value=null,this.type="integer",this.repr="",this.unit=""}function z(e){for(var n="",r=(e=""+e).charCodeAt(0),o=0;o<e.length;o++){var i=e.charCodeAt(o);if(0==i)throw new l("Invalid character: the input contains U+0000.");t(i,1,31)||127==i||0==o&&t(i,48,57)||1==o&&t(i,48,57)&&45==r?n+="\\"+i.toString(16)+" ":i>=128||45==i||95==i||t(i,48,57)||t(i,65,90)||t(i,97,122)?n+=e[o]:n+="\\"+e[o]}return n}function G(e){e=""+e;for(var n="",r=0;r<e.length;r++){var o=e.charCodeAt(r);if(0==o)throw new l("Invalid character: the input contains U+0000.");t(o,1,31)||127==o?n+="\\"+o.toString(16)+" ":n+=34==o||92==o?"\\"+e[r]:e[r]}return n}(l.prototype=new Error).name="InvalidCharacterError",h.prototype.toJSON=function(){return{token:this.tokenType}},h.prototype.toString=function(){return this.tokenType},h.prototype.toSource=function(){return""+this},f.prototype=Object.create(h.prototype),f.prototype.tokenType="BADSTRING",y.prototype=Object.create(h.prototype),y.prototype.tokenType="BADURL",g.prototype=Object.create(h.prototype),g.prototype.tokenType="WHITESPACE",g.prototype.toString=function(){return"WS"},g.prototype.toSource=function(){return" "},m.prototype=Object.create(h.prototype),m.prototype.tokenType="CDO",m.prototype.toSource=function(){return"\x3c!--"},d.prototype=Object.create(h.prototype),d.prototype.tokenType="CDC",d.prototype.toSource=function(){return"--\x3e"},w.prototype=Object.create(h.prototype),w.prototype.tokenType=":",S.prototype=Object.create(h.prototype),S.prototype.tokenType=";",v.prototype=Object.create(h.prototype),v.prototype.tokenType=",",_.prototype=Object.create(h.prototype),T.prototype=Object.create(_.prototype),T.prototype.tokenType="{",b.prototype=Object.create(_.prototype),b.prototype.tokenType="}",E.prototype=Object.create(_.prototype),E.prototype.tokenType="[",k.prototype=Object.create(_.prototype),k.prototype.tokenType="]",C.prototype=Object.create(_.prototype),C.prototype.tokenType="(",O.prototype=Object.create(_.prototype),O.prototype.tokenType=")",M.prototype=Object.create(h.prototype),M.prototype.tokenType="~=",x.prototype=Object.create(h.prototype),x.prototype.tokenType="|=",N.prototype=Object.create(h.prototype),N.prototype.tokenType="^=",A.prototype=Object.create(h.prototype),A.prototype.tokenType="$=",j.prototype=Object.create(h.prototype),j.prototype.tokenType="*=",P.prototype=Object.create(h.prototype),P.prototype.tokenType="||",$.prototype=Object.create(h.prototype),$.prototype.tokenType="EOF",$.prototype.toSource=function(){return""},q.prototype=Object.create(h.prototype),q.prototype.tokenType="DELIM",q.prototype.toString=function(){return"DELIM("+this.value+")"},q.prototype.toJSON=function(){var e=this.constructor.prototype.constructor.prototype.toJSON.call(this);return e.value=this.value,e},q.prototype.toSource=function(){return"\\"==this.value?"\\\n":this.value},L.prototype=Object.create(h.prototype),L.prototype.ASCIIMatch=function(e){return this.value.toLowerCase()==e.toLowerCase()},L.prototype.toJSON=function(){var e=this.constructor.prototype.constructor.prototype.toJSON.call(this);return e.value=this.value,e},R.prototype=Object.create(L.prototype),R.prototype.tokenType="IDENT",R.prototype.toString=function(){return"IDENT("+this.value+")"},R.prototype.toSource=function(){return z(this.value)},D.prototype=Object.create(L.prototype),D.prototype.tokenType="FUNCTION",D.prototype.toString=function(){return"FUNCTION("+this.value+")"},D.prototype.toSource=function(){return z(this.value)+"("},I.prototype=Object.create(L.prototype),I.prototype.tokenType="AT-KEYWORD",I.prototype.toString=function(){return"AT("+this.value+")"},I.prototype.toSource=function(){return"@"+z(this.value)},U.prototype=Object.create(L.prototype),U.prototype.tokenType="HASH",U.prototype.toString=function(){return"HASH("+this.value+")"},U.prototype.toJSON=function(){var e=this.constructor.prototype.constructor.prototype.toJSON.call(this);return e.value=this.value,e.type=this.type,e},U.prototype.toSource=function(){return"id"==this.type?"#"+z(this.value):"#"+function(e){for(var n="",r=((e=""+e).charCodeAt(0),0);r<e.length;r++){var o=e.charCodeAt(r);if(0==o)throw new l("Invalid character: the input contains U+0000.");o>=128||45==o||95==o||t(o,48,57)||t(o,65,90)||t(o,97,122)?n+=e[r]:n+="\\"+o.toString(16)+" "}return n}(this.value)},B.prototype=Object.create(L.prototype),B.prototype.tokenType="STRING",B.prototype.toString=function(){return'"'+G(this.value)+'"'},Q.prototype=Object.create(L.prototype),Q.prototype.tokenType="URL",Q.prototype.toString=function(){return"URL("+this.value+")"},Q.prototype.toSource=function(){return'url("'+G(this.value)+'")'},F.prototype=Object.create(h.prototype),F.prototype.tokenType="NUMBER",F.prototype.toString=function(){return"integer"==this.type?"INT("+this.value+")":"NUMBER("+this.value+")"},F.prototype.toJSON=function(){var e=this.constructor.prototype.constructor.prototype.toJSON.call(this);return e.value=this.value,e.type=this.type,e.repr=this.repr,e},F.prototype.toSource=function(){return this.repr},J.prototype=Object.create(h.prototype),J.prototype.tokenType="PERCENTAGE",J.prototype.toString=function(){return"PERCENTAGE("+this.value+")"},J.prototype.toJSON=function(){var e=this.constructor.prototype.constructor.prototype.toJSON.call(this);return e.value=this.value,e.repr=this.repr,e},J.prototype.toSource=function(){return this.repr+"%"},W.prototype=Object.create(h.prototype),W.prototype.tokenType="DIMENSION",W.prototype.toString=function(){return"DIM("+this.value+","+this.unit+")"},W.prototype.toJSON=function(){var e=this.constructor.prototype.constructor.prototype.toJSON.call(this);return e.value=this.value,e.type=this.type,e.repr=this.repr,e.unit=this.unit,e},W.prototype.toSource=function(){var e=this.repr,n=z(this.unit);return"e"!=n[0].toLowerCase()||"-"!=n[1]&&!t(n.charCodeAt(1),48,57)||(n="\\65 "+n.slice(1,n.length)),e+n},e.tokenize=function(e){e=function(e){for(var n=[],r=0;r<e.length;r++){var o=e.charCodeAt(r);if(13==o&&10==e.charCodeAt(r+1)&&(o=10,r++),13!=o&&12!=o||(o=10),0==o&&(o=65533),t(o,55296,56319)&&t(e.charCodeAt(r+1),56320,57343)){var i=o-55296,s=e.charCodeAt(r+1)-56320;o=Math.pow(2,16)+i*Math.pow(2,10)+s,r++}n.push(o)}return n}(e);for(var o,l=-1,h=[],_=0,L=0,z=0,G={line:_,column:L},H=function(t){return t>=e.length?-1:e[t]},V=function(e){if(void 0===e&&(e=1),e>3)throw"Spec Error: no more than three codepoints of lookahead.";return H(l+e)},K=function(e){return void 0===e&&(e=1),u(o=H(l+=e))?(_+=1,z=L,L=0):L+=e,!0},X=function(){return l-=1,u(o)?(_-=1,L=z):L-=1,G.line=_,G.column=L,!0},Z=function(e){return void 0===e&&(e=o),-1==e},Y=function(){return console.log("Parse error at index "+l+", processing codepoint 0x"+o.toString(16)+"."),!0},ee=function(){if(te(),K(),a(o)){for(;a(V());)K();return new g}if(34==o)return oe();if(35==o){if(s(V())||ce(V(1),V(2))){var e=new U;return ae(V(1),V(2),V(3))&&(e.type="id"),e.value=he(),e}return new q(o)}return 36==o?61==V()?(K(),new A):new q(o):39==o?oe():40==o?new C:41==o?new O:42==o?61==V()?(K(),new j):new q(o):43==o?pe()?(X(),ne()):new q(o):44==o?new v:45==o?pe()?(X(),ne()):45==V(1)&&62==V(2)?(K(2),new d):le()?(X(),re()):new q(o):46==o?pe()?(X(),ne()):new q(o):58==o?new w:59==o?new S:60==o?33==V(1)&&45==V(2)&&45==V(3)?(K(3),new m):new q(o):64==o?ae(V(1),V(2),V(3))?new I(he()):new q(o):91==o?new E:92==o?ue()?(X(),re()):(Y(),new q(o)):93==o?new k:94==o?61==V()?(K(),new N):new q(o):123==o?new T:124==o?61==V()?(K(),new x):124==V()?(K(),new P):new q(o):125==o?new b:126==o?61==V()?(K(),new M):new q(o):n(o)?(X(),ne()):i(o)?(X(),re()):Z()?new $:new q(o)},te=function(){for(;47==V(1)&&42==V(2);)for(K(2);;){if(K(),42==o&&47==V()){K();break}if(Z())return void Y()}},ne=function(){var e,t=fe();return ae(V(1),V(2),V(3))?((e=new W).value=t.value,e.repr=t.repr,e.type=t.type,e.unit=he(),e):37==V()?(K(),(e=new J).value=t.value,e.repr=t.repr,e):((e=new F).value=t.value,e.repr=t.repr,e.type=t.type,e)},re=function(){var e=he();if("url"==e.toLowerCase()&&40==V()){for(K();a(V(1))&&a(V(2));)K();return 34==V()||39==V()?new D(e):!a(V())||34!=V(2)&&39!=V(2)?ie():new D(e)}return 40==V()?(K(),new D(e)):new R(e)},oe=function(e){void 0===e&&(e=o);for(var t="";K();){if(o==e||Z())return new B(t);if(u(o))return Y(),X(),new f;92==o?Z(V())||(u(V())?K():t+=p(se())):t+=p(o)}},ie=function(){for(var e=new Q("");a(V());)K();if(Z(V()))return e;for(;K();){if(41==o||Z())return e;if(a(o)){for(;a(V());)K();return 41==V()||Z(V())?(K(),e):(ge(),new y)}if(34==o||39==o||40==o||c(o))return Y(),ge(),new y;if(92==o){if(!ue())return Y(),ge(),new y;e.value+=p(se())}else e.value+=p(o)}},se=function(){if(K(),r(o)){for(var e=[o],t=0;t<5&&r(V());t++)K(),e.push(o);a(V())&&K();var n=parseInt(e.map((function(e){return String.fromCharCode(e)})).join(""),16);return n>1114111&&(n=65533),n}return Z()?65533:o},ce=function(e,t){return 92==e&&!u(t)},ue=function(){return ce(o,V())},ae=function(e,t,n){return 45==e?i(t)||45==t||ce(t,n):!!i(e)||92==e&&ce(e,t)},le=function(){return ae(o,V(1),V(2))},pe=function(){return e=o,t=V(1),r=V(2),43==e||45==e?!!n(t)||!(46!=t||!n(r)):46==e?!!n(t):!!n(e);var e,t,r},he=function(){for(var e="";K();)if(s(o))e+=p(o);else{if(!ue())return X(),e;e+=p(se())}},fe=function(){var e=[],t="integer";for(43!=V()&&45!=V()||(K(),e+=p(o));n(V());)K(),e+=p(o);if(46==V(1)&&n(V(2)))for(K(),e+=p(o),K(),e+=p(o),t="number";n(V());)K(),e+=p(o);var r=V(1),i=V(2),s=V(3);if(69!=r&&101!=r||!n(i)){if((69==r||101==r)&&(43==i||45==i)&&n(s))for(K(),e+=p(o),K(),e+=p(o),K(),e+=p(o),t="number";n(V());)K(),e+=p(o)}else for(K(),e+=p(o),K(),e+=p(o),t="number";n(V());)K(),e+=p(o);return{type:t,value:ye(e),repr:e}},ye=function(e){return+e},ge=function(){for(;K();){if(41==o||Z())return;ue()&&se()}},me=0;!Z(V());)if(h.push(ee()),++me>2*e.length)return"I'm infinite-looping!";return h},e.IdentToken=R,e.FunctionToken=D,e.AtKeywordToken=I,e.HashToken=U,e.StringToken=B,e.BadStringToken=f,e.URLToken=Q,e.BadURLToken=y,e.DelimToken=q,e.NumberToken=F,e.PercentageToken=J,e.DimensionToken=W,e.IncludeMatchToken=M,e.DashMatchToken=x,e.PrefixMatchToken=N,e.SuffixMatchToken=A,e.SubstringMatchToken=j,e.ColumnToken=P,e.WhitespaceToken=g,e.CDOToken=m,e.CDCToken=d,e.ColonToken=w,e.SemicolonToken=S,e.CommaToken=v,e.OpenParenToken=C,e.CloseParenToken=O,e.OpenSquareToken=E,e.CloseSquareToken=k,e.OpenCurlyToken=T,e.CloseCurlyToken=b,e.EOFToken=$,e.CSSParserToken=h,e.GroupingToken=_})?r.apply(t,o):r)||(e.exports=i)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createLaxTextMatcher=y,t.createStrictTextMatcher=g,t.createRegexTextMatcher=m,t.elementText=w,t.elementMatchesText=S,t.parentElementOrShadowHost=O,t.isVisible=N,t.SelectorEvaluatorImpl=void 0;var r=n(0);t.SelectorEvaluatorImpl=class{constructor(e){this._engines=new Map,this._cacheQueryCSS=new Map,this._cacheMatches=new Map,this._cacheQuery=new Map,this._cacheMatchesSimple=new Map,this._cacheMatchesParents=new Map,this._cacheCallMatches=new Map,this._cacheCallQuery=new Map,this._cacheQuerySimple=new Map,this._cacheText=new Map,this._scoreMap=void 0,this._retainCacheCounter=0;for(const[t,n]of e)this._engines.set(t,n);this._engines.set("not",c),this._engines.set("is",o),this._engines.set("where",o),this._engines.set("has",i),this._engines.set("scope",s),this._engines.set("light",u),this._engines.set("visible",a),this._engines.set("text",l),this._engines.set("text-is",p),this._engines.set("text-matches",h),this._engines.set("has-text",f),this._engines.set("right-of",k("right-of",v)),this._engines.set("left-of",k("left-of",_)),this._engines.set("above",k("above",T)),this._engines.set("below",k("below",b)),this._engines.set("near",k("near",E)),this._engines.set("nth-match",C);const t=[...this._engines.keys()];t.sort();const n=[...r.customCSSNames];if(n.sort(),t.join("|")!==n.join("|"))throw new Error(`Please keep customCSSNames in sync with evaluator engines: ${t.join("|")} vs ${n.join("|")}`)}begin(){++this._retainCacheCounter}end(){--this._retainCacheCounter,this._retainCacheCounter||(this._cacheQueryCSS.clear(),this._cacheMatches.clear(),this._cacheQuery.clear(),this._cacheMatchesSimple.clear(),this._cacheMatchesParents.clear(),this._cacheCallMatches.clear(),this._cacheCallQuery.clear(),this._cacheQuerySimple.clear(),this._cacheText.clear())}_cached(e,t,n,r){e.has(t)||e.set(t,[]);const o=e.get(t),i=o.find(e=>n.every((t,n)=>e.rest[n]===t));if(i)return i.result;const s=r();return o.push({rest:n,result:s}),s}_checkSelector(e){if(!("object"==typeof e&&e&&(Array.isArray(e)||"simples"in e&&e.simples.length)))throw new Error(`Malformed selector "${e}"`);return e}matches(e,t,n){const r=this._checkSelector(t);this.begin();try{return this._cached(this._cacheMatches,e,[r,n.scope,n.pierceShadow],()=>Array.isArray(r)?this._matchesEngine(o,e,r,n):!!this._matchesSimple(e,r.simples[r.simples.length-1].selector,n)&&this._matchesParents(e,r,r.simples.length-2,n))}finally{this.end()}}query(e,t){const n=this._checkSelector(t);this.begin();try{return this._cached(this._cacheQuery,n,[e.scope,e.pierceShadow],()=>{if(Array.isArray(n))return this._queryEngine(o,e,n);const t=this._scoreMap;this._scoreMap=new Map;let r=this._querySimple(e,n.simples[n.simples.length-1].selector);return r=r.filter(t=>this._matchesParents(t,n,n.simples.length-2,e)),this._scoreMap.size&&r.sort((e,t)=>{const n=this._scoreMap.get(e),r=this._scoreMap.get(t);return n===r?0:void 0===n?1:void 0===r?-1:n-r}),this._scoreMap=t,r})}finally{this.end()}}_markScore(e,t){this._scoreMap&&this._scoreMap.set(e,t)}_matchesSimple(e,t,n){return this._cached(this._cacheMatchesSimple,e,[t,n.scope,n.pierceShadow],()=>{if(!t.functions.some(e=>"scope"===e.name||"is"===e.name)&&e===n.scope)return!1;if(t.css&&!this._matchesCSS(e,t.css))return!1;for(const r of t.functions)if(!this._matchesEngine(this._getEngine(r.name),e,r.args,n))return!1;return!0})}_querySimple(e,t){return t.functions.length?this._cached(this._cacheQuerySimple,t,[e.scope,e.pierceShadow],()=>{let n=t.css;const r=t.functions;let o;"*"===n&&r.length&&(n=void 0);let i=-1;void 0!==n?o=this._queryCSS(e,n):(i=r.findIndex(e=>void 0!==this._getEngine(e.name).query),-1===i&&(i=0),o=this._queryEngine(this._getEngine(r[i].name),e,r[i].args));for(let t=0;t<r.length;t++){if(t===i)continue;const n=this._getEngine(r[t].name);void 0!==n.matches&&(o=o.filter(o=>this._matchesEngine(n,o,r[t].args,e)))}for(let t=0;t<r.length;t++){if(t===i)continue;const n=this._getEngine(r[t].name);void 0===n.matches&&(o=o.filter(o=>this._matchesEngine(n,o,r[t].args,e)))}return o}):this._queryCSS(e,t.css||"*")}_matchesParents(e,t,n,r){return n<0||this._cached(this._cacheMatchesParents,e,[t,n,r.scope,r.pierceShadow],()=>{const{selector:o,combinator:i}=t.simples[n];if(">"===i){const i=M(e,r);return!(!i||!this._matchesSimple(i,o,r))&&this._matchesParents(i,t,n-1,r)}if("+"===i){const i=x(e,r);return!(!i||!this._matchesSimple(i,o,r))&&this._matchesParents(i,t,n-1,r)}if(""===i){let i=M(e,r);for(;i;){if(this._matchesSimple(i,o,r)){if(this._matchesParents(i,t,n-1,r))return!0;if(""===t.simples[n-1].combinator)break}i=M(i,r)}return!1}if("~"===i){let i=x(e,r);for(;i;){if(this._matchesSimple(i,o,r)){if(this._matchesParents(i,t,n-1,r))return!0;if("~"===t.simples[n-1].combinator)break}i=x(i,r)}return!1}if(">="===i){let i=e;for(;i;){if(this._matchesSimple(i,o,r)){if(this._matchesParents(i,t,n-1,r))return!0;if(""===t.simples[n-1].combinator)break}i=M(i,r)}return!1}throw new Error(`Unsupported combinator "${i}"`)})}_matchesEngine(e,t,n,r){if(e.matches)return this._callMatches(e,t,n,r);if(e.query)return this._callQuery(e,n,r).includes(t);throw new Error('Selector engine should implement "matches" or "query"')}_queryEngine(e,t,n){if(e.query)return this._callQuery(e,n,t);if(e.matches)return this._queryCSS(t,"*").filter(r=>this._callMatches(e,r,n,t));throw new Error('Selector engine should implement "matches" or "query"')}_callMatches(e,t,n,r){return this._cached(this._cacheCallMatches,t,[e,r.scope,r.pierceShadow,...n],()=>e.matches(t,n,r,this))}_callQuery(e,t,n){return this._cached(this._cacheCallQuery,e,[n.scope,n.pierceShadow,...t],()=>e.query(n,t,this))}_matchesCSS(e,t){return e.matches(t)}_queryCSS(e,t){return this._cached(this._cacheQueryCSS,t,[e.scope,e.pierceShadow],()=>{let n=[];return function r(o){if(n=n.concat([...o.querySelectorAll(t)]),e.pierceShadow){o.shadowRoot&&r(o.shadowRoot);for(const e of o.querySelectorAll("*"))e.shadowRoot&&r(e.shadowRoot)}}(e.scope),n})}_getEngine(e){const t=this._engines.get(e);if(!t)throw new Error(`Unknown selector engine "${e}"`);return t}};const o={matches(e,t,n,r){if(0===t.length)throw new Error('"is" engine expects non-empty selector list');return t.some(t=>r.matches(e,t,n))},query(e,t,n){if(0===t.length)throw new Error('"is" engine expects non-empty selector list');let r=[];for(const o of t)r=r.concat(n.query(e,o));return 1===t.length?r:function(e){const t=new Map,n=[],r=[];return e.forEach(e=>(function e(r){let o=t.get(r);if(o)return o;const i=O(r);if(i){e(i).children.push(r)}else n.push(r);return o={children:[],taken:!1},t.set(r,o),o}(e)).taken=!0),n.forEach((function e(n){const o=t.get(n);o.taken&&r.push(n);if(o.children.length>1){const e=new Set(o.children);o.children=[];let t=n.firstElementChild;for(;t&&o.children.length<e.size;)e.has(t)&&o.children.push(t),t=t.nextElementSibling;for(t=n.shadowRoot?n.shadowRoot.firstElementChild:null;t&&o.children.length<e.size;)e.has(t)&&o.children.push(t),t=t.nextElementSibling}o.children.forEach(e)})),r}(r)}},i={matches(e,t,n,r){if(0===t.length)throw new Error('"has" engine expects non-empty selector list');return r.query({...n,scope:e},t).length>0}},s={matches(e,t,n,r){if(0!==t.length)throw new Error('"scope" engine expects no arguments');return 9===n.scope.nodeType?e===n.scope.documentElement:e===n.scope},query(e,t,n){if(0!==t.length)throw new Error('"scope" engine expects no arguments');if(9===e.scope.nodeType){const t=e.scope.documentElement;return t?[t]:[]}return 1===e.scope.nodeType?[e.scope]:[]}},c={matches(e,t,n,r){if(0===t.length)throw new Error('"not" engine expects non-empty selector list');return!r.matches(e,t,n)}},u={query:(e,t,n)=>n.query({...e,pierceShadow:!1},t),matches:(e,t,n,r)=>r.matches(e,t,{...n,pierceShadow:!1})},a={matches(e,t,n,r){if(t.length)throw new Error('"visible" engine expects no arguments');return N(e)}},l={matches(e,t,n,r){if(1!==t.length||"string"!=typeof t[0])throw new Error('"text" engine expects a single string');return"self"===S(r,e,y(t[0]))}},p={matches(e,t,n,r){if(1!==t.length||"string"!=typeof t[0])throw new Error('"text-is" engine expects a single string');return"none"!==S(r,e,g(t[0]))}},h={matches(e,t,n,r){if(0===t.length||"string"!=typeof t[0]||t.length>2||2===t.length&&"string"!=typeof t[1])throw new Error('"text-matches" engine expects a regexp body and optional regexp flags');return"self"===S(r,e,m(t[0],2===t.length?t[1]:void 0))}},f={matches(e,t,n,r){if(1!==t.length||"string"!=typeof t[0])throw new Error('"has-text" engine expects a single string');if(d(e))return!1;return y(t[0])(w(r,e))}};function y(e){return e=e.trim().replace(/\s+/g," ").toLowerCase(),t=>t.full.trim().replace(/\s+/g," ").toLowerCase().includes(e)}function g(e){return e=e.trim().replace(/\s+/g," "),t=>t.immediate.some(t=>t.trim().replace(/\s+/g," ")===e)}function m(e,t){const n=new RegExp(e,t);return e=>n.test(e.full)}function d(e){return"SCRIPT"===e.nodeName||"STYLE"===e.nodeName||document.head&&document.head.contains(e)}function w(e,t){let n=e._cacheText.get(t);if(void 0===n){if(n={full:"",immediate:[]},!d(t)){let r="";if(t instanceof HTMLInputElement&&("submit"===t.type||"button"===t.type))n={full:t.value,immediate:[t.value]};else{for(let o=t.firstChild;o;o=o.nextSibling)o.nodeType===Node.TEXT_NODE?(n.full+=o.nodeValue||"",r+=o.nodeValue||""):(r&&n.immediate.push(r),r="",o.nodeType===Node.ELEMENT_NODE&&(n.full+=w(e,o).full));r&&n.immediate.push(r),t.shadowRoot&&(n.full+=w(e,t.shadowRoot).full)}}e._cacheText.set(t,n)}return n}function S(e,t,n){if(d(t))return"none";if(!n(w(e,t)))return"none";for(let r=t.firstChild;r;r=r.nextSibling)if(r.nodeType===Node.ELEMENT_NODE&&n(w(e,r)))return"selfAndChildren";return t.shadowRoot&&n(w(e,t.shadowRoot))?"selfAndChildren":"self"}function v(e,t,n){const r=e.left-t.right;if(!(r<0||void 0!==n&&r>n))return r+Math.max(t.bottom-e.bottom,0)+Math.max(e.top-t.top,0)}function _(e,t,n){const r=t.left-e.right;if(!(r<0||void 0!==n&&r>n))return r+Math.max(t.bottom-e.bottom,0)+Math.max(e.top-t.top,0)}function T(e,t,n){const r=t.top-e.bottom;if(!(r<0||void 0!==n&&r>n))return r+Math.max(e.left-t.left,0)+Math.max(t.right-e.right,0)}function b(e,t,n){const r=e.top-t.bottom;if(!(r<0||void 0!==n&&r>n))return r+Math.max(e.left-t.left,0)+Math.max(t.right-e.right,0)}function E(e,t,n){const r=void 0===n?50:n;let o=0;return e.left-t.right>=0&&(o+=e.left-t.right),t.left-e.right>=0&&(o+=t.left-e.right),t.top-e.bottom>=0&&(o+=t.top-e.bottom),e.top-t.bottom>=0&&(o+=e.top-t.bottom),o>r?void 0:o}function k(e,t){return{matches(n,r,o,i){const s=r.length&&"number"==typeof r[r.length-1]?r[r.length-1]:void 0,c=void 0===s?r:r.slice(0,r.length-1);if(r.length<1+(void 0===s?0:1))throw new Error(`"${e}" engine expects a selector list and optional maximum distance in pixels`);const u=n.getBoundingClientRect();let a;for(const e of i.query(o,c)){if(e===n)continue;const r=t(u,e.getBoundingClientRect(),s);void 0!==r&&((void 0===a||r<a)&&(a=r))}return void 0!==a&&(i._markScore(n,a),!0)}}}const C={query(e,t,n){let r=t[t.length-1];if(t.length<2)throw new Error('"nth-match" engine expects non-empty selector list and an index argument');if("number"!=typeof r||r<1)throw new Error('"nth-match" engine expects a one-based index as the last argument');const i=o.query(e,t.slice(0,t.length-1),n);return r--,r<i.length?[i[r]]:[]}};function O(e){return e.parentElement?e.parentElement:e.parentNode&&e.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&e.parentNode.host?e.parentNode.host:void 0}function M(e,t){if(e!==t.scope)return t.pierceShadow?O(e):e.parentElement||void 0}function x(e,t){if(e!==t.scope)return e.previousElementSibling||void 0}function N(e){if(!e.ownerDocument||!e.ownerDocument.defaultView)return!0;const t=e.ownerDocument.defaultView.getComputedStyle(e);if(!t||"hidden"===t.visibility)return!1;const n=e.getBoundingClientRect();return n.width>0&&n.height>0}},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.querySelector=function(e,t,n){try{const r=e.parseSelector(t);return{selector:t,elements:e.querySelectorAll(r,n)}}catch(e){return{selector:t,elements:[]}}},t.generateSelector=function(e,t){e._evaluator.begin();try{t=t.closest("button,select,input,[role=button],[role=checkbox],[role=radio]")||t;const n=function(e,t){if(t.ownerDocument.documentElement===t)return[{engine:"css",selector:"html",score:1}];const n=(n,o)=>{const i=n===t;let p=o?function(e,t,n){if("SELECT"===t.nodeName)return[];const o=(0,r.elementText)(e._evaluator,t).full.trim().replace(/\s+/g," ").substring(0,80);if(!o)return[];const i=[];let s=o;(o.includes('"')||o.includes(">>")||"/"===o[0])&&(s=`/.*${function(e){return e.replace(/[.*+?^>${}()|[\]\\]/g,"\\$&")}(o)}.*/`);if(i.push({engine:"text",selector:s,score:10}),n&&s===o){let e=t.nodeName.toLocaleLowerCase();t.hasAttribute("role")&&(e+=`[role=${l(t.getAttribute("role"))}]`),i.push({engine:"css",selector:`${e}:has-text("${o}")`,score:30})}return i}(e,n,n===t).map(e=>[e]):[];n!==t&&(p=s(p));const y=function(e,t){const n=[];for(const e of["data-testid","data-test-id","data-test"])t.hasAttribute(e)&&n.push({engine:"css",selector:`[${e}=${l(t.getAttribute(e))}]`,score:1});if("INPUT"===t.nodeName){const e=t;e.placeholder&&n.push({engine:"css",selector:`[placeholder=${l(e.placeholder)}]`,score:10})}t.hasAttribute("aria-label")&&n.push({engine:"css",selector:`[aria-label=${l(t.getAttribute("aria-label"))}]`,score:10});t.getAttribute("alt")&&["APPLET","AREA","IMG","INPUT"].includes(t.nodeName)&&n.push({engine:"css",selector:`${t.nodeName.toLowerCase()}[alt=${l(t.getAttribute("alt"))}]`,score:10});t.hasAttribute("role")&&n.push({engine:"css",selector:`${t.nodeName.toLocaleLowerCase()}[role=${l(t.getAttribute("role"))}]`,score:50});t.getAttribute("name")&&["BUTTON","FORM","FIELDSET","IFRAME","INPUT","KEYGEN","OBJECT","OUTPUT","SELECT","TEXTAREA","MAP","META","PARAM"].includes(t.nodeName)&&n.push({engine:"css",selector:`${t.nodeName.toLowerCase()}[name=${l(t.getAttribute("name"))}]`,score:50});["INPUT","TEXTAREA"].includes(t.nodeName)&&"hidden"!==t.getAttribute("type")&&t.getAttribute("type")&&n.push({engine:"css",selector:`${t.nodeName.toLowerCase()}[type=${l(t.getAttribute("type"))}]`,score:50});["INPUT","TEXTAREA","SELECT"].includes(t.nodeName)&&n.push({engine:"css",selector:t.nodeName.toLowerCase(),score:50});const r=t.getAttribute("id");r&&!function(e){let t,n=0;for(let r=0;r<e.length;++r){const o=e[r];let i;"-"!==o&&"_"!==o&&(i=o>="a"&&o<="z"?"lower":o>="A"&&o<="Z"?"upper":o>="0"&&o<="9"?"digit":"other","lower"!==i||"upper"!==t?(t&&t!==i&&++n,t=i):t=i)}return n>=e.length/4}(r)&&n.push({engine:"css",selector:u(r),score:100});return n.push({engine:"css",selector:t.nodeName.toLocaleLowerCase(),score:200}),n}(0,n).map(e=>[e]);let g=f(e,t.ownerDocument,n,[...p,...y],i);p=s(p);const m=t=>{const r=o&&!t.length,s=[...t,...y].filter(e=>!g||h(e)<h(g));let u=s[0];if(u)for(let t=c(n);t;t=c(t)){const o=a(t,r);if(!o)continue;if(g&&h([...o,...u])>=h(g))continue;if(u=f(e,t,n,s,i),!u)return;const c=[...o,...u];(!g||h(c)<h(g))&&(g=c)}};return m(p),n===t&&p.length&&m([]),g},a=(e,t)=>{const r=t?o:i;let s=r.get(e);return void 0===s&&(s=n(e,t),r.set(e,s)),s};return a(t,!0)}(e,t),y=p(n||[a(e,t)]),g=e.parseSelector(y);return{selector:y,elements:e.querySelectorAll(g,t.ownerDocument)}}finally{o.clear(),i.clear(),e._evaluator.end()}};var r=n(3);const o=new Map,i=new Map;function s(e){return e.filter(e=>"/"!==e[0].selector[0])}function c(e){return e.parentElement?e.parentElement:e.parentNode&&e.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&e.parentNode.host?e.parentNode.host:null}function u(e){return/^[a-zA-Z][a-zA-Z0-9\-\_]+$/.test(e)?"#"+e:`[id="${e}"]`}function a(e,t){const n=t.ownerDocument,r=[];function o(n){const o=r.slice();n&&o.unshift(n);const i=o.join(" "),s=e.parseSelector(i);return e.querySelector(s,t.ownerDocument,!1)===t?i:void 0}for(let e=t;e&&e!==n;e=c(e)){const t=e.nodeName.toLowerCase();let n="";if(e.id){const t=u(e.id),r=o(t);if(r)return{engine:"css",selector:r,score:1e7};n=t}const i=e.parentNode,s=[...e.classList];for(let e=0;e<s.length;++e){const t="."+s.slice(0,e+1).join("."),r=o(t);if(r)return{engine:"css",selector:r,score:1e7};if(!n&&i){1===i.querySelectorAll(t).length&&(n=t)}}if(i){const r=[...i.children],s=0===r.filter(e=>e.nodeName.toLowerCase()===t).indexOf(e)?t:`${t}:nth-child(${1+r.indexOf(e)})`,c=o(s);if(c)return{engine:"css",selector:c,score:1e7};n||(n=s)}else n||(n=t);r.unshift(n)}return{engine:"css",selector:o(),score:1e7}}function l(e){return`"${e.replace(/"/g,'\\"').replace(/\n/g,"\\n")}"`}function p(e){const t=[];let n="";for(const{engine:r,selector:o}of e)t.length&&("css"!==n||"css"!==r||o.startsWith(":nth-match("))&&t.push(">>"),n=r,"css"===r?t.push(o):t.push(`${r}=${o}`);return t.join(" ")}function h(e){let t=0;for(let n=0;n<e.length;n++)t+=e[n].score*(e.length-n);return t}function f(e,t,n,r,o){const i=r.map(e=>({tokens:e,score:h(e)}));i.sort((e,t)=>e.score-t.score);let s=null;for(const{tokens:r}of i){const i=e.parseSelector(p(r)),c=e.querySelectorAll(i,t),u=c.indexOf(n);if(0===u)return r;if(!o||s||-1===u||c.length>5)continue;const a=r.map(e=>"text"!==e.engine?e:e.selector.startsWith("/")&&e.selector.endsWith("/")?{engine:"css",selector:`:text-matches("${e.selector.substring(1,e.selector.length-1)}")`,score:e.score}:{engine:"css",selector:`:text("${e.selector}")`,score:e.score});s=[{engine:"css",selector:`:nth-match(${p(a)}, ${u+1})`,score:h(a)+1e3}]}return s}},,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ConsoleAPI=void 0;var r=n(5);class o{constructor(e){this._injectedScript=void 0,this._injectedScript=e,window.playwright||(window.playwright={$:(e,t)=>this._querySelector(e,!!t),$$:e=>this._querySelectorAll(e),inspect:e=>this._inspect(e),selector:e=>this._selector(e),resume:()=>this._resume()})}_querySelector(e,t){if("string"!=typeof e)throw new Error("Usage: playwright.query('Playwright >> selector').");const n=this._injectedScript.parseSelector(e);return this._injectedScript.querySelector(n,document,t)}_querySelectorAll(e){if("string"!=typeof e)throw new Error("Usage: playwright.$$('Playwright >> selector').");const t=this._injectedScript.parseSelector(e);return this._injectedScript.querySelectorAll(t,document)}_inspect(e){if("string"!=typeof e)throw new Error("Usage: playwright.inspect('Playwright >> selector').");window.inspect(this._querySelector(e,!1))}_selector(e){if(!(e instanceof Element))throw new Error("Usage: playwright.selector(element).");return(0,r.generateSelector)(this._injectedScript,e).selector}_resume(){window._playwrightResume().catch(()=>{})}}t.ConsoleAPI=o;var i=o;t.default=i}]).default;
\ No newline at end of file
diff --git a/node_modules/playwright/lib/server/injected/packed/injectedScriptSource.js b/node_modules/playwright/lib/server/injected/packed/injectedScriptSource.js
new file mode 100644
index 0000000..59382b2
--- /dev/null
+++ b/node_modules/playwright/lib/server/injected/packed/injectedScriptSource.js
@@ -0,0 +1 @@
+var pwExport=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=9)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseSelector=function(e){const t=function(e){let t,n=0,r=0;const o={parts:[]},i=()=>{const t=e.substring(r,n).trim(),i=t.indexOf("=");let s,c;-1!==i&&t.substring(0,i).trim().match(/^[a-zA-Z_0-9-+:*]+$/)?(s=t.substring(0,i).trim(),c=t.substring(i+1)):t.length>1&&'"'===t[0]&&'"'===t[t.length-1]||t.length>1&&"'"===t[0]&&"'"===t[t.length-1]?(s="text",c=t):/^\(*\/\//.test(t)||t.startsWith("..")?(s="xpath",c=t):(s="css",c=t);let u=!1;if("*"===s[0]&&(u=!0,s=s.substring(1)),o.parts.push({name:s,body:c}),u){if(void 0!==o.capture)throw new Error("Only one of the selectors can capture using * modifier");o.capture=o.parts.length-1}};if(!e.includes(">>"))return n=e.length,i(),o;for(;n<e.length;){const o=e[n];"\\"===o&&n+1<e.length?n+=2:o===t?(t=void 0,n++):t||'"'!==o&&"'"!==o&&"`"!==o?t||">"!==o||">"!==e[n+1]?n++:(i(),n+=2,r=n):(t=o,n++)}return i(),o}(e),n=t.parts.map(e=>{if("css"===e.name||"css:light"===e.name){"css:light"===e.name&&(e.body=":light("+e.body+")");return{name:"css",body:(0,r.parseCSS)(e.body,o).selector}}return e});return{capture:t.capture,parts:n}},t.customCSSNames=void 0;var r=n(1);const o=new Set(["not","is","where","has","scope","light","visible","text","text-matches","text-is","has-text","above","below","right-of","left-of","near","nth-match"]);t.customCSSNames=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseCSS=function(e,t){let n;try{n=r.tokenize(e),n[n.length-1]instanceof r.EOFToken||n.push(new r.EOFToken)}catch(t){const n=t.message+` while parsing selector "${e}"`,r=(t.stack||"").indexOf(t.message);throw-1!==r&&(t.stack=t.stack.substring(0,r)+n+t.stack.substring(r+t.message.length)),t.message=n,t}const o=n.find(e=>e instanceof r.AtKeywordToken||e instanceof r.BadStringToken||e instanceof r.BadURLToken||e instanceof r.ColumnToken||e instanceof r.CDOToken||e instanceof r.CDCToken||e instanceof r.SemicolonToken||e instanceof r.OpenCurlyToken||e instanceof r.CloseCurlyToken||e instanceof r.URLToken||e instanceof r.PercentageToken);if(o)throw new Error(`Unsupported token "${o.toSource()}" while parsing selector "${e}"`);let i=0;const s=new Set;function c(){return new Error(`Unexpected token "${n[i].toSource()}" while parsing selector "${e}"`)}function u(){for(;n[i]instanceof r.WhitespaceToken;)i++}function a(e=i){return n[e]instanceof r.IdentToken}function l(e=i){return n[e]instanceof r.CommaToken}function p(e=i){return n[e]instanceof r.CloseParenToken}function h(e=i){return n[e]instanceof r.DelimToken&&"*"===n[e].value}function f(e=i){return n[e]instanceof r.EOFToken}function d(e=i){return n[e]instanceof r.DelimToken&&[">","+","~"].includes(n[e].value)}function m(e=i){return l(e)||p(e)||f(e)||d(e)||n[e]instanceof r.WhitespaceToken}function y(){const e=[g()];for(;u(),l();)i++,e.push(g());return e}function g(){return u(),function(e=i){return n[e]instanceof r.NumberToken}()||function(e=i){return n[e]instanceof r.StringToken}()?n[i++].value:function(){u();const e={simples:[{selector:v(),combinator:""}]};for(;;){if(u(),d())e.simples[e.simples.length-1].combinator=n[i++].value,u();else if(m())break;e.simples.push({combinator:"",selector:v()})}return e}()}function v(){let e="";const o=[];for(;!m();)if(a()||h())e+=n[i++].toSource();else if(n[i]instanceof r.HashToken)e+=n[i++].toSource();else if(n[i]instanceof r.DelimToken&&"."===n[i].value){if(i++,!a())throw c();e+="."+n[i++].toSource()}else if(n[i]instanceof r.ColonToken)if(i++,a())if(t.has(n[i].value.toLowerCase())){const e=n[i++].value.toLowerCase();o.push({name:e,args:[]}),s.add(e)}else e+=":"+n[i++].toSource();else{if(!(n[i]instanceof r.FunctionToken))throw c();{const r=n[i++].value.toLowerCase();if(t.has(r)?(o.push({name:r,args:y()}),s.add(r)):e+=`:${r}(${w()})`,u(),!p())throw c();i++}}else{if(!(n[i]instanceof r.OpenSquareToken))throw c();for(e+="[",i++;!(n[i]instanceof r.CloseSquareToken||f());)e+=n[i++].toSource();if(!(n[i]instanceof r.CloseSquareToken))throw c();e+="]",i++}if(!e&&!o.length)throw c();return{css:e||void 0,functions:o}}function w(){let e="";for(;!p()&&!f();)e+=n[i++].toSource();return e}const b=y();if(!f())throw new Error(`Error while parsing selector "${e}"`);if(b.some(e=>"object"!=typeof e||!("simples"in e)))throw new Error(`Error while parsing selector "${e}"`);return{selector:b,names:Array.from(s)}},t.serializeSelector=function e(t){return t.map(t=>"string"==typeof t?`"${t}"`:"number"==typeof t?String(t):t.simples.map(({selector:t,combinator:n})=>{let r=t.css||"";return r+=t.functions.map(t=>`:${t.name}(${e(t.args)})`).join(""),n&&(r+=" "+n),r}).join(" ")).join(", ")};var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=o(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var c=i?Object.getOwnPropertyDescriptor(e,s):null;c&&(c.get||c.set)?Object.defineProperty(r,s,c):r[s]=e[s]}r.default=e,n&&n.set(e,r);return r}(n(2));function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(o=function(e){return e?n:t})(e)}},function(e,t,n){"use strict";var r,o,i;o=[t],void 0===(i="function"==typeof(r=function(e){var t=function(e,t,n){return e>=t&&e<=n};function n(e){return t(e,48,57)}function r(e){return n(e)||t(e,65,70)||t(e,97,102)}function o(e){return function(e){return t(e,65,90)}(e)||function(e){return t(e,97,122)}(e)}function i(e){return o(e)||function(e){return e>=128}(e)||95==e}function s(e){return i(e)||n(e)||45==e}function c(e){return t(e,0,8)||11==e||t(e,14,31)||127==e}function u(e){return 10==e}function a(e){return u(e)||9==e||32==e}var l=function(e){this.message=e};function p(e){if(e<=65535)return String.fromCharCode(e);e-=Math.pow(2,16);var t=Math.floor(e/Math.pow(2,10))+55296,n=e%Math.pow(2,10)+56320;return String.fromCharCode(t)+String.fromCharCode(n)}function h(){throw"Abstract Base Class"}function f(){return this}function d(){return this}function m(){return this}function y(){return this}function g(){return this}function v(){return this}function w(){return this}function b(){return this}function _(){throw"Abstract Base Class"}function E(){return this.value="{",this.mirror="}",this}function S(){return this.value="}",this.mirror="{",this}function T(){return this.value="[",this.mirror="]",this}function k(){return this.value="]",this.mirror="[",this}function C(){return this.value="(",this.mirror=")",this}function N(){return this.value=")",this.mirror="(",this}function x(){return this}function O(){return this}function A(){return this}function M(){return this}function R(){return this}function P(){return this}function j(){return this}function D(e){return this.value=p(e),this}function q(){throw"Abstract Base Class"}function I(e){this.value=e}function L(e){this.value=e,this.mirror=")"}function $(e){this.value=e}function U(e){this.value=e,this.type="unrestricted"}function W(e){this.value=e}function B(e){this.value=e}function F(){this.value=null,this.type="integer",this.repr=""}function H(){this.value=null,this.repr=""}function V(){this.value=null,this.type="integer",this.repr="",this.unit=""}function J(e){for(var n="",r=(e=""+e).charCodeAt(0),o=0;o<e.length;o++){var i=e.charCodeAt(o);if(0==i)throw new l("Invalid character: the input contains U+0000.");t(i,1,31)||127==i||0==o&&t(i,48,57)||1==o&&t(i,48,57)&&45==r?n+="\\"+i.toString(16)+" ":i>=128||45==i||95==i||t(i,48,57)||t(i,65,90)||t(i,97,122)?n+=e[o]:n+="\\"+e[o]}return n}function Q(e){e=""+e;for(var n="",r=0;r<e.length;r++){var o=e.charCodeAt(r);if(0==o)throw new l("Invalid character: the input contains U+0000.");t(o,1,31)||127==o?n+="\\"+o.toString(16)+" ":n+=34==o||92==o?"\\"+e[r]:e[r]}return n}(l.prototype=new Error).name="InvalidCharacterError",h.prototype.toJSON=function(){return{token:this.tokenType}},h.prototype.toString=function(){return this.tokenType},h.prototype.toSource=function(){return""+this},f.prototype=Object.create(h.prototype),f.prototype.tokenType="BADSTRING",d.prototype=Object.create(h.prototype),d.prototype.tokenType="BADURL",m.prototype=Object.create(h.prototype),m.prototype.tokenType="WHITESPACE",m.prototype.toString=function(){return"WS"},m.prototype.toSource=function(){return" "},y.prototype=Object.create(h.prototype),y.prototype.tokenType="CDO",y.prototype.toSource=function(){return"\x3c!--"},g.prototype=Object.create(h.prototype),g.prototype.tokenType="CDC",g.prototype.toSource=function(){return"--\x3e"},v.prototype=Object.create(h.prototype),v.prototype.tokenType=":",w.prototype=Object.create(h.prototype),w.prototype.tokenType=";",b.prototype=Object.create(h.prototype),b.prototype.tokenType=",",_.prototype=Object.create(h.prototype),E.prototype=Object.create(_.prototype),E.prototype.tokenType="{",S.prototype=Object.create(_.prototype),S.prototype.tokenType="}",T.prototype=Object.create(_.prototype),T.prototype.tokenType="[",k.prototype=Object.create(_.prototype),k.prototype.tokenType="]",C.prototype=Object.create(_.prototype),C.prototype.tokenType="(",N.prototype=Object.create(_.prototype),N.prototype.tokenType=")",x.prototype=Object.create(h.prototype),x.prototype.tokenType="~=",O.prototype=Object.create(h.prototype),O.prototype.tokenType="|=",A.prototype=Object.create(h.prototype),A.prototype.tokenType="^=",M.prototype=Object.create(h.prototype),M.prototype.tokenType="$=",R.prototype=Object.create(h.prototype),R.prototype.tokenType="*=",P.prototype=Object.create(h.prototype),P.prototype.tokenType="||",j.prototype=Object.create(h.prototype),j.prototype.tokenType="EOF",j.prototype.toSource=function(){return""},D.prototype=Object.create(h.prototype),D.prototype.tokenType="DELIM",D.prototype.toString=function(){return"DELIM("+this.value+")"},D.prototype.toJSON=function(){var e=this.constructor.prototype.constructor.prototype.toJSON.call(this);return e.value=this.value,e},D.prototype.toSource=function(){return"\\"==this.value?"\\\n":this.value},q.prototype=Object.create(h.prototype),q.prototype.ASCIIMatch=function(e){return this.value.toLowerCase()==e.toLowerCase()},q.prototype.toJSON=function(){var e=this.constructor.prototype.constructor.prototype.toJSON.call(this);return e.value=this.value,e},I.prototype=Object.create(q.prototype),I.prototype.tokenType="IDENT",I.prototype.toString=function(){return"IDENT("+this.value+")"},I.prototype.toSource=function(){return J(this.value)},L.prototype=Object.create(q.prototype),L.prototype.tokenType="FUNCTION",L.prototype.toString=function(){return"FUNCTION("+this.value+")"},L.prototype.toSource=function(){return J(this.value)+"("},$.prototype=Object.create(q.prototype),$.prototype.tokenType="AT-KEYWORD",$.prototype.toString=function(){return"AT("+this.value+")"},$.prototype.toSource=function(){return"@"+J(this.value)},U.prototype=Object.create(q.prototype),U.prototype.tokenType="HASH",U.prototype.toString=function(){return"HASH("+this.value+")"},U.prototype.toJSON=function(){var e=this.constructor.prototype.constructor.prototype.toJSON.call(this);return e.value=this.value,e.type=this.type,e},U.prototype.toSource=function(){return"id"==this.type?"#"+J(this.value):"#"+function(e){for(var n="",r=((e=""+e).charCodeAt(0),0);r<e.length;r++){var o=e.charCodeAt(r);if(0==o)throw new l("Invalid character: the input contains U+0000.");o>=128||45==o||95==o||t(o,48,57)||t(o,65,90)||t(o,97,122)?n+=e[r]:n+="\\"+o.toString(16)+" "}return n}(this.value)},W.prototype=Object.create(q.prototype),W.prototype.tokenType="STRING",W.prototype.toString=function(){return'"'+Q(this.value)+'"'},B.prototype=Object.create(q.prototype),B.prototype.tokenType="URL",B.prototype.toString=function(){return"URL("+this.value+")"},B.prototype.toSource=function(){return'url("'+Q(this.value)+'")'},F.prototype=Object.create(h.prototype),F.prototype.tokenType="NUMBER",F.prototype.toString=function(){return"integer"==this.type?"INT("+this.value+")":"NUMBER("+this.value+")"},F.prototype.toJSON=function(){var e=this.constructor.prototype.constructor.prototype.toJSON.call(this);return e.value=this.value,e.type=this.type,e.repr=this.repr,e},F.prototype.toSource=function(){return this.repr},H.prototype=Object.create(h.prototype),H.prototype.tokenType="PERCENTAGE",H.prototype.toString=function(){return"PERCENTAGE("+this.value+")"},H.prototype.toJSON=function(){var e=this.constructor.prototype.constructor.prototype.toJSON.call(this);return e.value=this.value,e.repr=this.repr,e},H.prototype.toSource=function(){return this.repr+"%"},V.prototype=Object.create(h.prototype),V.prototype.tokenType="DIMENSION",V.prototype.toString=function(){return"DIM("+this.value+","+this.unit+")"},V.prototype.toJSON=function(){var e=this.constructor.prototype.constructor.prototype.toJSON.call(this);return e.value=this.value,e.type=this.type,e.repr=this.repr,e.unit=this.unit,e},V.prototype.toSource=function(){var e=this.repr,n=J(this.unit);return"e"!=n[0].toLowerCase()||"-"!=n[1]&&!t(n.charCodeAt(1),48,57)||(n="\\65 "+n.slice(1,n.length)),e+n},e.tokenize=function(e){e=function(e){for(var n=[],r=0;r<e.length;r++){var o=e.charCodeAt(r);if(13==o&&10==e.charCodeAt(r+1)&&(o=10,r++),13!=o&&12!=o||(o=10),0==o&&(o=65533),t(o,55296,56319)&&t(e.charCodeAt(r+1),56320,57343)){var i=o-55296,s=e.charCodeAt(r+1)-56320;o=Math.pow(2,16)+i*Math.pow(2,10)+s,r++}n.push(o)}return n}(e);for(var o,l=-1,h=[],_=0,q=0,J=0,Q={line:_,column:q},X=function(t){return t>=e.length?-1:e[t]},G=function(e){if(void 0===e&&(e=1),e>3)throw"Spec Error: no more than three codepoints of lookahead.";return X(l+e)},z=function(e){return void 0===e&&(e=1),u(o=X(l+=e))?(_+=1,J=q,q=0):q+=e,!0},Y=function(){return l-=1,u(o)?(_-=1,q=J):q-=1,Q.line=_,Q.column=q,!0},K=function(e){return void 0===e&&(e=o),-1==e},Z=function(){return console.log("Parse error at index "+l+", processing codepoint 0x"+o.toString(16)+"."),!0},ee=function(){if(te(),z(),a(o)){for(;a(G());)z();return new m}if(34==o)return oe();if(35==o){if(s(G())||ce(G(1),G(2))){var e=new U;return ae(G(1),G(2),G(3))&&(e.type="id"),e.value=he(),e}return new D(o)}return 36==o?61==G()?(z(),new M):new D(o):39==o?oe():40==o?new C:41==o?new N:42==o?61==G()?(z(),new R):new D(o):43==o?pe()?(Y(),ne()):new D(o):44==o?new b:45==o?pe()?(Y(),ne()):45==G(1)&&62==G(2)?(z(2),new g):le()?(Y(),re()):new D(o):46==o?pe()?(Y(),ne()):new D(o):58==o?new v:59==o?new w:60==o?33==G(1)&&45==G(2)&&45==G(3)?(z(3),new y):new D(o):64==o?ae(G(1),G(2),G(3))?new $(he()):new D(o):91==o?new T:92==o?ue()?(Y(),re()):(Z(),new D(o)):93==o?new k:94==o?61==G()?(z(),new A):new D(o):123==o?new E:124==o?61==G()?(z(),new O):124==G()?(z(),new P):new D(o):125==o?new S:126==o?61==G()?(z(),new x):new D(o):n(o)?(Y(),ne()):i(o)?(Y(),re()):K()?new j:new D(o)},te=function(){for(;47==G(1)&&42==G(2);)for(z(2);;){if(z(),42==o&&47==G()){z();break}if(K())return void Z()}},ne=function(){var e,t=fe();return ae(G(1),G(2),G(3))?((e=new V).value=t.value,e.repr=t.repr,e.type=t.type,e.unit=he(),e):37==G()?(z(),(e=new H).value=t.value,e.repr=t.repr,e):((e=new F).value=t.value,e.repr=t.repr,e.type=t.type,e)},re=function(){var e=he();if("url"==e.toLowerCase()&&40==G()){for(z();a(G(1))&&a(G(2));)z();return 34==G()||39==G()?new L(e):!a(G())||34!=G(2)&&39!=G(2)?ie():new L(e)}return 40==G()?(z(),new L(e)):new I(e)},oe=function(e){void 0===e&&(e=o);for(var t="";z();){if(o==e||K())return new W(t);if(u(o))return Z(),Y(),new f;92==o?K(G())||(u(G())?z():t+=p(se())):t+=p(o)}},ie=function(){for(var e=new B("");a(G());)z();if(K(G()))return e;for(;z();){if(41==o||K())return e;if(a(o)){for(;a(G());)z();return 41==G()||K(G())?(z(),e):(me(),new d)}if(34==o||39==o||40==o||c(o))return Z(),me(),new d;if(92==o){if(!ue())return Z(),me(),new d;e.value+=p(se())}else e.value+=p(o)}},se=function(){if(z(),r(o)){for(var e=[o],t=0;t<5&&r(G());t++)z(),e.push(o);a(G())&&z();var n=parseInt(e.map((function(e){return String.fromCharCode(e)})).join(""),16);return n>1114111&&(n=65533),n}return K()?65533:o},ce=function(e,t){return 92==e&&!u(t)},ue=function(){return ce(o,G())},ae=function(e,t,n){return 45==e?i(t)||45==t||ce(t,n):!!i(e)||92==e&&ce(e,t)},le=function(){return ae(o,G(1),G(2))},pe=function(){return e=o,t=G(1),r=G(2),43==e||45==e?!!n(t)||!(46!=t||!n(r)):46==e?!!n(t):!!n(e);var e,t,r},he=function(){for(var e="";z();)if(s(o))e+=p(o);else{if(!ue())return Y(),e;e+=p(se())}},fe=function(){var e=[],t="integer";for(43!=G()&&45!=G()||(z(),e+=p(o));n(G());)z(),e+=p(o);if(46==G(1)&&n(G(2)))for(z(),e+=p(o),z(),e+=p(o),t="number";n(G());)z(),e+=p(o);var r=G(1),i=G(2),s=G(3);if(69!=r&&101!=r||!n(i)){if((69==r||101==r)&&(43==i||45==i)&&n(s))for(z(),e+=p(o),z(),e+=p(o),z(),e+=p(o),t="number";n(G());)z(),e+=p(o)}else for(z(),e+=p(o),z(),e+=p(o),t="number";n(G());)z(),e+=p(o);return{type:t,value:de(e),repr:e}},de=function(e){return+e},me=function(){for(;z();){if(41==o||K())return;ue()&&se()}},ye=0;!K(G());)if(h.push(ee()),++ye>2*e.length)return"I'm infinite-looping!";return h},e.IdentToken=I,e.FunctionToken=L,e.AtKeywordToken=$,e.HashToken=U,e.StringToken=W,e.BadStringToken=f,e.URLToken=B,e.BadURLToken=d,e.DelimToken=D,e.NumberToken=F,e.PercentageToken=H,e.DimensionToken=V,e.IncludeMatchToken=x,e.DashMatchToken=O,e.PrefixMatchToken=A,e.SuffixMatchToken=M,e.SubstringMatchToken=R,e.ColumnToken=P,e.WhitespaceToken=m,e.CDOToken=y,e.CDCToken=g,e.ColonToken=v,e.SemicolonToken=w,e.CommaToken=b,e.OpenParenToken=C,e.CloseParenToken=N,e.OpenSquareToken=T,e.CloseSquareToken=k,e.OpenCurlyToken=E,e.CloseCurlyToken=S,e.EOFToken=j,e.CSSParserToken=h,e.GroupingToken=_})?r.apply(t,o):r)||(e.exports=i)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createLaxTextMatcher=d,t.createStrictTextMatcher=m,t.createRegexTextMatcher=y,t.elementText=v,t.elementMatchesText=w,t.parentElementOrShadowHost=N,t.isVisible=A,t.SelectorEvaluatorImpl=void 0;var r=n(0);t.SelectorEvaluatorImpl=class{constructor(e){this._engines=new Map,this._cacheQueryCSS=new Map,this._cacheMatches=new Map,this._cacheQuery=new Map,this._cacheMatchesSimple=new Map,this._cacheMatchesParents=new Map,this._cacheCallMatches=new Map,this._cacheCallQuery=new Map,this._cacheQuerySimple=new Map,this._cacheText=new Map,this._scoreMap=void 0,this._retainCacheCounter=0;for(const[t,n]of e)this._engines.set(t,n);this._engines.set("not",c),this._engines.set("is",o),this._engines.set("where",o),this._engines.set("has",i),this._engines.set("scope",s),this._engines.set("light",u),this._engines.set("visible",a),this._engines.set("text",l),this._engines.set("text-is",p),this._engines.set("text-matches",h),this._engines.set("has-text",f),this._engines.set("right-of",k("right-of",b)),this._engines.set("left-of",k("left-of",_)),this._engines.set("above",k("above",E)),this._engines.set("below",k("below",S)),this._engines.set("near",k("near",T)),this._engines.set("nth-match",C);const t=[...this._engines.keys()];t.sort();const n=[...r.customCSSNames];if(n.sort(),t.join("|")!==n.join("|"))throw new Error(`Please keep customCSSNames in sync with evaluator engines: ${t.join("|")} vs ${n.join("|")}`)}begin(){++this._retainCacheCounter}end(){--this._retainCacheCounter,this._retainCacheCounter||(this._cacheQueryCSS.clear(),this._cacheMatches.clear(),this._cacheQuery.clear(),this._cacheMatchesSimple.clear(),this._cacheMatchesParents.clear(),this._cacheCallMatches.clear(),this._cacheCallQuery.clear(),this._cacheQuerySimple.clear(),this._cacheText.clear())}_cached(e,t,n,r){e.has(t)||e.set(t,[]);const o=e.get(t),i=o.find(e=>n.every((t,n)=>e.rest[n]===t));if(i)return i.result;const s=r();return o.push({rest:n,result:s}),s}_checkSelector(e){if(!("object"==typeof e&&e&&(Array.isArray(e)||"simples"in e&&e.simples.length)))throw new Error(`Malformed selector "${e}"`);return e}matches(e,t,n){const r=this._checkSelector(t);this.begin();try{return this._cached(this._cacheMatches,e,[r,n.scope,n.pierceShadow],()=>Array.isArray(r)?this._matchesEngine(o,e,r,n):!!this._matchesSimple(e,r.simples[r.simples.length-1].selector,n)&&this._matchesParents(e,r,r.simples.length-2,n))}finally{this.end()}}query(e,t){const n=this._checkSelector(t);this.begin();try{return this._cached(this._cacheQuery,n,[e.scope,e.pierceShadow],()=>{if(Array.isArray(n))return this._queryEngine(o,e,n);const t=this._scoreMap;this._scoreMap=new Map;let r=this._querySimple(e,n.simples[n.simples.length-1].selector);return r=r.filter(t=>this._matchesParents(t,n,n.simples.length-2,e)),this._scoreMap.size&&r.sort((e,t)=>{const n=this._scoreMap.get(e),r=this._scoreMap.get(t);return n===r?0:void 0===n?1:void 0===r?-1:n-r}),this._scoreMap=t,r})}finally{this.end()}}_markScore(e,t){this._scoreMap&&this._scoreMap.set(e,t)}_matchesSimple(e,t,n){return this._cached(this._cacheMatchesSimple,e,[t,n.scope,n.pierceShadow],()=>{if(!t.functions.some(e=>"scope"===e.name||"is"===e.name)&&e===n.scope)return!1;if(t.css&&!this._matchesCSS(e,t.css))return!1;for(const r of t.functions)if(!this._matchesEngine(this._getEngine(r.name),e,r.args,n))return!1;return!0})}_querySimple(e,t){return t.functions.length?this._cached(this._cacheQuerySimple,t,[e.scope,e.pierceShadow],()=>{let n=t.css;const r=t.functions;let o;"*"===n&&r.length&&(n=void 0);let i=-1;void 0!==n?o=this._queryCSS(e,n):(i=r.findIndex(e=>void 0!==this._getEngine(e.name).query),-1===i&&(i=0),o=this._queryEngine(this._getEngine(r[i].name),e,r[i].args));for(let t=0;t<r.length;t++){if(t===i)continue;const n=this._getEngine(r[t].name);void 0!==n.matches&&(o=o.filter(o=>this._matchesEngine(n,o,r[t].args,e)))}for(let t=0;t<r.length;t++){if(t===i)continue;const n=this._getEngine(r[t].name);void 0===n.matches&&(o=o.filter(o=>this._matchesEngine(n,o,r[t].args,e)))}return o}):this._queryCSS(e,t.css||"*")}_matchesParents(e,t,n,r){return n<0||this._cached(this._cacheMatchesParents,e,[t,n,r.scope,r.pierceShadow],()=>{const{selector:o,combinator:i}=t.simples[n];if(">"===i){const i=x(e,r);return!(!i||!this._matchesSimple(i,o,r))&&this._matchesParents(i,t,n-1,r)}if("+"===i){const i=O(e,r);return!(!i||!this._matchesSimple(i,o,r))&&this._matchesParents(i,t,n-1,r)}if(""===i){let i=x(e,r);for(;i;){if(this._matchesSimple(i,o,r)){if(this._matchesParents(i,t,n-1,r))return!0;if(""===t.simples[n-1].combinator)break}i=x(i,r)}return!1}if("~"===i){let i=O(e,r);for(;i;){if(this._matchesSimple(i,o,r)){if(this._matchesParents(i,t,n-1,r))return!0;if("~"===t.simples[n-1].combinator)break}i=O(i,r)}return!1}if(">="===i){let i=e;for(;i;){if(this._matchesSimple(i,o,r)){if(this._matchesParents(i,t,n-1,r))return!0;if(""===t.simples[n-1].combinator)break}i=x(i,r)}return!1}throw new Error(`Unsupported combinator "${i}"`)})}_matchesEngine(e,t,n,r){if(e.matches)return this._callMatches(e,t,n,r);if(e.query)return this._callQuery(e,n,r).includes(t);throw new Error('Selector engine should implement "matches" or "query"')}_queryEngine(e,t,n){if(e.query)return this._callQuery(e,n,t);if(e.matches)return this._queryCSS(t,"*").filter(r=>this._callMatches(e,r,n,t));throw new Error('Selector engine should implement "matches" or "query"')}_callMatches(e,t,n,r){return this._cached(this._cacheCallMatches,t,[e,r.scope,r.pierceShadow,...n],()=>e.matches(t,n,r,this))}_callQuery(e,t,n){return this._cached(this._cacheCallQuery,e,[n.scope,n.pierceShadow,...t],()=>e.query(n,t,this))}_matchesCSS(e,t){return e.matches(t)}_queryCSS(e,t){return this._cached(this._cacheQueryCSS,t,[e.scope,e.pierceShadow],()=>{let n=[];return function r(o){if(n=n.concat([...o.querySelectorAll(t)]),e.pierceShadow){o.shadowRoot&&r(o.shadowRoot);for(const e of o.querySelectorAll("*"))e.shadowRoot&&r(e.shadowRoot)}}(e.scope),n})}_getEngine(e){const t=this._engines.get(e);if(!t)throw new Error(`Unknown selector engine "${e}"`);return t}};const o={matches(e,t,n,r){if(0===t.length)throw new Error('"is" engine expects non-empty selector list');return t.some(t=>r.matches(e,t,n))},query(e,t,n){if(0===t.length)throw new Error('"is" engine expects non-empty selector list');let r=[];for(const o of t)r=r.concat(n.query(e,o));return 1===t.length?r:function(e){const t=new Map,n=[],r=[];return e.forEach(e=>(function e(r){let o=t.get(r);if(o)return o;const i=N(r);if(i){e(i).children.push(r)}else n.push(r);return o={children:[],taken:!1},t.set(r,o),o}(e)).taken=!0),n.forEach((function e(n){const o=t.get(n);o.taken&&r.push(n);if(o.children.length>1){const e=new Set(o.children);o.children=[];let t=n.firstElementChild;for(;t&&o.children.length<e.size;)e.has(t)&&o.children.push(t),t=t.nextElementSibling;for(t=n.shadowRoot?n.shadowRoot.firstElementChild:null;t&&o.children.length<e.size;)e.has(t)&&o.children.push(t),t=t.nextElementSibling}o.children.forEach(e)})),r}(r)}},i={matches(e,t,n,r){if(0===t.length)throw new Error('"has" engine expects non-empty selector list');return r.query({...n,scope:e},t).length>0}},s={matches(e,t,n,r){if(0!==t.length)throw new Error('"scope" engine expects no arguments');return 9===n.scope.nodeType?e===n.scope.documentElement:e===n.scope},query(e,t,n){if(0!==t.length)throw new Error('"scope" engine expects no arguments');if(9===e.scope.nodeType){const t=e.scope.documentElement;return t?[t]:[]}return 1===e.scope.nodeType?[e.scope]:[]}},c={matches(e,t,n,r){if(0===t.length)throw new Error('"not" engine expects non-empty selector list');return!r.matches(e,t,n)}},u={query:(e,t,n)=>n.query({...e,pierceShadow:!1},t),matches:(e,t,n,r)=>r.matches(e,t,{...n,pierceShadow:!1})},a={matches(e,t,n,r){if(t.length)throw new Error('"visible" engine expects no arguments');return A(e)}},l={matches(e,t,n,r){if(1!==t.length||"string"!=typeof t[0])throw new Error('"text" engine expects a single string');return"self"===w(r,e,d(t[0]))}},p={matches(e,t,n,r){if(1!==t.length||"string"!=typeof t[0])throw new Error('"text-is" engine expects a single string');return"none"!==w(r,e,m(t[0]))}},h={matches(e,t,n,r){if(0===t.length||"string"!=typeof t[0]||t.length>2||2===t.length&&"string"!=typeof t[1])throw new Error('"text-matches" engine expects a regexp body and optional regexp flags');return"self"===w(r,e,y(t[0],2===t.length?t[1]:void 0))}},f={matches(e,t,n,r){if(1!==t.length||"string"!=typeof t[0])throw new Error('"has-text" engine expects a single string');if(g(e))return!1;return d(t[0])(v(r,e))}};function d(e){return e=e.trim().replace(/\s+/g," ").toLowerCase(),t=>t.full.trim().replace(/\s+/g," ").toLowerCase().includes(e)}function m(e){return e=e.trim().replace(/\s+/g," "),t=>t.immediate.some(t=>t.trim().replace(/\s+/g," ")===e)}function y(e,t){const n=new RegExp(e,t);return e=>n.test(e.full)}function g(e){return"SCRIPT"===e.nodeName||"STYLE"===e.nodeName||document.head&&document.head.contains(e)}function v(e,t){let n=e._cacheText.get(t);if(void 0===n){if(n={full:"",immediate:[]},!g(t)){let r="";if(t instanceof HTMLInputElement&&("submit"===t.type||"button"===t.type))n={full:t.value,immediate:[t.value]};else{for(let o=t.firstChild;o;o=o.nextSibling)o.nodeType===Node.TEXT_NODE?(n.full+=o.nodeValue||"",r+=o.nodeValue||""):(r&&n.immediate.push(r),r="",o.nodeType===Node.ELEMENT_NODE&&(n.full+=v(e,o).full));r&&n.immediate.push(r),t.shadowRoot&&(n.full+=v(e,t.shadowRoot).full)}}e._cacheText.set(t,n)}return n}function w(e,t,n){if(g(t))return"none";if(!n(v(e,t)))return"none";for(let r=t.firstChild;r;r=r.nextSibling)if(r.nodeType===Node.ELEMENT_NODE&&n(v(e,r)))return"selfAndChildren";return t.shadowRoot&&n(v(e,t.shadowRoot))?"selfAndChildren":"self"}function b(e,t,n){const r=e.left-t.right;if(!(r<0||void 0!==n&&r>n))return r+Math.max(t.bottom-e.bottom,0)+Math.max(e.top-t.top,0)}function _(e,t,n){const r=t.left-e.right;if(!(r<0||void 0!==n&&r>n))return r+Math.max(t.bottom-e.bottom,0)+Math.max(e.top-t.top,0)}function E(e,t,n){const r=t.top-e.bottom;if(!(r<0||void 0!==n&&r>n))return r+Math.max(e.left-t.left,0)+Math.max(t.right-e.right,0)}function S(e,t,n){const r=e.top-t.bottom;if(!(r<0||void 0!==n&&r>n))return r+Math.max(e.left-t.left,0)+Math.max(t.right-e.right,0)}function T(e,t,n){const r=void 0===n?50:n;let o=0;return e.left-t.right>=0&&(o+=e.left-t.right),t.left-e.right>=0&&(o+=t.left-e.right),t.top-e.bottom>=0&&(o+=t.top-e.bottom),e.top-t.bottom>=0&&(o+=e.top-t.bottom),o>r?void 0:o}function k(e,t){return{matches(n,r,o,i){const s=r.length&&"number"==typeof r[r.length-1]?r[r.length-1]:void 0,c=void 0===s?r:r.slice(0,r.length-1);if(r.length<1+(void 0===s?0:1))throw new Error(`"${e}" engine expects a selector list and optional maximum distance in pixels`);const u=n.getBoundingClientRect();let a;for(const e of i.query(o,c)){if(e===n)continue;const r=t(u,e.getBoundingClientRect(),s);void 0!==r&&((void 0===a||r<a)&&(a=r))}return void 0!==a&&(i._markScore(n,a),!0)}}}const C={query(e,t,n){let r=t[t.length-1];if(t.length<2)throw new Error('"nth-match" engine expects non-empty selector list and an index argument');if("number"!=typeof r||r<1)throw new Error('"nth-match" engine expects a one-based index as the last argument');const i=o.query(e,t.slice(0,t.length-1),n);return r--,r<i.length?[i[r]]:[]}};function N(e){return e.parentElement?e.parentElement:e.parentNode&&e.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&e.parentNode.host?e.parentNode.host:void 0}function x(e,t){if(e!==t.scope)return t.pierceShadow?N(e):e.parentElement||void 0}function O(e,t){if(e!==t.scope)return e.previousElementSibling||void 0}function A(e){if(!e.ownerDocument||!e.ownerDocument.defaultView)return!0;const t=e.ownerDocument.defaultView.getComputedStyle(e);if(!t||"hidden"===t.visibility)return!1;const n=e.getBoundingClientRect();return n.width>0&&n.height>0}},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.checkComponentAttribute=function(e,t){for(const n of t.jsonPath)null!=e&&(e=e[n]);const n="string"!=typeof e||t.caseSensetive?e:e.toUpperCase(),r="string"!=typeof t.value||t.caseSensetive?t.value:t.value.toUpperCase();return"<truthy>"===t.op?!!n:"="===t.op?n===r:"string"==typeof n&&"string"==typeof r&&("*="===t.op?n.includes(r):"^="===t.op?n.startsWith(r):"$="===t.op?n.endsWith(r):"|="===t.op?n===r||n.startsWith(r+"-"):"~="===t.op&&n.split(" ").includes(r))},t.parseComponentSelector=function(e){let t=0,n=0===e.length;const r=()=>e[t]||"",o=()=>{const o=r();return++t,n=t>=e.length,o},i=o=>{if(n)throw new Error(`Unexpected end of selector while parsing selector \`${e}\``);throw new Error(`Error while parsing selector \`${e}\` - unexpected symbol "${r()}" at position ${t}`+(o?" during "+o:""))};function s(){for(;!n&&/\s/.test(r());)o()}function c(){let e="";for(s();!n&&/[-$0-9A-Z_]/i.test(r());)e+=o();return e}function u(e){let t=o();for(t!==e&&i("parsing quoted string");!n&&r()!==e;)"\\"===r()&&o(),t+=o();return r()!==e&&i("parsing quoted string"),t+=o(),t}function a(){let e="";return s(),e="'"===r()||'"'===r()?u(r()).slice(1,-1):c(),e||i("parsing property path"),e}function l(){o();const t=[];for(t.push(a()),s();"."===r();)o(),t.push(a()),s();if("]"===r())return o(),{jsonPath:t,op:"<truthy>",value:null,caseSensetive:!1};const c=function(){s();let e="";return n||(e+=o()),n||"="===e||(e+=o()),["=","*=","^=","$=","|=","~="].includes(e)||i("parsing operator"),e}();let l=void 0,p=!0;if(s(),"'"===r()||'"'===r())l=u(r()).slice(1,-1),s(),"i"===r()||"I"===r()?(p=!1,o()):"s"!==r()&&"S"!==r()||(p=!0,o());else{for(l="";!n&&!/\s/.test(r())&&"]"!==r();)l+=o();"true"===l?l=!0:"false"===l?l=!1:(l=+l,isNaN(l)&&i("parsing attribute value"))}if(s(),"]"!==r()&&i("parsing attribute value"),o(),"="!==c&&"string"!=typeof l)throw new Error(`Error while parsing selector \`${e}\` - cannot use ${c} in attribute with non-string matching value - ${l}`);return{jsonPath:t,op:c,value:l,caseSensetive:p}}const p={name:"",attributes:[]};p.name=c(),s();for(;"["===r();)p.attributes.push(l()),s();n||i(void 0);if(!p.name&&!p.attributes.length)throw new Error(`Error while parsing selector \`${e}\` - selector cannot be empty`);return p}},,,function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.InjectedScript=t.SelectorTypeEnum=void 0;var r=n(10),o=n(11),i=n(12),s=n(0),c=n(3);let u;t.SelectorTypeEnum=u,function(e){e.ID="id",e.PLAYWRIGHT="playwright",e.DATA_ATTRIBUTE="dataAttribute",e.ATTRIBUTE="attribute",e.INNER_VALUE="innerValue",e.PNC="PnC",e.XPATH="xpath"}(u||(t.SelectorTypeEnum=u={}));class a{constructor(e,t,n){this._engines=void 0,this._evaluator=void 0,this._stableRafCount=void 0,this._replaceRafWithTimeout=void 0,this._evaluator=new c.SelectorEvaluatorImpl(new Map),this._engines=new Map,this._engines.set("xpath",r.XPathEngine),this._engines.set("xpath:light",r.XPathEngine),this._engines.set("_react",o.ReactEngine),this._engines.set("_vue",i.VueEngine),this._engines.set("crusher",this._createCrusherEngine(!0)),this._engines.set("text",this._createTextEngine(!0)),this._engines.set("text:light",this._createTextEngine(!1)),this._engines.set("id",this._createAttributeEngine("id",!0)),this._engines.set("id:light",this._createAttributeEngine("id",!1)),this._engines.set("data-testid",this._createAttributeEngine("data-testid",!0)),this._engines.set("data-testid:light",this._createAttributeEngine("data-testid",!1)),this._engines.set("data-test-id",this._createAttributeEngine("data-test-id",!0)),this._engines.set("data-test-id:light",this._createAttributeEngine("data-test-id",!1)),this._engines.set("data-test",this._createAttributeEngine("data-test",!0)),this._engines.set("data-test:light",this._createAttributeEngine("data-test",!1)),this._engines.set("css",this._createCSSEngine()),this._engines.set("nth",{queryAll:()=>[]}),this._engines.set("visible",{queryAll:()=>[]});for(const{name:e,engine:t}of n)this._engines.set(e,t);this._stableRafCount=e,this._replaceRafWithTimeout=t}parseSelector(e){const t=(0,s.parseSelector)(e);for(const n of t.parts)if(!this._engines.has(n.name))throw new Error(`Unknown engine "${n.name}" while parsing selector ${e}`);return t}querySelector(e,t,n){if(!t.querySelector)throw new Error("Node is not queryable.");this._evaluator.begin();try{var r,o;const i=this._querySelectorRecursively([{element:t,capture:void 0}],e,0,new Map);if(n&&i.length>1)throw new Error(`strict mode violation: selector resolved to ${i.length} elements.`);return(null===(r=i[0])||void 0===r?void 0:r.capture)||(null===(o=i[0])||void 0===o?void 0:o.element)}finally{this._evaluator.end()}}_querySelectorRecursively(e,t,n,r){if(n===t.parts.length)return e;const o=t.parts[n];if("nth"===o.name){let i=[];if("0"===o.body)i=e.slice(0,1);else if("-1"===o.body)e.length&&(i=e.slice(e.length-1));else{if("number"==typeof t.capture)throw new Error("Can't query n-th element in a request with the capture.");const n=+o.body,r=new Set;for(const t of e)r.add(t.element),n+1===r.size&&(i=[t])}return this._querySelectorRecursively(i,t,n+1,r)}if("visible"===o.name){const t=Boolean(o.body);return e.filter(e=>t===(0,c.isVisible)(e.element))}const i=[];for(const o of e){const e=n-1===t.capture?o.element:o.capture;let s=r.get(o.element);s||(s=[],r.set(o.element,s));let c=s[n];c||(c=this._queryEngineAll(t.parts[n],o.element),s[n]=c);for(const t of c)i.push({element:t,capture:e})}return this._querySelectorRecursively(i,t,n+1,r)}querySelectorAll(e,t){if(!t.querySelectorAll)throw new Error("Node is not queryable.");this._evaluator.begin();try{const n=this._querySelectorRecursively([{element:t,capture:void 0}],e,0,new Map),r=new Set;for(const e of n)r.add(e.capture||e.element);return[...r]}finally{this._evaluator.end()}}_queryEngineAll(e,t){return this._engines.get(e.name).queryAll(t,e.body)}_createAttributeEngine(e,t){return{queryAll:(n,r)=>this._evaluator.query({scope:n,pierceShadow:t},(t=>[{simples:[{selector:{css:`[${e}=${JSON.stringify(t)}]`,functions:[]},combinator:""}]}])(r))}}_createCSSEngine(){const e=this._evaluator;return{queryAll:(t,n)=>e.query({scope:t,pierceShadow:!0},n)}}_createCrusherEngine(e=!0){const t=(e,t)=>{t.startsWith("/")&&(t="."+t);const n=[],r=e instanceof Document?e:e.ownerDocument;if(!r)return n;const o=r.evaluate(t,e,null,XPathResult.ORDERED_NODE_ITERATOR_TYPE);for(let e=o.iterateNext();e;e=o.iterateNext())e.nodeType===Node.ELEMENT_NODE&&n.push(e);return n},n=(n,r)=>{try{const{uuid:o,selectors:i}=JSON.parse(decodeURIComponent(r));this._evaluator.begin();const s=i.find(e=>e.type===u.PLAYWRIGHT);if(s)try{const e=this.querySelectorAll(this.parseSelector(s.value),n);if(e&&e.length)return this._evaluator.end(),window[o]={selector:s.value,selectorType:s.type},e}catch(e){}const c=i.filter(e=>e.type!==u.PLAYWRIGHT);for(const r of c){let i=[];try{i=r.type===u.XPATH?t(n,r.value):this._evaluator._queryCSS({scope:n,pierceShadow:e},r.value)}catch(e){}if(i&&i.length)return this._evaluator.end(),window[o]={selector:r.value,selectorType:r.type},i}return this._evaluator.end(),[]}catch(e){throw new Error(r)}};return{queryAll:(e,t)=>n(e,t)}}_createTextEngine(e){const t=(t,n)=>{const{matcher:r,kind:o}=function(e){if("/"===e[0]&&e.lastIndexOf("/")>0){const t=e.lastIndexOf("/");return{matcher:(0,c.createRegexTextMatcher)(e.substring(1,t),e.substring(t+1)),kind:"regex"}}let t=!1;e.length>1&&'"'===e[0]&&'"'===e[e.length-1]&&(e=d(e.substring(1,e.length-1)),t=!0);e.length>1&&"'"===e[0]&&"'"===e[e.length-1]&&(e=d(e.substring(1,e.length-1)),t=!0);return{matcher:t?(0,c.createStrictTextMatcher)(e):(0,c.createLaxTextMatcher)(e),kind:t?"strict":"lax"}}(n),i=[];let s=null;const u=e=>{if("lax"===o&&s&&s.contains(e))return!1;const t=(0,c.elementMatchesText)(this._evaluator,e,r);"none"===t&&(s=e),("self"===t||"selfAndChildren"===t&&"strict"===o)&&i.push(e)};t.nodeType===Node.ELEMENT_NODE&&u(t);const a=this._evaluator._queryCSS({scope:t,pierceShadow:e},"*");for(const e of a)u(e);return i};return{queryAll:(e,n)=>t(e,n)}}extend(t,n){return new(e.eval(`\n    (() => {\n      ${t}\n      return pwExport;\n    })()`))(this,n)}isVisible(e){return(0,c.isVisible)(e)}pollRaf(e){return this._runAbortableTask(t=>{let n,r;const o=new Promise((e,t)=>{n=e,r=t}),i=()=>{if(!t.aborted)try{const r=Symbol("continuePolling"),o=e(t,r);o!==r?n(o):requestAnimationFrame(i)}catch(e){t.log("  "+e.message),r(e)}};return i(),o})}pollInterval(e,t){return this._runAbortableTask(n=>{let r,o;const i=new Promise((e,t)=>{r=e,o=t}),s=()=>{if(!n.aborted)try{const o=Symbol("continuePolling"),i=t(n,o);i!==o?r(i):setTimeout(s,e)}catch(e){o(e)}};return s(),i})}_runAbortableTask(e){let t,n=[],r=!1;const o=()=>{t&&(t(n),n=[],t=void 0)};let i="";const s={aborted:!1,log:e=>{i=e,n.push(e),o()},logRepeating:e=>{e!==i&&s.log(e)}};return{takeNextLogs:()=>new Promise(e=>{t=e,(n.length||r)&&o()}),run:()=>{const t=e(s);return t.finally(()=>{r=!0,o()}),t},cancel:()=>{s.aborted=!0},takeLastLogs:()=>n}}getElementBorderWidth(e){if(e.nodeType!==Node.ELEMENT_NODE||!e.ownerDocument||!e.ownerDocument.defaultView)return{left:0,top:0};const t=e.ownerDocument.defaultView.getComputedStyle(e);return{left:parseInt(t.borderLeftWidth||"",10),top:parseInt(t.borderTopWidth||"",10)}}retarget(e,t){let n=e.nodeType===Node.ELEMENT_NODE?e:e.parentElement;return n?(n.matches("input, textarea, select")||(n=n.closest("button, [role=button], [role=checkbox], [role=radio]")||n),"follow-label"===t&&(n.matches("input, textarea, button, select, [role=button], [role=checkbox], [role=radio]")||n.isContentEditable||(n=n.closest("label")||n),"LABEL"===n.nodeName&&(n=n.control||n)),n):null}waitForElementStatesAndPerformAction(e,t,n,r){let o,i=0,s=0,c=0;const u=(u,a)=>{if(n)return u.log("    forcing action"),r(e,u,a);for(const n of t){if("stable"!==n){const t=this.checkElementState(e,n);if("boolean"!=typeof t)return t;if(!t)return u.logRepeating(`    element is not ${n} - waiting...`),a;continue}const t=this.retarget(e,"no-follow-label");if(!t)return"error:notconnected";if(1==++i)return a;const r=performance.now();if(this._stableRafCount>1&&r-c<15)return a;c=r;const l=t.getBoundingClientRect(),p={x:l.top,y:l.left,width:l.width,height:l.height};o&&p.x===o.x&&p.y===o.y&&p.width===o.width&&p.height===o.height?++s:s=0;const h=s>=this._stableRafCount,f=h||!o;if(o=p,f||u.logRepeating("    element is not stable - waiting..."),!h)return a}return r(e,u,a)};return this._replaceRafWithTimeout?this.pollInterval(16,u):this.pollRaf(u)}checkElementState(e,t){const n=this.retarget(e,["stable","visible","hidden"].includes(t)?"no-follow-label":"follow-label");if(!n||!n.isConnected)return"hidden"===t||"error:notconnected";if("visible"===t)return this.isVisible(n);if("hidden"===t)return!this.isVisible(n);const r=["BUTTON","INPUT","SELECT","TEXTAREA"].includes(n.nodeName)&&n.hasAttribute("disabled");if("disabled"===t)return r;if("enabled"===t)return!r;const o=!(["INPUT","TEXTAREA","SELECT"].includes(n.nodeName)&&n.hasAttribute("readonly"));if("editable"===t)return!r&&o;if("checked"===t)return"checkbox"===n.getAttribute("role")?"true"===n.getAttribute("aria-checked"):"INPUT"!==n.nodeName?"error:notcheckbox":["radio","checkbox"].includes(n.type.toLowerCase())?n.checked:"error:notcheckbox";throw new Error(`Unexpected element state "${t}"`)}selectOptions(e,t,n,r){const o=this.retarget(t,"follow-label");if(!o)return"error:notconnected";if("select"!==o.nodeName.toLowerCase())return"error:notselect";const i=o,s=[...i.options],c=[];let u=e.slice();for(let e=0;e<s.length;e++){const t=s[e],n=n=>{if(n instanceof Node)return t===n;let r=!0;return void 0!==n.value&&(r=r&&n.value===t.value),void 0!==n.label&&(r=r&&n.label===t.label),void 0!==n.index&&(r=r&&n.index===e),r};if(u.some(n)){if(c.push(t),!i.multiple){u=[];break}u=u.filter(e=>!n(e))}}return u.length?(n.logRepeating("    did not find some options - waiting... "),r):(i.value=void 0,c.forEach(e=>e.selected=!0),n.log("    selected specified option(s)"),i.dispatchEvent(new Event("input",{bubbles:!0})),i.dispatchEvent(new Event("change",{bubbles:!0})),c.map(e=>e.value))}fill(e,t,n){const r=this.retarget(t,"follow-label");if(!r)return"error:notconnected";if("input"===r.nodeName.toLowerCase()){const t=r,o=t.type.toLowerCase(),i=new Set(["date","time","datetime","datetime-local","month","week"]);if(!new Set(["","email","number","password","search","tel","text","url"]).has(o)&&!i.has(o))return n.log(`    input of type "${o}" cannot be filled`),"error:notfillableinputtype";if("number"===o&&(e=e.trim(),isNaN(Number(e))))return"error:notfillablenumberinput";if(i.has(o))return e=e.trim(),t.focus(),t.value=e,t.value!==e?"error:notvaliddate":(r.dispatchEvent(new Event("input",{bubbles:!0})),r.dispatchEvent(new Event("change",{bubbles:!0})),"done")}else if("textarea"===r.nodeName.toLowerCase());else if(!r.isContentEditable)return"error:notfillableelement";return this.selectText(r),"needsinput"}selectText(e){const t=this.retarget(e,"follow-label");if(!t)return"error:notconnected";if("input"===t.nodeName.toLowerCase()){const e=t;return e.select(),e.focus(),"done"}if("textarea"===t.nodeName.toLowerCase()){const e=t;return e.selectionStart=0,e.selectionEnd=e.value.length,e.focus(),"done"}const n=t.ownerDocument.createRange();n.selectNodeContents(t);const r=t.ownerDocument.defaultView.getSelection();return r&&(r.removeAllRanges(),r.addRange(n)),t.focus(),"done"}focusNode(e,t){if(!e.isConnected)return"error:notconnected";if(e.nodeType!==Node.ELEMENT_NODE)return"error:notelement";const n=e.getRootNode().activeElement===e&&e.ownerDocument&&e.ownerDocument.hasFocus();if(e.focus(),t&&!n&&"input"===e.nodeName.toLowerCase())try{e.setSelectionRange(0,0)}catch(e){}return"done"}setInputFiles(e,t){if(e.nodeType!==Node.ELEMENT_NODE)return"Node is not of type HTMLElement";const n=e;if("INPUT"!==n.nodeName)return"Not an <input> element";const r=n;if("file"!==(r.getAttribute("type")||"").toLowerCase())return"Not an input[type=file] element";const o=t.map(e=>{const t=Uint8Array.from(atob(e.buffer),e=>e.charCodeAt(0));return new File([t],e.name,{type:e.mimeType})}),i=new DataTransfer;for(const e of o)i.items.add(e);r.files=i.files,r.dispatchEvent(new Event("input",{bubbles:!0})),r.dispatchEvent(new Event("change",{bubbles:!0}))}checkHitTargetAt(e,t){let n=e.nodeType===Node.ELEMENT_NODE?e:e.parentElement;if(!n||!n.isConnected)return"error:notconnected";n=n.closest("button, [role=button]")||n;let r=this.deepElementFromPoint(document,t.x,t.y);const o=[];for(;r&&r!==n;)o.push(r),r=(0,c.parentElementOrShadowHost)(r);if(r===n)return"done";const i=this.previewNode(o[0]);let s;for(;n;){const e=o.indexOf(n);if(-1!==e){e>1&&(s=this.previewNode(o[e-1]));break}n=(0,c.parentElementOrShadowHost)(n)}return s?{hitTargetDescription:`${i} from ${s} subtree`}:{hitTargetDescription:i}}dispatchEvent(e,t,n){let r;switch(n={bubbles:!0,cancelable:!0,composed:!0,...n},f.get(t)){case"mouse":r=new MouseEvent(t,n);break;case"keyboard":r=new KeyboardEvent(t,n);break;case"touch":r=new TouchEvent(t,n);break;case"pointer":r=new PointerEvent(t,n);break;case"focus":r=new FocusEvent(t,n);break;case"drag":r=new DragEvent(t,n);break;default:r=new Event(t,n)}e.dispatchEvent(r)}deepElementFromPoint(e,t,n){let r,o=e;for(;o;){const e=o.elementsFromPoint(t,n)[0];if(!e||r===e)break;r=e,o=r.shadowRoot}return r}previewNode(e){if(e.nodeType===Node.TEXT_NODE)return h("#text="+(e.nodeValue||""));if(e.nodeType!==Node.ELEMENT_NODE)return h(`<${e.nodeName.toLowerCase()} />`);const t=e,n=[];for(let e=0;e<t.attributes.length;e++){const{name:r,value:o}=t.attributes[e];"style"!==r&&(!o&&p.has(r)?n.push(" "+r):n.push(` ${r}="${o}"`))}n.sort((e,t)=>e.length-t.length);let r=n.join("");if(r.length>50&&(r=r.substring(0,49)+"…"),l.has(t.nodeName))return h(`<${t.nodeName.toLowerCase()}${r}/>`);const o=t.childNodes;let i=!1;if(o.length<=5){i=!0;for(let e=0;e<o.length;e++)i=i&&o[e].nodeType===Node.TEXT_NODE}let s=i?t.textContent||"":o.length?"…":"";return s.length>50&&(s=s.substring(0,49)+"…"),h(`<${t.nodeName.toLowerCase()}${r}>${s}</${t.nodeName.toLowerCase()}>`)}}t.InjectedScript=a;const l=new Set(["AREA","BASE","BR","COL","COMMAND","EMBED","HR","IMG","INPUT","KEYGEN","LINK","MENUITEM","META","PARAM","SOURCE","TRACK","WBR"]),p=new Set(["checked","selected","disabled","readonly","multiple"]);function h(e){return e.replace(/\n/g,"↵").replace(/\t/g,"⇆")}const f=new Map([["auxclick","mouse"],["click","mouse"],["dblclick","mouse"],["mousedown","mouse"],["mouseeenter","mouse"],["mouseleave","mouse"],["mousemove","mouse"],["mouseout","mouse"],["mouseover","mouse"],["mouseup","mouse"],["mouseleave","mouse"],["mousewheel","mouse"],["keydown","keyboard"],["keyup","keyboard"],["keypress","keyboard"],["textInput","keyboard"],["touchstart","touch"],["touchmove","touch"],["touchend","touch"],["touchcancel","touch"],["pointerover","pointer"],["pointerout","pointer"],["pointerenter","pointer"],["pointerleave","pointer"],["pointerdown","pointer"],["pointerup","pointer"],["pointermove","pointer"],["pointercancel","pointer"],["gotpointercapture","pointer"],["lostpointercapture","pointer"],["focus","focus"],["blur","focus"],["drag","drag"],["dragstart","drag"],["dragend","drag"],["dragover","drag"],["dragenter","drag"],["dragleave","drag"],["dragexit","drag"],["drop","drag"]]);function d(e){if(!e.includes("\\"))return e;const t=[];let n=0;for(;n<e.length;)"\\"===e[n]&&n+1<e.length&&n++,t.push(e[n++]);return t.join("")}var m=a;t.default=m}).call(this,n(4))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.XPathEngine=void 0;const r={queryAll(e,t){t.startsWith("/")&&(t="."+t);const n=[],r=e instanceof Document?e:e.ownerDocument;if(!r)return n;const o=r.evaluate(t,e,null,XPathResult.ORDERED_NODE_ITERATOR_TYPE);for(let e=o.iterateNext();e;e=o.iterateNext())e.nodeType===Node.ELEMENT_NODE&&n.push(e);return n}};t.XPathEngine=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ReactEngine=void 0;var r=n(6);function o(e){if("function"==typeof e.type)return e.type.displayName||e.type.name||"Anonymous";if("string"==typeof e.type)return e.type;if(e._currentElement){const t=e._currentElement.type;if("string"==typeof t)return t;if("function"==typeof t)return t.displayName||t.name||"Anonymous"}return""}function i(e){if(e.child){const t=[];for(let n=e.child;n;n=n.sibling)t.push(n);return t}if(!e._currentElement)return[];const t=e=>{var t;const n=null===(t=e._currentElement)||void 0===t?void 0:t.type;return"function"==typeof n||"string"==typeof n};if(e._renderedComponent){const n=e._renderedComponent;return t(n)?[n]:[]}return e._renderedChildren?[...Object.values(e._renderedChildren)].filter(t):[]}function s(e){var t;const n=e.memoizedProps||(null===(t=e._currentElement)||void 0===t?void 0:t.props);if(!n||"string"==typeof n)return n;const r={...n};return delete r.children,r}function c(e){var t;const n={name:o(e),children:i(e).map(c),rootElements:[],props:s(e)},r=e.stateNode||e._hostNode||(null===(t=e._renderedComponent)||void 0===t?void 0:t._hostNode);if(r instanceof Element)n.rootElements.push(r);else for(const e of n.children)n.rootElements.push(...e.rootElements);return n}const u={queryAll(e,t){const{name:n,attributes:o}=(0,r.parseComponentSelector)(t),i=function(){const e=document.createTreeWalker(document);for(;e.nextNode();){if(e.currentNode.hasOwnProperty("_reactRootContainer"))return e.currentNode._reactRootContainer._internalRoot.current;for(const t of Object.keys(e.currentNode))if(t.startsWith("__reactInternalInstance")||t.startsWith("__reactFiber"))return e.currentNode[t]}}();if(!i)return[];const s=function e(t,n,r=[]){n(t)&&r.push(t);for(const o of t.children)e(o,n,r);return r}(c(i),t=>{if(n&&t.name!==n)return!1;if(t.rootElements.some(t=>!e.contains(t)))return!1;for(const e of o)if(!(0,r.checkComponentAttribute)(t.props,e))return!1;return!0}),u=new Set;for(const e of s)for(const t of e.rootElements)u.add(t);return[...u]}};t.ReactEngine=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VueEngine=void 0;var r=n(6);function o(e,t){const n=e.replace(/^[a-zA-Z]:/,"").replace(/\\/g,"/");let r=n.substring(n.lastIndexOf("/")+1);return t&&r.endsWith(t)&&(r=r.substring(0,r.length-t.length)),r}function i(e,t){return t?t.toUpperCase():""}const s=/(?:^|[-_/])(\w)/g,c=e=>e&&e.replace(s,i);function u(e){function t(e,t){return e.type.__playwright_guessedName=t,t}function n(e){const n=function(e){const t=e.name||e._componentTag||e.__playwright_guessedName;if(t)return t;const n=e.__file;return n?c(o(n,".vue")):void 0}(e.type||{});if(n)return n;if(e.root===e)return"Root";for(const n in null===(r=e.parent)||void 0===r||null===(i=r.type)||void 0===i?void 0:i.components){var r,i,s;if((null===(s=e.parent)||void 0===s?void 0:s.type.components[n])===e.type)return t(e,n)}for(const n in null===(u=e.appContext)||void 0===u?void 0:u.components){var u;if(e.appContext.components[n]===e.type)return t(e,n)}return"Anonymous Component"}function r(e){const t=[];return e.component&&t.push(e.component),e.suspense&&t.push(...r(e.suspense.activeBranch)),Array.isArray(e.children)&&e.children.forEach(e=>{e.component?t.push(e.component):t.push(...r(e))}),t.filter(e=>{var t;return!(function(e){return e._isBeingDestroyed||e.isUnmounted}(e)||null!==(t=e.type.devtools)&&void 0!==t&&t.hide)})}function i(e){return function(e){return"Symbol(Fragment)"===e.subTree.type.toString()}(e)?function(e){if(!e.children)return[];const t=[];for(let n=0,r=e.children.length;n<r;n++){const r=e.children[n];r.component?t.push(...i(r.component)):r.el&&t.push(r.el)}return t}(e.subTree):[e.subTree.el]}return function e(t){return{name:n(t),children:r(t.subTree).map(e),rootElements:i(t),props:t.props}}(e)}function a(e){function t(e){const t=function(e){const t=e.displayName||e.name||e._componentTag;if(t)return t;const n=e.__file;return n?c(o(n,".vue")):void 0}(e.$options||e.fnOptions||{});return t||(e.$root===e?"Root":"Anonymous Component")}function n(e){return e.$children?e.$children:Array.isArray(e.subTree.children)?e.subTree.children.filter(e=>!!e.component).map(e=>e.component):[]}return function e(r){return{name:t(r),children:n(r).map(e),rootElements:[r.$el],props:r._props}}(e)}const l={queryAll(e,t){const{name:n,attributes:o}=(0,r.parseComponentSelector)(t),i=function(){const e=document.createTreeWalker(document);for(;e.nextNode();){if(e.currentNode._vnode&&e.currentNode._vnode.component)return{root:e.currentNode._vnode.component,version:3};if(e.currentNode.__vue__)return{root:e.currentNode.__vue__,version:2}}}();if(!i)return[];const s=function e(t,n,r=[]){n(t)&&r.push(t);for(const o of t.children)e(o,n,r);return r}(3===i.version?u(i.root):a(i.root),t=>{if(n&&t.name!==n)return!1;if(t.rootElements.some(t=>!e.contains(t)))return!1;for(const e of o)if(!(0,r.checkComponentAttribute)(t.props,e))return!1;return!0}),c=new Set;for(const e of s)for(const t of e.rootElements)c.add(t);return[...c]}};t.VueEngine=l}]).default;
\ No newline at end of file
diff --git a/node_modules/playwright/lib/server/injected/packed/recorderSource.js b/node_modules/playwright/lib/server/injected/packed/recorderSource.js
new file mode 100644
index 0000000..3e6d2a6
--- /dev/null
+++ b/node_modules/playwright/lib/server/injected/packed/recorderSource.js
@@ -0,0 +1 @@
+var pwExport=function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=14)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseSelector=function(e){const t=function(e){let t,n=0,o=0;const r={parts:[]},i=()=>{const t=e.substring(o,n).trim(),i=t.indexOf("=");let s,c;-1!==i&&t.substring(0,i).trim().match(/^[a-zA-Z_0-9-+:*]+$/)?(s=t.substring(0,i).trim(),c=t.substring(i+1)):t.length>1&&'"'===t[0]&&'"'===t[t.length-1]||t.length>1&&"'"===t[0]&&"'"===t[t.length-1]?(s="text",c=t):/^\(*\/\//.test(t)||t.startsWith("..")?(s="xpath",c=t):(s="css",c=t);let l=!1;if("*"===s[0]&&(l=!0,s=s.substring(1)),r.parts.push({name:s,body:c}),l){if(void 0!==r.capture)throw new Error("Only one of the selectors can capture using * modifier");r.capture=r.parts.length-1}};if(!e.includes(">>"))return n=e.length,i(),r;for(;n<e.length;){const r=e[n];"\\"===r&&n+1<e.length?n+=2:r===t?(t=void 0,n++):t||'"'!==r&&"'"!==r&&"`"!==r?t||">"!==r||">"!==e[n+1]?n++:(i(),n+=2,o=n):(t=r,n++)}return i(),r}(e),n=t.parts.map(e=>{if("css"===e.name||"css:light"===e.name){"css:light"===e.name&&(e.body=":light("+e.body+")");return{name:"css",body:(0,o.parseCSS)(e.body,r).selector}}return e});return{capture:t.capture,parts:n}},t.customCSSNames=void 0;var o=n(1);const r=new Set(["not","is","where","has","scope","light","visible","text","text-matches","text-is","has-text","above","below","right-of","left-of","near","nth-match"]);t.customCSSNames=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseCSS=function(e,t){let n;try{n=o.tokenize(e),n[n.length-1]instanceof o.EOFToken||n.push(new o.EOFToken)}catch(t){const n=t.message+` while parsing selector "${e}"`,o=(t.stack||"").indexOf(t.message);throw-1!==o&&(t.stack=t.stack.substring(0,o)+n+t.stack.substring(o+t.message.length)),t.message=n,t}const r=n.find(e=>e instanceof o.AtKeywordToken||e instanceof o.BadStringToken||e instanceof o.BadURLToken||e instanceof o.ColumnToken||e instanceof o.CDOToken||e instanceof o.CDCToken||e instanceof o.SemicolonToken||e instanceof o.OpenCurlyToken||e instanceof o.CloseCurlyToken||e instanceof o.URLToken||e instanceof o.PercentageToken);if(r)throw new Error(`Unsupported token "${r.toSource()}" while parsing selector "${e}"`);let i=0;const s=new Set;function c(){return new Error(`Unexpected token "${n[i].toSource()}" while parsing selector "${e}"`)}function l(){for(;n[i]instanceof o.WhitespaceToken;)i++}function a(e=i){return n[e]instanceof o.IdentToken}function h(e=i){return n[e]instanceof o.CommaToken}function u(e=i){return n[e]instanceof o.CloseParenToken}function p(e=i){return n[e]instanceof o.DelimToken&&"*"===n[e].value}function f(e=i){return n[e]instanceof o.EOFToken}function d(e=i){return n[e]instanceof o.DelimToken&&[">","+","~"].includes(n[e].value)}function m(e=i){return h(e)||u(e)||f(e)||d(e)||n[e]instanceof o.WhitespaceToken}function g(){const e=[y()];for(;l(),h();)i++,e.push(y());return e}function y(){return l(),function(e=i){return n[e]instanceof o.NumberToken}()||function(e=i){return n[e]instanceof o.StringToken}()?n[i++].value:function(){l();const e={simples:[{selector:_(),combinator:""}]};for(;;){if(l(),d())e.simples[e.simples.length-1].combinator=n[i++].value,l();else if(m())break;e.simples.push({combinator:"",selector:_()})}return e}()}function _(){let e="";const r=[];for(;!m();)if(a()||p())e+=n[i++].toSource();else if(n[i]instanceof o.HashToken)e+=n[i++].toSource();else if(n[i]instanceof o.DelimToken&&"."===n[i].value){if(i++,!a())throw c();e+="."+n[i++].toSource()}else if(n[i]instanceof o.ColonToken)if(i++,a())if(t.has(n[i].value.toLowerCase())){const e=n[i++].value.toLowerCase();r.push({name:e,args:[]}),s.add(e)}else e+=":"+n[i++].toSource();else{if(!(n[i]instanceof o.FunctionToken))throw c();{const o=n[i++].value.toLowerCase();if(t.has(o)?(r.push({name:o,args:g()}),s.add(o)):e+=`:${o}(${v()})`,l(),!u())throw c();i++}}else{if(!(n[i]instanceof o.OpenSquareToken))throw c();for(e+="[",i++;!(n[i]instanceof o.CloseSquareToken||f());)e+=n[i++].toSource();if(!(n[i]instanceof o.CloseSquareToken))throw c();e+="]",i++}if(!e&&!r.length)throw c();return{css:e||void 0,functions:r}}function v(){let e="";for(;!u()&&!f();)e+=n[i++].toSource();return e}const w=g();if(!f())throw new Error(`Error while parsing selector "${e}"`);if(w.some(e=>"object"!=typeof e||!("simples"in e)))throw new Error(`Error while parsing selector "${e}"`);return{selector:w,names:Array.from(s)}},t.serializeSelector=function e(t){return t.map(t=>"string"==typeof t?`"${t}"`:"number"==typeof t?String(t):t.simples.map(({selector:t,combinator:n})=>{let o=t.css||"";return o+=t.functions.map(t=>`:${t.name}(${e(t.args)})`).join(""),n&&(o+=" "+n),o}).join(" ")).join(", ")};var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=r(t);if(n&&n.has(e))return n.get(e);var o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var c=i?Object.getOwnPropertyDescriptor(e,s):null;c&&(c.get||c.set)?Object.defineProperty(o,s,c):o[s]=e[s]}o.default=e,n&&n.set(e,o);return o}(n(2));function r(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(r=function(e){return e?n:t})(e)}},function(e,t,n){"use strict";var o,r,i;r=[t],void 0===(i="function"==typeof(o=function(e){var t=function(e,t,n){return e>=t&&e<=n};function n(e){return t(e,48,57)}function o(e){return n(e)||t(e,65,70)||t(e,97,102)}function r(e){return function(e){return t(e,65,90)}(e)||function(e){return t(e,97,122)}(e)}function i(e){return r(e)||function(e){return e>=128}(e)||95==e}function s(e){return i(e)||n(e)||45==e}function c(e){return t(e,0,8)||11==e||t(e,14,31)||127==e}function l(e){return 10==e}function a(e){return l(e)||9==e||32==e}var h=function(e){this.message=e};function u(e){if(e<=65535)return String.fromCharCode(e);e-=Math.pow(2,16);var t=Math.floor(e/Math.pow(2,10))+55296,n=e%Math.pow(2,10)+56320;return String.fromCharCode(t)+String.fromCharCode(n)}function p(){throw"Abstract Base Class"}function f(){return this}function d(){return this}function m(){return this}function g(){return this}function y(){return this}function _(){return this}function v(){return this}function w(){return this}function E(){throw"Abstract Base Class"}function S(){return this.value="{",this.mirror="}",this}function T(){return this.value="}",this.mirror="{",this}function b(){return this.value="[",this.mirror="]",this}function M(){return this.value="]",this.mirror="[",this}function k(){return this.value="(",this.mirror=")",this}function x(){return this.value=")",this.mirror="(",this}function C(){return this}function P(){return this}function O(){return this}function A(){return this}function N(){return this}function j(){return this}function R(){return this}function I(e){return this.value=u(e),this}function D(){throw"Abstract Base Class"}function L(e){this.value=e}function $(e){this.value=e,this.mirror=")"}function U(e){this.value=e}function q(e){this.value=e,this.type="unrestricted"}function G(e){this.value=e}function F(e){this.value=e}function H(){this.value=null,this.type="integer",this.repr=""}function K(){this.value=null,this.repr=""}function B(){this.value=null,this.type="integer",this.repr="",this.unit=""}function W(e){for(var n="",o=(e=""+e).charCodeAt(0),r=0;r<e.length;r++){var i=e.charCodeAt(r);if(0==i)throw new h("Invalid character: the input contains U+0000.");t(i,1,31)||127==i||0==r&&t(i,48,57)||1==r&&t(i,48,57)&&45==o?n+="\\"+i.toString(16)+" ":i>=128||45==i||95==i||t(i,48,57)||t(i,65,90)||t(i,97,122)?n+=e[r]:n+="\\"+e[r]}return n}function J(e){e=""+e;for(var n="",o=0;o<e.length;o++){var r=e.charCodeAt(o);if(0==r)throw new h("Invalid character: the input contains U+0000.");t(r,1,31)||127==r?n+="\\"+r.toString(16)+" ":n+=34==r||92==r?"\\"+e[o]:e[o]}return n}(h.prototype=new Error).name="InvalidCharacterError",p.prototype.toJSON=function(){return{token:this.tokenType}},p.prototype.toString=function(){return this.tokenType},p.prototype.toSource=function(){return""+this},f.prototype=Object.create(p.prototype),f.prototype.tokenType="BADSTRING",d.prototype=Object.create(p.prototype),d.prototype.tokenType="BADURL",m.prototype=Object.create(p.prototype),m.prototype.tokenType="WHITESPACE",m.prototype.toString=function(){return"WS"},m.prototype.toSource=function(){return" "},g.prototype=Object.create(p.prototype),g.prototype.tokenType="CDO",g.prototype.toSource=function(){return"\x3c!--"},y.prototype=Object.create(p.prototype),y.prototype.tokenType="CDC",y.prototype.toSource=function(){return"--\x3e"},_.prototype=Object.create(p.prototype),_.prototype.tokenType=":",v.prototype=Object.create(p.prototype),v.prototype.tokenType=";",w.prototype=Object.create(p.prototype),w.prototype.tokenType=",",E.prototype=Object.create(p.prototype),S.prototype=Object.create(E.prototype),S.prototype.tokenType="{",T.prototype=Object.create(E.prototype),T.prototype.tokenType="}",b.prototype=Object.create(E.prototype),b.prototype.tokenType="[",M.prototype=Object.create(E.prototype),M.prototype.tokenType="]",k.prototype=Object.create(E.prototype),k.prototype.tokenType="(",x.prototype=Object.create(E.prototype),x.prototype.tokenType=")",C.prototype=Object.create(p.prototype),C.prototype.tokenType="~=",P.prototype=Object.create(p.prototype),P.prototype.tokenType="|=",O.prototype=Object.create(p.prototype),O.prototype.tokenType="^=",A.prototype=Object.create(p.prototype),A.prototype.tokenType="$=",N.prototype=Object.create(p.prototype),N.prototype.tokenType="*=",j.prototype=Object.create(p.prototype),j.prototype.tokenType="||",R.prototype=Object.create(p.prototype),R.prototype.tokenType="EOF",R.prototype.toSource=function(){return""},I.prototype=Object.create(p.prototype),I.prototype.tokenType="DELIM",I.prototype.toString=function(){return"DELIM("+this.value+")"},I.prototype.toJSON=function(){var e=this.constructor.prototype.constructor.prototype.toJSON.call(this);return e.value=this.value,e},I.prototype.toSource=function(){return"\\"==this.value?"\\\n":this.value},D.prototype=Object.create(p.prototype),D.prototype.ASCIIMatch=function(e){return this.value.toLowerCase()==e.toLowerCase()},D.prototype.toJSON=function(){var e=this.constructor.prototype.constructor.prototype.toJSON.call(this);return e.value=this.value,e},L.prototype=Object.create(D.prototype),L.prototype.tokenType="IDENT",L.prototype.toString=function(){return"IDENT("+this.value+")"},L.prototype.toSource=function(){return W(this.value)},$.prototype=Object.create(D.prototype),$.prototype.tokenType="FUNCTION",$.prototype.toString=function(){return"FUNCTION("+this.value+")"},$.prototype.toSource=function(){return W(this.value)+"("},U.prototype=Object.create(D.prototype),U.prototype.tokenType="AT-KEYWORD",U.prototype.toString=function(){return"AT("+this.value+")"},U.prototype.toSource=function(){return"@"+W(this.value)},q.prototype=Object.create(D.prototype),q.prototype.tokenType="HASH",q.prototype.toString=function(){return"HASH("+this.value+")"},q.prototype.toJSON=function(){var e=this.constructor.prototype.constructor.prototype.toJSON.call(this);return e.value=this.value,e.type=this.type,e},q.prototype.toSource=function(){return"id"==this.type?"#"+W(this.value):"#"+function(e){for(var n="",o=((e=""+e).charCodeAt(0),0);o<e.length;o++){var r=e.charCodeAt(o);if(0==r)throw new h("Invalid character: the input contains U+0000.");r>=128||45==r||95==r||t(r,48,57)||t(r,65,90)||t(r,97,122)?n+=e[o]:n+="\\"+r.toString(16)+" "}return n}(this.value)},G.prototype=Object.create(D.prototype),G.prototype.tokenType="STRING",G.prototype.toString=function(){return'"'+J(this.value)+'"'},F.prototype=Object.create(D.prototype),F.prototype.tokenType="URL",F.prototype.toString=function(){return"URL("+this.value+")"},F.prototype.toSource=function(){return'url("'+J(this.value)+'")'},H.prototype=Object.create(p.prototype),H.prototype.tokenType="NUMBER",H.prototype.toString=function(){return"integer"==this.type?"INT("+this.value+")":"NUMBER("+this.value+")"},H.prototype.toJSON=function(){var e=this.constructor.prototype.constructor.prototype.toJSON.call(this);return e.value=this.value,e.type=this.type,e.repr=this.repr,e},H.prototype.toSource=function(){return this.repr},K.prototype=Object.create(p.prototype),K.prototype.tokenType="PERCENTAGE",K.prototype.toString=function(){return"PERCENTAGE("+this.value+")"},K.prototype.toJSON=function(){var e=this.constructor.prototype.constructor.prototype.toJSON.call(this);return e.value=this.value,e.repr=this.repr,e},K.prototype.toSource=function(){return this.repr+"%"},B.prototype=Object.create(p.prototype),B.prototype.tokenType="DIMENSION",B.prototype.toString=function(){return"DIM("+this.value+","+this.unit+")"},B.prototype.toJSON=function(){var e=this.constructor.prototype.constructor.prototype.toJSON.call(this);return e.value=this.value,e.type=this.type,e.repr=this.repr,e.unit=this.unit,e},B.prototype.toSource=function(){var e=this.repr,n=W(this.unit);return"e"!=n[0].toLowerCase()||"-"!=n[1]&&!t(n.charCodeAt(1),48,57)||(n="\\65 "+n.slice(1,n.length)),e+n},e.tokenize=function(e){e=function(e){for(var n=[],o=0;o<e.length;o++){var r=e.charCodeAt(o);if(13==r&&10==e.charCodeAt(o+1)&&(r=10,o++),13!=r&&12!=r||(r=10),0==r&&(r=65533),t(r,55296,56319)&&t(e.charCodeAt(o+1),56320,57343)){var i=r-55296,s=e.charCodeAt(o+1)-56320;r=Math.pow(2,16)+i*Math.pow(2,10)+s,o++}n.push(r)}return n}(e);for(var r,h=-1,p=[],E=0,D=0,W=0,J={line:E,column:D},Q=function(t){return t>=e.length?-1:e[t]},z=function(e){if(void 0===e&&(e=1),e>3)throw"Spec Error: no more than three codepoints of lookahead.";return Q(h+e)},V=function(e){return void 0===e&&(e=1),l(r=Q(h+=e))?(E+=1,W=D,D=0):D+=e,!0},X=function(){return h-=1,l(r)?(E-=1,D=W):D-=1,J.line=E,J.column=D,!0},Z=function(e){return void 0===e&&(e=r),-1==e},Y=function(){return console.log("Parse error at index "+h+", processing codepoint 0x"+r.toString(16)+"."),!0},ee=function(){if(te(),V(),a(r)){for(;a(z());)V();return new m}if(34==r)return re();if(35==r){if(s(z())||ce(z(1),z(2))){var e=new q;return ae(z(1),z(2),z(3))&&(e.type="id"),e.value=pe(),e}return new I(r)}return 36==r?61==z()?(V(),new A):new I(r):39==r?re():40==r?new k:41==r?new x:42==r?61==z()?(V(),new N):new I(r):43==r?ue()?(X(),ne()):new I(r):44==r?new w:45==r?ue()?(X(),ne()):45==z(1)&&62==z(2)?(V(2),new y):he()?(X(),oe()):new I(r):46==r?ue()?(X(),ne()):new I(r):58==r?new _:59==r?new v:60==r?33==z(1)&&45==z(2)&&45==z(3)?(V(3),new g):new I(r):64==r?ae(z(1),z(2),z(3))?new U(pe()):new I(r):91==r?new b:92==r?le()?(X(),oe()):(Y(),new I(r)):93==r?new M:94==r?61==z()?(V(),new O):new I(r):123==r?new S:124==r?61==z()?(V(),new P):124==z()?(V(),new j):new I(r):125==r?new T:126==r?61==z()?(V(),new C):new I(r):n(r)?(X(),ne()):i(r)?(X(),oe()):Z()?new R:new I(r)},te=function(){for(;47==z(1)&&42==z(2);)for(V(2);;){if(V(),42==r&&47==z()){V();break}if(Z())return void Y()}},ne=function(){var e,t=fe();return ae(z(1),z(2),z(3))?((e=new B).value=t.value,e.repr=t.repr,e.type=t.type,e.unit=pe(),e):37==z()?(V(),(e=new K).value=t.value,e.repr=t.repr,e):((e=new H).value=t.value,e.repr=t.repr,e.type=t.type,e)},oe=function(){var e=pe();if("url"==e.toLowerCase()&&40==z()){for(V();a(z(1))&&a(z(2));)V();return 34==z()||39==z()?new $(e):!a(z())||34!=z(2)&&39!=z(2)?ie():new $(e)}return 40==z()?(V(),new $(e)):new L(e)},re=function(e){void 0===e&&(e=r);for(var t="";V();){if(r==e||Z())return new G(t);if(l(r))return Y(),X(),new f;92==r?Z(z())||(l(z())?V():t+=u(se())):t+=u(r)}},ie=function(){for(var e=new F("");a(z());)V();if(Z(z()))return e;for(;V();){if(41==r||Z())return e;if(a(r)){for(;a(z());)V();return 41==z()||Z(z())?(V(),e):(me(),new d)}if(34==r||39==r||40==r||c(r))return Y(),me(),new d;if(92==r){if(!le())return Y(),me(),new d;e.value+=u(se())}else e.value+=u(r)}},se=function(){if(V(),o(r)){for(var e=[r],t=0;t<5&&o(z());t++)V(),e.push(r);a(z())&&V();var n=parseInt(e.map((function(e){return String.fromCharCode(e)})).join(""),16);return n>1114111&&(n=65533),n}return Z()?65533:r},ce=function(e,t){return 92==e&&!l(t)},le=function(){return ce(r,z())},ae=function(e,t,n){return 45==e?i(t)||45==t||ce(t,n):!!i(e)||92==e&&ce(e,t)},he=function(){return ae(r,z(1),z(2))},ue=function(){return e=r,t=z(1),o=z(2),43==e||45==e?!!n(t)||!(46!=t||!n(o)):46==e?!!n(t):!!n(e);var e,t,o},pe=function(){for(var e="";V();)if(s(r))e+=u(r);else{if(!le())return X(),e;e+=u(se())}},fe=function(){var e=[],t="integer";for(43!=z()&&45!=z()||(V(),e+=u(r));n(z());)V(),e+=u(r);if(46==z(1)&&n(z(2)))for(V(),e+=u(r),V(),e+=u(r),t="number";n(z());)V(),e+=u(r);var o=z(1),i=z(2),s=z(3);if(69!=o&&101!=o||!n(i)){if((69==o||101==o)&&(43==i||45==i)&&n(s))for(V(),e+=u(r),V(),e+=u(r),V(),e+=u(r),t="number";n(z());)V(),e+=u(r)}else for(V(),e+=u(r),V(),e+=u(r),t="number";n(z());)V(),e+=u(r);return{type:t,value:de(e),repr:e}},de=function(e){return+e},me=function(){for(;V();){if(41==r||Z())return;le()&&se()}},ge=0;!Z(z());)if(p.push(ee()),++ge>2*e.length)return"I'm infinite-looping!";return p},e.IdentToken=L,e.FunctionToken=$,e.AtKeywordToken=U,e.HashToken=q,e.StringToken=G,e.BadStringToken=f,e.URLToken=F,e.BadURLToken=d,e.DelimToken=I,e.NumberToken=H,e.PercentageToken=K,e.DimensionToken=B,e.IncludeMatchToken=C,e.DashMatchToken=P,e.PrefixMatchToken=O,e.SuffixMatchToken=A,e.SubstringMatchToken=N,e.ColumnToken=j,e.WhitespaceToken=m,e.CDOToken=g,e.CDCToken=y,e.ColonToken=_,e.SemicolonToken=v,e.CommaToken=w,e.OpenParenToken=k,e.CloseParenToken=x,e.OpenSquareToken=b,e.CloseSquareToken=M,e.OpenCurlyToken=S,e.CloseCurlyToken=T,e.EOFToken=R,e.CSSParserToken=p,e.GroupingToken=E})?o.apply(t,r):o)||(e.exports=i)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createLaxTextMatcher=d,t.createStrictTextMatcher=m,t.createRegexTextMatcher=g,t.elementText=_,t.elementMatchesText=v,t.parentElementOrShadowHost=x,t.isVisible=O,t.SelectorEvaluatorImpl=void 0;var o=n(0);t.SelectorEvaluatorImpl=class{constructor(e){this._engines=new Map,this._cacheQueryCSS=new Map,this._cacheMatches=new Map,this._cacheQuery=new Map,this._cacheMatchesSimple=new Map,this._cacheMatchesParents=new Map,this._cacheCallMatches=new Map,this._cacheCallQuery=new Map,this._cacheQuerySimple=new Map,this._cacheText=new Map,this._scoreMap=void 0,this._retainCacheCounter=0;for(const[t,n]of e)this._engines.set(t,n);this._engines.set("not",c),this._engines.set("is",r),this._engines.set("where",r),this._engines.set("has",i),this._engines.set("scope",s),this._engines.set("light",l),this._engines.set("visible",a),this._engines.set("text",h),this._engines.set("text-is",u),this._engines.set("text-matches",p),this._engines.set("has-text",f),this._engines.set("right-of",M("right-of",w)),this._engines.set("left-of",M("left-of",E)),this._engines.set("above",M("above",S)),this._engines.set("below",M("below",T)),this._engines.set("near",M("near",b)),this._engines.set("nth-match",k);const t=[...this._engines.keys()];t.sort();const n=[...o.customCSSNames];if(n.sort(),t.join("|")!==n.join("|"))throw new Error(`Please keep customCSSNames in sync with evaluator engines: ${t.join("|")} vs ${n.join("|")}`)}begin(){++this._retainCacheCounter}end(){--this._retainCacheCounter,this._retainCacheCounter||(this._cacheQueryCSS.clear(),this._cacheMatches.clear(),this._cacheQuery.clear(),this._cacheMatchesSimple.clear(),this._cacheMatchesParents.clear(),this._cacheCallMatches.clear(),this._cacheCallQuery.clear(),this._cacheQuerySimple.clear(),this._cacheText.clear())}_cached(e,t,n,o){e.has(t)||e.set(t,[]);const r=e.get(t),i=r.find(e=>n.every((t,n)=>e.rest[n]===t));if(i)return i.result;const s=o();return r.push({rest:n,result:s}),s}_checkSelector(e){if(!("object"==typeof e&&e&&(Array.isArray(e)||"simples"in e&&e.simples.length)))throw new Error(`Malformed selector "${e}"`);return e}matches(e,t,n){const o=this._checkSelector(t);this.begin();try{return this._cached(this._cacheMatches,e,[o,n.scope,n.pierceShadow],()=>Array.isArray(o)?this._matchesEngine(r,e,o,n):!!this._matchesSimple(e,o.simples[o.simples.length-1].selector,n)&&this._matchesParents(e,o,o.simples.length-2,n))}finally{this.end()}}query(e,t){const n=this._checkSelector(t);this.begin();try{return this._cached(this._cacheQuery,n,[e.scope,e.pierceShadow],()=>{if(Array.isArray(n))return this._queryEngine(r,e,n);const t=this._scoreMap;this._scoreMap=new Map;let o=this._querySimple(e,n.simples[n.simples.length-1].selector);return o=o.filter(t=>this._matchesParents(t,n,n.simples.length-2,e)),this._scoreMap.size&&o.sort((e,t)=>{const n=this._scoreMap.get(e),o=this._scoreMap.get(t);return n===o?0:void 0===n?1:void 0===o?-1:n-o}),this._scoreMap=t,o})}finally{this.end()}}_markScore(e,t){this._scoreMap&&this._scoreMap.set(e,t)}_matchesSimple(e,t,n){return this._cached(this._cacheMatchesSimple,e,[t,n.scope,n.pierceShadow],()=>{if(!t.functions.some(e=>"scope"===e.name||"is"===e.name)&&e===n.scope)return!1;if(t.css&&!this._matchesCSS(e,t.css))return!1;for(const o of t.functions)if(!this._matchesEngine(this._getEngine(o.name),e,o.args,n))return!1;return!0})}_querySimple(e,t){return t.functions.length?this._cached(this._cacheQuerySimple,t,[e.scope,e.pierceShadow],()=>{let n=t.css;const o=t.functions;let r;"*"===n&&o.length&&(n=void 0);let i=-1;void 0!==n?r=this._queryCSS(e,n):(i=o.findIndex(e=>void 0!==this._getEngine(e.name).query),-1===i&&(i=0),r=this._queryEngine(this._getEngine(o[i].name),e,o[i].args));for(let t=0;t<o.length;t++){if(t===i)continue;const n=this._getEngine(o[t].name);void 0!==n.matches&&(r=r.filter(r=>this._matchesEngine(n,r,o[t].args,e)))}for(let t=0;t<o.length;t++){if(t===i)continue;const n=this._getEngine(o[t].name);void 0===n.matches&&(r=r.filter(r=>this._matchesEngine(n,r,o[t].args,e)))}return r}):this._queryCSS(e,t.css||"*")}_matchesParents(e,t,n,o){return n<0||this._cached(this._cacheMatchesParents,e,[t,n,o.scope,o.pierceShadow],()=>{const{selector:r,combinator:i}=t.simples[n];if(">"===i){const i=C(e,o);return!(!i||!this._matchesSimple(i,r,o))&&this._matchesParents(i,t,n-1,o)}if("+"===i){const i=P(e,o);return!(!i||!this._matchesSimple(i,r,o))&&this._matchesParents(i,t,n-1,o)}if(""===i){let i=C(e,o);for(;i;){if(this._matchesSimple(i,r,o)){if(this._matchesParents(i,t,n-1,o))return!0;if(""===t.simples[n-1].combinator)break}i=C(i,o)}return!1}if("~"===i){let i=P(e,o);for(;i;){if(this._matchesSimple(i,r,o)){if(this._matchesParents(i,t,n-1,o))return!0;if("~"===t.simples[n-1].combinator)break}i=P(i,o)}return!1}if(">="===i){let i=e;for(;i;){if(this._matchesSimple(i,r,o)){if(this._matchesParents(i,t,n-1,o))return!0;if(""===t.simples[n-1].combinator)break}i=C(i,o)}return!1}throw new Error(`Unsupported combinator "${i}"`)})}_matchesEngine(e,t,n,o){if(e.matches)return this._callMatches(e,t,n,o);if(e.query)return this._callQuery(e,n,o).includes(t);throw new Error('Selector engine should implement "matches" or "query"')}_queryEngine(e,t,n){if(e.query)return this._callQuery(e,n,t);if(e.matches)return this._queryCSS(t,"*").filter(o=>this._callMatches(e,o,n,t));throw new Error('Selector engine should implement "matches" or "query"')}_callMatches(e,t,n,o){return this._cached(this._cacheCallMatches,t,[e,o.scope,o.pierceShadow,...n],()=>e.matches(t,n,o,this))}_callQuery(e,t,n){return this._cached(this._cacheCallQuery,e,[n.scope,n.pierceShadow,...t],()=>e.query(n,t,this))}_matchesCSS(e,t){return e.matches(t)}_queryCSS(e,t){return this._cached(this._cacheQueryCSS,t,[e.scope,e.pierceShadow],()=>{let n=[];return function o(r){if(n=n.concat([...r.querySelectorAll(t)]),e.pierceShadow){r.shadowRoot&&o(r.shadowRoot);for(const e of r.querySelectorAll("*"))e.shadowRoot&&o(e.shadowRoot)}}(e.scope),n})}_getEngine(e){const t=this._engines.get(e);if(!t)throw new Error(`Unknown selector engine "${e}"`);return t}};const r={matches(e,t,n,o){if(0===t.length)throw new Error('"is" engine expects non-empty selector list');return t.some(t=>o.matches(e,t,n))},query(e,t,n){if(0===t.length)throw new Error('"is" engine expects non-empty selector list');let o=[];for(const r of t)o=o.concat(n.query(e,r));return 1===t.length?o:function(e){const t=new Map,n=[],o=[];return e.forEach(e=>(function e(o){let r=t.get(o);if(r)return r;const i=x(o);if(i){e(i).children.push(o)}else n.push(o);return r={children:[],taken:!1},t.set(o,r),r}(e)).taken=!0),n.forEach((function e(n){const r=t.get(n);r.taken&&o.push(n);if(r.children.length>1){const e=new Set(r.children);r.children=[];let t=n.firstElementChild;for(;t&&r.children.length<e.size;)e.has(t)&&r.children.push(t),t=t.nextElementSibling;for(t=n.shadowRoot?n.shadowRoot.firstElementChild:null;t&&r.children.length<e.size;)e.has(t)&&r.children.push(t),t=t.nextElementSibling}r.children.forEach(e)})),o}(o)}},i={matches(e,t,n,o){if(0===t.length)throw new Error('"has" engine expects non-empty selector list');return o.query({...n,scope:e},t).length>0}},s={matches(e,t,n,o){if(0!==t.length)throw new Error('"scope" engine expects no arguments');return 9===n.scope.nodeType?e===n.scope.documentElement:e===n.scope},query(e,t,n){if(0!==t.length)throw new Error('"scope" engine expects no arguments');if(9===e.scope.nodeType){const t=e.scope.documentElement;return t?[t]:[]}return 1===e.scope.nodeType?[e.scope]:[]}},c={matches(e,t,n,o){if(0===t.length)throw new Error('"not" engine expects non-empty selector list');return!o.matches(e,t,n)}},l={query:(e,t,n)=>n.query({...e,pierceShadow:!1},t),matches:(e,t,n,o)=>o.matches(e,t,{...n,pierceShadow:!1})},a={matches(e,t,n,o){if(t.length)throw new Error('"visible" engine expects no arguments');return O(e)}},h={matches(e,t,n,o){if(1!==t.length||"string"!=typeof t[0])throw new Error('"text" engine expects a single string');return"self"===v(o,e,d(t[0]))}},u={matches(e,t,n,o){if(1!==t.length||"string"!=typeof t[0])throw new Error('"text-is" engine expects a single string');return"none"!==v(o,e,m(t[0]))}},p={matches(e,t,n,o){if(0===t.length||"string"!=typeof t[0]||t.length>2||2===t.length&&"string"!=typeof t[1])throw new Error('"text-matches" engine expects a regexp body and optional regexp flags');return"self"===v(o,e,g(t[0],2===t.length?t[1]:void 0))}},f={matches(e,t,n,o){if(1!==t.length||"string"!=typeof t[0])throw new Error('"has-text" engine expects a single string');if(y(e))return!1;return d(t[0])(_(o,e))}};function d(e){return e=e.trim().replace(/\s+/g," ").toLowerCase(),t=>t.full.trim().replace(/\s+/g," ").toLowerCase().includes(e)}function m(e){return e=e.trim().replace(/\s+/g," "),t=>t.immediate.some(t=>t.trim().replace(/\s+/g," ")===e)}function g(e,t){const n=new RegExp(e,t);return e=>n.test(e.full)}function y(e){return"SCRIPT"===e.nodeName||"STYLE"===e.nodeName||document.head&&document.head.contains(e)}function _(e,t){let n=e._cacheText.get(t);if(void 0===n){if(n={full:"",immediate:[]},!y(t)){let o="";if(t instanceof HTMLInputElement&&("submit"===t.type||"button"===t.type))n={full:t.value,immediate:[t.value]};else{for(let r=t.firstChild;r;r=r.nextSibling)r.nodeType===Node.TEXT_NODE?(n.full+=r.nodeValue||"",o+=r.nodeValue||""):(o&&n.immediate.push(o),o="",r.nodeType===Node.ELEMENT_NODE&&(n.full+=_(e,r).full));o&&n.immediate.push(o),t.shadowRoot&&(n.full+=_(e,t.shadowRoot).full)}}e._cacheText.set(t,n)}return n}function v(e,t,n){if(y(t))return"none";if(!n(_(e,t)))return"none";for(let o=t.firstChild;o;o=o.nextSibling)if(o.nodeType===Node.ELEMENT_NODE&&n(_(e,o)))return"selfAndChildren";return t.shadowRoot&&n(_(e,t.shadowRoot))?"selfAndChildren":"self"}function w(e,t,n){const o=e.left-t.right;if(!(o<0||void 0!==n&&o>n))return o+Math.max(t.bottom-e.bottom,0)+Math.max(e.top-t.top,0)}function E(e,t,n){const o=t.left-e.right;if(!(o<0||void 0!==n&&o>n))return o+Math.max(t.bottom-e.bottom,0)+Math.max(e.top-t.top,0)}function S(e,t,n){const o=t.top-e.bottom;if(!(o<0||void 0!==n&&o>n))return o+Math.max(e.left-t.left,0)+Math.max(t.right-e.right,0)}function T(e,t,n){const o=e.top-t.bottom;if(!(o<0||void 0!==n&&o>n))return o+Math.max(e.left-t.left,0)+Math.max(t.right-e.right,0)}function b(e,t,n){const o=void 0===n?50:n;let r=0;return e.left-t.right>=0&&(r+=e.left-t.right),t.left-e.right>=0&&(r+=t.left-e.right),t.top-e.bottom>=0&&(r+=t.top-e.bottom),e.top-t.bottom>=0&&(r+=e.top-t.bottom),r>o?void 0:r}function M(e,t){return{matches(n,o,r,i){const s=o.length&&"number"==typeof o[o.length-1]?o[o.length-1]:void 0,c=void 0===s?o:o.slice(0,o.length-1);if(o.length<1+(void 0===s?0:1))throw new Error(`"${e}" engine expects a selector list and optional maximum distance in pixels`);const l=n.getBoundingClientRect();let a;for(const e of i.query(r,c)){if(e===n)continue;const o=t(l,e.getBoundingClientRect(),s);void 0!==o&&((void 0===a||o<a)&&(a=o))}return void 0!==a&&(i._markScore(n,a),!0)}}}const k={query(e,t,n){let o=t[t.length-1];if(t.length<2)throw new Error('"nth-match" engine expects non-empty selector list and an index argument');if("number"!=typeof o||o<1)throw new Error('"nth-match" engine expects a one-based index as the last argument');const i=r.query(e,t.slice(0,t.length-1),n);return o--,o<i.length?[i[o]]:[]}};function x(e){return e.parentElement?e.parentElement:e.parentNode&&e.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&e.parentNode.host?e.parentNode.host:void 0}function C(e,t){if(e!==t.scope)return t.pierceShadow?x(e):e.parentElement||void 0}function P(e,t){if(e!==t.scope)return e.previousElementSibling||void 0}function O(e){if(!e.ownerDocument||!e.ownerDocument.defaultView)return!0;const t=e.ownerDocument.defaultView.getComputedStyle(e);if(!t||"hidden"===t.visibility)return!1;const n=e.getBoundingClientRect();return n.width>0&&n.height>0}},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.querySelector=function(e,t,n){try{const o=e.parseSelector(t);return{selector:t,elements:e.querySelectorAll(o,n)}}catch(e){return{selector:t,elements:[]}}},t.generateSelector=function(e,t){e._evaluator.begin();try{t=t.closest("button,select,input,[role=button],[role=checkbox],[role=radio]")||t;const n=function(e,t){if(t.ownerDocument.documentElement===t)return[{engine:"css",selector:"html",score:1}];const n=(n,r)=>{const i=n===t;let u=r?function(e,t,n){if("SELECT"===t.nodeName)return[];const r=(0,o.elementText)(e._evaluator,t).full.trim().replace(/\s+/g," ").substring(0,80);if(!r)return[];const i=[];let s=r;(r.includes('"')||r.includes(">>")||"/"===r[0])&&(s=`/.*${function(e){return e.replace(/[.*+?^>${}()|[\]\\]/g,"\\$&")}(r)}.*/`);if(i.push({engine:"text",selector:s,score:10}),n&&s===r){let e=t.nodeName.toLocaleLowerCase();t.hasAttribute("role")&&(e+=`[role=${h(t.getAttribute("role"))}]`),i.push({engine:"css",selector:`${e}:has-text("${r}")`,score:30})}return i}(e,n,n===t).map(e=>[e]):[];n!==t&&(u=s(u));const d=function(e,t){const n=[];for(const e of["data-testid","data-test-id","data-test"])t.hasAttribute(e)&&n.push({engine:"css",selector:`[${e}=${h(t.getAttribute(e))}]`,score:1});if("INPUT"===t.nodeName){const e=t;e.placeholder&&n.push({engine:"css",selector:`[placeholder=${h(e.placeholder)}]`,score:10})}t.hasAttribute("aria-label")&&n.push({engine:"css",selector:`[aria-label=${h(t.getAttribute("aria-label"))}]`,score:10});t.getAttribute("alt")&&["APPLET","AREA","IMG","INPUT"].includes(t.nodeName)&&n.push({engine:"css",selector:`${t.nodeName.toLowerCase()}[alt=${h(t.getAttribute("alt"))}]`,score:10});t.hasAttribute("role")&&n.push({engine:"css",selector:`${t.nodeName.toLocaleLowerCase()}[role=${h(t.getAttribute("role"))}]`,score:50});t.getAttribute("name")&&["BUTTON","FORM","FIELDSET","IFRAME","INPUT","KEYGEN","OBJECT","OUTPUT","SELECT","TEXTAREA","MAP","META","PARAM"].includes(t.nodeName)&&n.push({engine:"css",selector:`${t.nodeName.toLowerCase()}[name=${h(t.getAttribute("name"))}]`,score:50});["INPUT","TEXTAREA"].includes(t.nodeName)&&"hidden"!==t.getAttribute("type")&&t.getAttribute("type")&&n.push({engine:"css",selector:`${t.nodeName.toLowerCase()}[type=${h(t.getAttribute("type"))}]`,score:50});["INPUT","TEXTAREA","SELECT"].includes(t.nodeName)&&n.push({engine:"css",selector:t.nodeName.toLowerCase(),score:50});const o=t.getAttribute("id");o&&!function(e){let t,n=0;for(let o=0;o<e.length;++o){const r=e[o];let i;"-"!==r&&"_"!==r&&(i=r>="a"&&r<="z"?"lower":r>="A"&&r<="Z"?"upper":r>="0"&&r<="9"?"digit":"other","lower"!==i||"upper"!==t?(t&&t!==i&&++n,t=i):t=i)}return n>=e.length/4}(o)&&n.push({engine:"css",selector:l(o),score:100});return n.push({engine:"css",selector:t.nodeName.toLocaleLowerCase(),score:200}),n}(0,n).map(e=>[e]);let m=f(e,t.ownerDocument,n,[...u,...d],i);u=s(u);const g=t=>{const o=r&&!t.length,s=[...t,...d].filter(e=>!m||p(e)<p(m));let l=s[0];if(l)for(let t=c(n);t;t=c(t)){const r=a(t,o);if(!r)continue;if(m&&p([...r,...l])>=p(m))continue;if(l=f(e,t,n,s,i),!l)return;const c=[...r,...l];(!m||p(c)<p(m))&&(m=c)}};return g(u),n===t&&u.length&&g([]),m},a=(e,t)=>{const o=t?r:i;let s=o.get(e);return void 0===s&&(s=n(e,t),o.set(e,s)),s};return a(t,!0)}(e,t),d=u(n||[a(e,t)]),m=e.parseSelector(d);return{selector:d,elements:e.querySelectorAll(m,t.ownerDocument)}}finally{r.clear(),i.clear(),e._evaluator.end()}};var o=n(3);const r=new Map,i=new Map;function s(e){return e.filter(e=>"/"!==e[0].selector[0])}function c(e){return e.parentElement?e.parentElement:e.parentNode&&e.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&e.parentNode.host?e.parentNode.host:null}function l(e){return/^[a-zA-Z][a-zA-Z0-9\-\_]+$/.test(e)?"#"+e:`[id="${e}"]`}function a(e,t){const n=t.ownerDocument,o=[];function r(n){const r=o.slice();n&&r.unshift(n);const i=r.join(" "),s=e.parseSelector(i);return e.querySelector(s,t.ownerDocument,!1)===t?i:void 0}for(let e=t;e&&e!==n;e=c(e)){const t=e.nodeName.toLowerCase();let n="";if(e.id){const t=l(e.id),o=r(t);if(o)return{engine:"css",selector:o,score:1e7};n=t}const i=e.parentNode,s=[...e.classList];for(let e=0;e<s.length;++e){const t="."+s.slice(0,e+1).join("."),o=r(t);if(o)return{engine:"css",selector:o,score:1e7};if(!n&&i){1===i.querySelectorAll(t).length&&(n=t)}}if(i){const o=[...i.children],s=0===o.filter(e=>e.nodeName.toLowerCase()===t).indexOf(e)?t:`${t}:nth-child(${1+o.indexOf(e)})`,c=r(s);if(c)return{engine:"css",selector:c,score:1e7};n||(n=s)}else n||(n=t);o.unshift(n)}return{engine:"css",selector:r(),score:1e7}}function h(e){return`"${e.replace(/"/g,'\\"').replace(/\n/g,"\\n")}"`}function u(e){const t=[];let n="";for(const{engine:o,selector:r}of e)t.length&&("css"!==n||"css"!==o||r.startsWith(":nth-match("))&&t.push(">>"),n=o,"css"===o?t.push(r):t.push(`${o}=${r}`);return t.join(" ")}function p(e){let t=0;for(let n=0;n<e.length;n++)t+=e[n].score*(e.length-n);return t}function f(e,t,n,o,r){const i=o.map(e=>({tokens:e,score:p(e)}));i.sort((e,t)=>e.score-t.score);let s=null;for(const{tokens:o}of i){const i=e.parseSelector(u(o)),c=e.querySelectorAll(i,t),l=c.indexOf(n);if(0===l)return o;if(!r||s||-1===l||c.length>5)continue;const a=o.map(e=>"text"!==e.engine?e:e.selector.startsWith("/")&&e.selector.endsWith("/")?{engine:"css",selector:`:text-matches("${e.selector.substring(1,e.selector.length-1)}")`,score:e.score}:{engine:"css",selector:`:text("${e.selector}")`,score:e.score});s=[{engine:"css",selector:`:nth-match(${u(a)}, ${l+1})`,score:p(a)+1e3}]}return s}},,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Recorder=void 0;var o=n(5);const r=Symbol("scriptSymbol");class i{constructor(e,t){this._injectedScript=void 0,this._performingAction=!1,this._outerGlassPaneElement=void 0,this._glassPaneShadow=void 0,this._innerGlassPaneElement=void 0,this._highlightElements=[],this._tooltipElement=void 0,this._listeners=[],this._hoveredModel=null,this._hoveredElement=null,this._activeModel=null,this._expectProgrammaticKeyUp=!1,this._pollRecorderModeTimer=void 0,this._mode="none",this._actionPointElement=void 0,this._actionPoint=void 0,this._actionSelector=void 0,this._params=void 0,this._params=t,this._injectedScript=e,this._outerGlassPaneElement=document.createElement("x-pw-glass"),this._outerGlassPaneElement.style.position="fixed",this._outerGlassPaneElement.style.top="0",this._outerGlassPaneElement.style.right="0",this._outerGlassPaneElement.style.bottom="0",this._outerGlassPaneElement.style.left="0",this._outerGlassPaneElement.style.zIndex="2147483647",this._outerGlassPaneElement.style.pointerEvents="none",this._outerGlassPaneElement.style.display="flex",this._tooltipElement=document.createElement("x-pw-tooltip"),this._actionPointElement=document.createElement("x-pw-action-point"),this._actionPointElement.setAttribute("hidden","true"),this._innerGlassPaneElement=document.createElement("x-pw-glass-inner"),this._innerGlassPaneElement.style.flex="auto",this._innerGlassPaneElement.appendChild(this._tooltipElement),this._glassPaneShadow=this._outerGlassPaneElement.attachShadow({mode:this._params.isUnderTest?"open":"closed"}),this._glassPaneShadow.appendChild(this._innerGlassPaneElement),this._glassPaneShadow.appendChild(this._actionPointElement);const n=document.createElement("style");n.textContent="\n        x-pw-tooltip {\n          align-items: center;\n          backdrop-filter: blur(5px);\n          background-color: rgba(0, 0, 0, 0.7);\n          border-radius: 2px;\n          box-shadow: rgba(0, 0, 0, 0.1) 0px 3.6px 3.7px,\n                      rgba(0, 0, 0, 0.15) 0px 12.1px 12.3px,\n                      rgba(0, 0, 0, 0.1) 0px -2px 4px,\n                      rgba(0, 0, 0, 0.15) 0px -12.1px 24px,\n                      rgba(0, 0, 0, 0.25) 0px 54px 55px;\n          color: rgb(204, 204, 204);\n          display: none;\n          font-family: 'Dank Mono', 'Operator Mono', Inconsolata, 'Fira Mono',\n                       'SF Mono', Monaco, 'Droid Sans Mono', 'Source Code Pro', monospace;\n          font-size: 12.8px;\n          font-weight: normal;\n          left: 0;\n          line-height: 1.5;\n          max-width: 600px;\n          padding: 3.2px 5.12px 3.2px;\n          position: absolute;\n          top: 0;\n        }\n        x-pw-action-point {\n          position: absolute;\n          width: 20px;\n          height: 20px;\n          background: red;\n          border-radius: 10px;\n          pointer-events: none;\n          margin: -10px 0 0 -10px;\n          z-index: 2;\n        }\n        *[hidden] {\n          display: none !important;\n        }\n    ",this._glassPaneShadow.appendChild(n),this._refreshListenersIfNeeded(),setInterval(()=>{this._refreshListenersIfNeeded(),t.isUnderTest&&!this._reportedReadyForTest&&(this._reportedReadyForTest=!0,console.error("Recorder script ready for test"))},500),globalThis._playwrightRefreshOverlay=()=>{this._pollRecorderMode().catch(e=>console.log(e))},globalThis._playwrightRefreshOverlay()}_refreshListenersIfNeeded(){document.documentElement[r]||(document.documentElement[r]=!0,function(e){for(const t of e)t();e.splice(0,e.length)}(this._listeners),this._listeners=[h(document,"click",e=>this._onClick(e),!0),h(document,"auxclick",e=>this._onClick(e),!0),h(document,"input",e=>this._onInput(e),!0),h(document,"keydown",e=>this._onKeyDown(e),!0),h(document,"keyup",e=>this._onKeyUp(e),!0),h(document,"mousedown",e=>this._onMouseDown(e),!0),h(document,"mouseup",e=>this._onMouseUp(e),!0),h(document,"mousemove",e=>this._onMouseMove(e),!0),h(document,"mouseleave",e=>this._onMouseLeave(e),!0),h(document,"focus",()=>this._onFocus(),!0),h(document,"scroll",()=>{this._hoveredModel=null,this._actionPointElement.hidden=!0,this._updateHighlight()},!0)],document.documentElement.appendChild(this._outerGlassPaneElement))}async _pollRecorderMode(){var e;this._pollRecorderModeTimer&&clearTimeout(this._pollRecorderModeTimer);const t=await globalThis._playwrightRecorderState().catch(e=>null);if(!t)return void(this._pollRecorderModeTimer=setTimeout(()=>this._pollRecorderMode(),1e3));const{mode:n,actionPoint:r,actionSelector:i}=t;n!==this._mode&&(this._mode=n,this._clearHighlight()),r&&this._actionPoint&&r.x===this._actionPoint.x&&r.y===this._actionPoint.y||(r||this._actionPoint)&&(r?(this._actionPointElement.style.top=r.y+"px",this._actionPointElement.style.left=r.x+"px",this._actionPointElement.hidden=!1):this._actionPointElement.hidden=!0,this._actionPoint=r),!this._actionSelector||null!==(e=this._hoveredModel)&&void 0!==e&&e.elements.length||(this._actionSelector=void 0),i!==this._actionSelector&&(this._hoveredModel=i?(0,o.querySelector)(this._injectedScript,i,document):null,this._updateHighlight(),this._actionSelector=i),this._pollRecorderModeTimer=setTimeout(()=>this._pollRecorderMode(),1e3)}_clearHighlight(){this._hoveredModel=null,this._activeModel=null,this._updateHighlight()}_actionInProgress(e){return!!this._performingAction||(l(e),!1)}_consumedDueToNoModel(e,t){return!t&&(l(e),!0)}_consumedDueWrongTarget(e){return(!this._activeModel||this._activeModel.elements[0]!==this._deepEventTarget(e))&&(l(e),!0)}_onClick(e){if("inspecting"===this._mode&&globalThis._playwrightRecorderSetSelector(this._hoveredModel?this._hoveredModel.selector:""),this._shouldIgnoreMouseEvent(e))return;if(this._actionInProgress(e))return;if(this._consumedDueToNoModel(e,this._hoveredModel))return;const t=a(this._deepEventTarget(e));t?this._performAction({name:t.checked?"check":"uncheck",selector:this._hoveredModel.selector,signals:[]}):this._performAction({name:"click",selector:this._hoveredModel.selector,signals:[],button:c(e),modifiers:s(e),clickCount:e.detail})}_shouldIgnoreMouseEvent(e){const t=this._deepEventTarget(e);if("none"===this._mode)return!0;if("inspecting"===this._mode)return l(e),!0;const n=t.nodeName;return"SELECT"===n||!("INPUT"!==n||!["date"].includes(t.type))}_onMouseDown(e){this._shouldIgnoreMouseEvent(e)||(this._performingAction||l(e),this._activeModel=this._hoveredModel)}_onMouseUp(e){this._shouldIgnoreMouseEvent(e)||this._performingAction||l(e)}_onMouseMove(e){if("none"===this._mode)return;const t=this._deepEventTarget(e);this._hoveredElement!==t&&(this._hoveredElement=t,this._updateModelForHoveredElement())}_onMouseLeave(e){this._deepEventTarget(e).nodeType===Node.DOCUMENT_NODE&&(this._hoveredElement=null,this._updateModelForHoveredElement())}_onFocus(){const e=this._deepActiveElement(document),t=e?(0,o.generateSelector)(this._injectedScript,e):null;this._activeModel=t&&t.selector?t:null,this._params.isUnderTest&&console.error("Highlight updated for test: "+(t?t.selector:null))}_updateModelForHoveredElement(){if(!this._hoveredElement)return this._hoveredModel=null,void this._updateHighlight();const e=this._hoveredElement,{selector:t,elements:n}=(0,o.generateSelector)(this._injectedScript,e);this._hoveredModel&&this._hoveredModel.selector===t||this._hoveredElement!==e||(this._hoveredModel=t?{selector:t,elements:n}:null,this._updateHighlight(),this._params.isUnderTest&&console.error("Highlight updated for test: "+t))}_updateHighlight(){const e=this._hoveredModel?this._hoveredModel.elements:[];this._tooltipElement.textContent=this._hoveredModel?this._hoveredModel.selector:"",this._tooltipElement.style.top="0",this._tooltipElement.style.left="0",this._tooltipElement.style.display="flex";const t=e.map(e=>e.getBoundingClientRect()),n=this._tooltipElement.offsetWidth,o=this._tooltipElement.offsetHeight,r=this._innerGlassPaneElement.offsetWidth,i=this._innerGlassPaneElement.offsetHeight;if(t.length){const e=t[0];let s=e.left;s+n>r-5&&(s=r-n-5);let c=e.bottom+5;c+o>i-5&&(c=e.top>o+5?e.top-o-5:i-5-o),this._tooltipElement.style.top=c+"px",this._tooltipElement.style.left=s+"px"}else this._tooltipElement.style.display="none";const s=this._highlightElements;this._highlightElements=[];for(const e of t){const t=s.length?s.shift():this._createHighlightElement(),n="recording"===this._mode?"#dc6f6f7f":"#6fa8dc7f";t.style.backgroundColor=this._highlightElements.length?"#f6b26b7f":n,t.style.left=e.x+"px",t.style.top=e.y+"px",t.style.width=e.width+"px",t.style.height=e.height+"px",t.style.display="block",this._highlightElements.push(t)}for(const e of s)e.style.display="none",this._highlightElements.push(e)}_createHighlightElement(){const e=document.createElement("x-pw-highlight");return e.style.position="absolute",e.style.top="0",e.style.left="0",e.style.width="0",e.style.height="0",e.style.boxSizing="border-box",this._glassPaneShadow.appendChild(e),e}_onInput(e){if("recording"!==this._mode)return!0;const t=this._deepEventTarget(e);if(["INPUT","TEXTAREA"].includes(t.nodeName)){const n=t,o=(n.type||"").toLowerCase();if("checkbox"===o)return;if("file"===o)return void globalThis._playwrightRecorderRecordAction({name:"setInputFiles",selector:this._activeModel.selector,signals:[],files:[...n.files||[]].map(e=>e.name)});if(this._consumedDueWrongTarget(e))return;globalThis._playwrightRecorderRecordAction({name:"fill",selector:this._activeModel.selector,signals:[],text:n.value})}if("SELECT"===t.nodeName){const n=t;if(this._actionInProgress(e))return;this._performAction({name:"select",selector:this._hoveredModel.selector,options:[...n.selectedOptions].map(e=>e.value),signals:[]})}}_shouldGenerateKeyPressFor(e){if(["Backspace","Delete","AltGraph"].includes(e.key))return!1;if("@"===e.key&&"KeyL"===e.code)return!1;if(navigator.platform.includes("Mac")){if("v"===e.key&&e.metaKey)return!1}else{if("v"===e.key&&e.ctrlKey)return!1;if("Insert"===e.key&&e.shiftKey)return!1}if(["Shift","Control","Meta","Alt"].includes(e.key))return!1;const t=e.ctrlKey||e.altKey||e.metaKey;return!(1===e.key.length&&!t)||!!a(this._deepEventTarget(e))}_onKeyDown(e){if("inspecting"!==this._mode){if("recording"!==this._mode)return!0;if(this._shouldGenerateKeyPressFor(e))if(this._actionInProgress(e))this._expectProgrammaticKeyUp=!0;else if(!this._consumedDueWrongTarget(e)){if(" "===e.key){const t=a(this._deepEventTarget(e));if(t)return void this._performAction({name:t.checked?"uncheck":"check",selector:this._activeModel.selector,signals:[]})}this._performAction({name:"press",selector:this._activeModel.selector,signals:[],key:e.key,modifiers:s(e)})}}else l(e)}_onKeyUp(e){this._shouldGenerateKeyPressFor(e)&&(this._expectProgrammaticKeyUp?this._expectProgrammaticKeyUp=!1:l(e))}async _performAction(e){this._performingAction=!0,await globalThis._playwrightRecorderPerformAction(e).catch(()=>{}),this._performingAction=!1,this._updateModelForHoveredElement(),this._onFocus(),this._params.isUnderTest&&console.error("Action performed for test: "+JSON.stringify({hovered:this._hoveredModel?this._hoveredModel.selector:null,active:this._activeModel?this._activeModel.selector:null}))}_deepEventTarget(e){return e.composedPath()[0]}_deepActiveElement(e){let t=e.activeElement;for(;t&&t.shadowRoot&&t.shadowRoot.activeElement;)t=t.shadowRoot.activeElement;return t}}function s(e){return(e.altKey?1:0)|(e.ctrlKey?2:0)|(e.metaKey?4:0)|(e.shiftKey?8:0)}function c(e){switch(e.which){case 1:return"left";case 2:return"middle";case 3:return"right"}return"left"}function l(e){e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation()}function a(e){if(!e||"INPUT"!==e.nodeName)return null;const t=e;return"checkbox"===t.type?t:null}function h(e,t,n,o){e.addEventListener(t,n,o);return()=>{e.removeEventListener(t,n,o)}}t.Recorder=i;var u=i;t.default=u}]).default;
\ No newline at end of file
diff --git a/node_modules/playwright/lib/server/injected/packed/utilityScriptSource.js b/node_modules/playwright/lib/server/injected/packed/utilityScriptSource.js
new file mode 100644
index 0000000..2d46d24
--- /dev/null
+++ b/node_modules/playwright/lib/server/injected/packed/utilityScriptSource.js
@@ -0,0 +1 @@
+var pwExport=function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=7)}({4:function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==typeof window&&(r=window)}e.exports=r},7:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(8);t.default=class{evaluate(t,r,o,i,...u){const f=u.slice(0,i),a=u.slice(i),c=f.map(e=>(0,n.parseEvaluationResultValue)(e,a));let l=e.eval(o);return!0===t?l=l(...c):!1===t?l=l:"function"==typeof l&&(l=l(...c)),r?this._promiseAwareJsonValueNoThrow(l):l}jsonValue(e,t){if(!Object.is(t,void 0))return(0,n.serializeAsCallArgument)(t,e=>({fallThrough:e}))}_promiseAwareJsonValueNoThrow(e){const t=e=>{try{return this.jsonValue(!0,e)}catch(e){return}};return e&&"object"==typeof e&&"function"==typeof e.then?(async()=>{const r=await e;return t(r)})():t(e)}}}).call(this,r(4))},8:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.parseEvaluationResultValue=function e(t,r=[]){if(Object.is(t,void 0))return;if("object"==typeof t&&t){if("v"in t){if("undefined"===t.v)return;return"null"===t.v?null:"NaN"===t.v?NaN:"Infinity"===t.v?1/0:"-Infinity"===t.v?-1/0:"-0"===t.v?-0:void 0}if("d"in t)return new Date(t.d);if("r"in t)return new RegExp(t.r.p,t.r.f);if("a"in t)return t.a.map(t=>e(t,r));if("o"in t){const n={};for(const{k:o,v:i}of t.o)n[o]=e(i,r);return n}if("h"in t)return r[t.h]}return t},t.serializeAsCallArgument=function(t,r){return function t(r,n,o){const i=n(r);if(!("fallThrough"in i))return i;r=i.fallThrough;if(o.has(r))throw new Error("Argument is a circular structure");if("symbol"==typeof r)return{v:"undefined"};if(Object.is(r,void 0))return{v:"undefined"};if(Object.is(r,null))return{v:"null"};if(Object.is(r,NaN))return{v:"NaN"};if(Object.is(r,1/0))return{v:"Infinity"};if(Object.is(r,-1/0))return{v:"-Infinity"};if(Object.is(r,-0))return{v:"-0"};if("boolean"==typeof r)return r;if("number"==typeof r)return r;if("string"==typeof r)return r;if(u=r,u instanceof Error||u&&u.__proto__&&"Error"===u.__proto__.name){const t=r;return"captureStackTrace"in e.Error?t.stack||"":`${t.name}: ${t.message}\n${t.stack}`}var u;if(function(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}(r))return{d:r.toJSON()};if(function(e){return e instanceof RegExp||"[object RegExp]"===Object.prototype.toString.call(e)}(r))return{r:{p:r.source,f:r.flags}};if(Array.isArray(r)){const e=[];o.add(r);for(let i=0;i<r.length;++i)e.push(t(r[i],n,o));return o.delete(r),{a:e}}if("object"==typeof r){const e=[];o.add(r);for(const i of Object.keys(r)){let u;try{u=r[i]}catch(e){continue}"toJSON"===i&&"function"==typeof u?e.push({k:i,v:{o:[]}}):e.push({k:i,v:t(u,n,o)})}return o.delete(r),{o:e}}}(t,r,new Set)}}).call(this,r(4))}}).default;
\ No newline at end of file
diff --git a/node_modules/playwright/lib/server/injected/reactSelectorEngine.js b/node_modules/playwright/lib/server/injected/reactSelectorEngine.js
new file mode 100644
index 0000000..e1b1869
--- /dev/null
+++ b/node_modules/playwright/lib/server/injected/reactSelectorEngine.js
@@ -0,0 +1,161 @@
+"use strict";
+
+Object.defineProperty(exports, "__esModule", {
+  value: true
+});
+exports.ReactEngine = void 0;
+
+var _componentUtils = require("../common/componentUtils");
+
+/**
+ * Copyright (c) Microsoft Corporation.
+ *
+ * Licensed under the Apache License, Version 2.0 (the "License");
+ * you may not use this file except in compliance with the License.
+ * You may obtain a copy of the License at
+ *
+ * http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS,
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ * See the License for the specific language governing permissions and
+ * limitations under the License.
+ */
+function getComponentName(reactElement) {
+  // React 16+
+  // @see https://github.com/baruchvlz/resq/blob/5c15a5e04d3f7174087248f5a158c3d6dcc1ec72/src/utils.js#L16
+  if (typeof reactElement.type === 'function') return reactElement.type.displayName || reactElement.type.name || 'Anonymous';
+  if (typeof reactElement.type === 'string') return reactElement.type; // React 15
+  // @see https://github.com/facebook/react/blob/2edf449803378b5c58168727d4f123de3ba5d37f/packages/react-devtools-shared/src/backend/legacy/renderer.js#L59
+
+  if (reactElement._currentElement) {
+    const elementType = reactElement._currentElement.type;
+    if (typeof elementType === 'string') return elementType;
+    if (typeof elementType === 'function') return elementType.displayName || elementType.name || 'Anonymous';
+  }
+
+  return '';
+}
+
+function getChildren(reactElement) {
+  // React 16+
+  // @see https://github.com/baruchvlz/resq/blob/5c15a5e04d3f7174087248f5a158c3d6dcc1ec72/src/utils.js#L192
+  if (reactElement.child) {
+    const children = [];
+
+    for (let child = reactElement.child; child; child = child.sibling) children.push(child);
+
+    return children;
+  } // React 15
+  // @see https://github.com/facebook/react/blob/2edf449803378b5c58168727d4f123de3ba5d37f/packages/react-devtools-shared/src/backend/legacy/renderer.js#L101
+
+
+  if (!reactElement._currentElement) return [];
+
+  const isKnownElement = reactElement => {
+    var _reactElement$_curren;
+
+    const elementType = (_reactElement$_curren = reactElement._currentElement) === null || _reactElement$_curren === void 0 ? void 0 : _reactElement$_curren.type;
+    return typeof elementType === 'function' || typeof elementType === 'string';
+  };
+
+  if (reactElement._renderedComponent) {
+    const child = reactElement._renderedComponent;
+    return isKnownElement(child) ? [child] : [];
+  }
+
+  if (reactElement._renderedChildren) return [...Object.values(reactElement._renderedChildren)].filter(isKnownElement);
+  return [];
+}
+
+function getProps(reactElement) {
+  var _reactElement$_curren2;
+
+  const props = // React 16+
+  reactElement.memoizedProps || ( // React 15
+  (_reactElement$_curren2 = reactElement._currentElement) === null || _reactElement$_curren2 === void 0 ? void 0 : _reactElement$_curren2.props);
+  if (!props || typeof props === 'string') return props;
+  const result = { ...props
+  };
+  delete result.children;
+  return result;
+}
+
+function buildComponentsTree(reactElement) {
+  var _reactElement$_render;
+
+  const treeNode = {
+    name: getComponentName(reactElement),
+    children: getChildren(reactElement).map(buildComponentsTree),
+    rootElements: [],
+    props: getProps(reactElement)
+  };
+  const rootElement = // React 16+
+  // @see https://github.com/baruchvlz/resq/blob/5c15a5e04d3f7174087248f5a158c3d6dcc1ec72/src/utils.js#L29
+  reactElement.stateNode || // React 15
+  reactElement._hostNode || ((_reactElement$_render = reactElement._renderedComponent) === null || _reactElement$_render === void 0 ? void 0 : _reactElement$_render._hostNode);
+
+  if (rootElement instanceof Element) {
+    treeNode.rootElements.push(rootElement);
+  } else {
+    for (const child of treeNode.children) treeNode.rootElements.push(...child.rootElements);
+  }
+
+  return treeNode;
+}
+
+function filterComponentsTree(treeNode, searchFn, result = []) {
+  if (searchFn(treeNode)) result.push(treeNode);
+
+  for (const child of treeNode.children) filterComponentsTree(child, searchFn, result);
+
+  return result;
+}
+
+function findReactRoot() {
+  const walker = document.createTreeWalker(document);
+
+  while (walker.nextNode()) {
+    // @see https://github.com/baruchvlz/resq/blob/5c15a5e04d3f7174087248f5a158c3d6dcc1ec72/src/utils.js#L329
+    if (walker.currentNode.hasOwnProperty('_reactRootContainer')) return walker.currentNode._reactRootContainer._internalRoot.current;
+
+    for (const key of Object.keys(walker.currentNode)) {
+      // @see https://github.com/baruchvlz/resq/blob/5c15a5e04d3f7174087248f5a158c3d6dcc1ec72/src/utils.js#L334
+      if (key.startsWith('__reactInternalInstance') || key.startsWith('__reactFiber')) return walker.currentNode[key];
+    }
+  }
+
+  return undefined;
+}
+
+const ReactEngine = {
+  queryAll(scope, selector) {
+    const {
+      name,
+      attributes
+    } = (0, _componentUtils.parseComponentSelector)(selector);
+    const reactRoot = findReactRoot();
+    if (!reactRoot) return [];
+    const tree = buildComponentsTree(reactRoot);
+    const treeNodes = filterComponentsTree(tree, treeNode => {
+      if (name && treeNode.name !== name) return false;
+      if (treeNode.rootElements.some(domNode => !scope.contains(domNode))) return false;
+
+      for (const attr of attributes) {
+        if (!(0, _componentUtils.checkComponentAttribute)(treeNode.props, attr)) return false;
+      }
+
+      return true;
+    });
+    const allRootElements = new Set();
+
+    for (const treeNode of treeNodes) {
+      for (const domNode of treeNode.rootElements) allRootElements.add(domNode);
+    }
+
+    return [...allRootElements];
+  }
+
+};
+exports.ReactEngine = ReactEngine;
\ No newline at end of file
diff --git a/node_modules/playwright/lib/server/injected/selectorEngine.js b/node_modules/playwright/lib/server/injected/selectorEngine.js
new file mode 100644
index 0000000..430afc1
--- /dev/null
+++ b/node_modules/playwright/lib/server/injected/selectorEngine.js
@@ -0,0 +1,5 @@
+"use strict";
+
+Object.defineProperty(exports, "__esModule", {
+  value: true
+});
\ No newline at end of file
diff --git a/node_modules/playwright/lib/server/injected/selectorEvaluator.js b/node_modules/playwright/lib/server/injected/selectorEvaluator.js
new file mode 100644
index 0000000..add20bc
--- /dev/null
+++ b/node_modules/playwright/lib/server/injected/selectorEvaluator.js
@@ -0,0 +1,720 @@
+"use strict";
+
+Object.defineProperty(exports, "__esModule", {
+  value: true
+});
+exports.createLaxTextMatcher = createLaxTextMatcher;
+exports.createStrictTextMatcher = createStrictTextMatcher;
+exports.createRegexTextMatcher = createRegexTextMatcher;
+exports.elementText = elementText;
+exports.elementMatchesText = elementMatchesText;
+exports.parentElementOrShadowHost = parentElementOrShadowHost;
+exports.isVisible = isVisible;
+exports.SelectorEvaluatorImpl = void 0;
+
+var _selectorParser = require("../common/selectorParser");
+
+/**
+ * Copyright (c) Microsoft Corporation.
+ *
+ * Licensed under the Apache License, Version 2.0 (the "License");
+ * you may not use this file except in compliance with the License.
+ * You may obtain a copy of the License at
+ *
+ * http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS,
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ * See the License for the specific language governing permissions and
+ * limitations under the License.
+ */
+class SelectorEvaluatorImpl {
+  constructor(extraEngines) {
+    this._engines = new Map();
+    this._cacheQueryCSS = new Map();
+    this._cacheMatches = new Map();
+    this._cacheQuery = new Map();
+    this._cacheMatchesSimple = new Map();
+    this._cacheMatchesParents = new Map();
+    this._cacheCallMatches = new Map();
+    this._cacheCallQuery = new Map();
+    this._cacheQuerySimple = new Map();
+    this._cacheText = new Map();
+    this._scoreMap = void 0;
+    this._retainCacheCounter = 0;
+
+    for (const [name, engine] of extraEngines) this._engines.set(name, engine);
+
+    this._engines.set('not', notEngine);
+
+    this._engines.set('is', isEngine);
+
+    this._engines.set('where', isEngine);
+
+    this._engines.set('has', hasEngine);
+
+    this._engines.set('scope', scopeEngine);
+
+    this._engines.set('light', lightEngine);
+
+    this._engines.set('visible', visibleEngine);
+
+    this._engines.set('text', textEngine);
+
+    this._engines.set('text-is', textIsEngine);
+
+    this._engines.set('text-matches', textMatchesEngine);
+
+    this._engines.set('has-text', hasTextEngine);
+
+    this._engines.set('right-of', createPositionEngine('right-of', boxRightOf));
+
+    this._engines.set('left-of', createPositionEngine('left-of', boxLeftOf));
+
+    this._engines.set('above', createPositionEngine('above', boxAbove));
+
+    this._engines.set('below', createPositionEngine('below', boxBelow));
+
+    this._engines.set('near', createPositionEngine('near', boxNear));
+
+    this._engines.set('nth-match', nthMatchEngine);
+
+    const allNames = [...this._engines.keys()];
+    allNames.sort();
+    const parserNames = [..._selectorParser.customCSSNames];
+    parserNames.sort();
+    if (allNames.join('|') !== parserNames.join('|')) throw new Error(`Please keep customCSSNames in sync with evaluator engines: ${allNames.join('|')} vs ${parserNames.join('|')}`);
+  }
+
+  begin() {
+    ++this._retainCacheCounter;
+  }
+
+  end() {
+    --this._retainCacheCounter;
+
+    if (!this._retainCacheCounter) {
+      this._cacheQueryCSS.clear();
+
+      this._cacheMatches.clear();
+
+      this._cacheQuery.clear();
+
+      this._cacheMatchesSimple.clear();
+
+      this._cacheMatchesParents.clear();
+
+      this._cacheCallMatches.clear();
+
+      this._cacheCallQuery.clear();
+
+      this._cacheQuerySimple.clear();
+
+      this._cacheText.clear();
+    }
+  }
+
+  _cached(cache, main, rest, cb) {
+    if (!cache.has(main)) cache.set(main, []);
+    const entries = cache.get(main);
+    const entry = entries.find(e => rest.every((value, index) => e.rest[index] === value));
+    if (entry) return entry.result;
+    const result = cb();
+    entries.push({
+      rest,
+      result
+    });
+    return result;
+  }
+
+  _checkSelector(s) {
+    const wellFormed = typeof s === 'object' && s && (Array.isArray(s) || 'simples' in s && s.simples.length);
+    if (!wellFormed) throw new Error(`Malformed selector "${s}"`);
+    return s;
+  }
+
+  matches(element, s, context) {
+    const selector = this._checkSelector(s);
+
+    this.begin();
+
+    try {
+      return this._cached(this._cacheMatches, element, [selector, context.scope, context.pierceShadow], () => {
+        if (Array.isArray(selector)) return this._matchesEngine(isEngine, element, selector, context);
+        if (!this._matchesSimple(element, selector.simples[selector.simples.length - 1].selector, context)) return false;
+        return this._matchesParents(element, selector, selector.simples.length - 2, context);
+      });
+    } finally {
+      this.end();
+    }
+  }
+
+  query(context, s) {
+    const selector = this._checkSelector(s);
+
+    this.begin();
+
+    try {
+      return this._cached(this._cacheQuery, selector, [context.scope, context.pierceShadow], () => {
+        if (Array.isArray(selector)) return this._queryEngine(isEngine, context, selector); // query() recursively calls itself, so we set up a new map for this particular query() call.
+
+        const previousScoreMap = this._scoreMap;
+        this._scoreMap = new Map();
+
+        let elements = this._querySimple(context, selector.simples[selector.simples.length - 1].selector);
+
+        elements = elements.filter(element => this._matchesParents(element, selector, selector.simples.length - 2, context));
+
+        if (this._scoreMap.size) {
+          elements.sort((a, b) => {
+            const aScore = this._scoreMap.get(a);
+
+            const bScore = this._scoreMap.get(b);
+
+            if (aScore === bScore) return 0;
+            if (aScore === undefined) return 1;
+            if (bScore === undefined) return -1;
+            return aScore - bScore;
+          });
+        }
+
+        this._scoreMap = previousScoreMap;
+        return elements;
+      });
+    } finally {
+      this.end();
+    }
+  }
+
+  _markScore(element, score) {
+    // HACK ALERT: temporary marks an element with a score, to be used
+    // for sorting at the end of the query().
+    if (this._scoreMap) this._scoreMap.set(element, score);
+  }
+
+  _matchesSimple(element, simple, context) {
+    return this._cached(this._cacheMatchesSimple, element, [simple, context.scope, context.pierceShadow], () => {
+      const isPossiblyScopeClause = simple.functions.some(f => f.name === 'scope' || f.name === 'is');
+      if (!isPossiblyScopeClause && element === context.scope) return false;
+      if (simple.css && !this._matchesCSS(element, simple.css)) return false;
+
+      for (const func of simple.functions) {
+        if (!this._matchesEngine(this._getEngine(func.name), element, func.args, context)) return false;
+      }
+
+      return true;
+    });
+  }
+
+  _querySimple(context, simple) {
+    if (!simple.functions.length) return this._queryCSS(context, simple.css || '*');
+    return this._cached(this._cacheQuerySimple, simple, [context.scope, context.pierceShadow], () => {
+      let css = simple.css;
+      const funcs = simple.functions;
+      if (css === '*' && funcs.length) css = undefined;
+      let elements;
+      let firstIndex = -1;
+
+      if (css !== undefined) {
+        elements = this._queryCSS(context, css);
+      } else {
+        firstIndex = funcs.findIndex(func => this._getEngine(func.name).query !== undefined);
+        if (firstIndex === -1) firstIndex = 0;
+        elements = this._queryEngine(this._getEngine(funcs[firstIndex].name), context, funcs[firstIndex].args);
+      }
+
+      for (let i = 0; i < funcs.length; i++) {
+        if (i === firstIndex) continue;
+
+        const engine = this._getEngine(funcs[i].name);
+
+        if (engine.matches !== undefined) elements = elements.filter(e => this._matchesEngine(engine, e, funcs[i].args, context));
+      }
+
+      for (let i = 0; i < funcs.length; i++) {
+        if (i === firstIndex) continue;
+
+        const engine = this._getEngine(funcs[i].name);
+
+        if (engine.matches === undefined) elements = elements.filter(e => this._matchesEngine(engine, e, funcs[i].args, context));
+      }
+
+      return elements;
+    });
+  }
+
+  _matchesParents(element, complex, index, context) {
+    if (index < 0) return true;
+    return this._cached(this._cacheMatchesParents, element, [complex, index, context.scope, context.pierceShadow], () => {
+      const {
+        selector: simple,
+        combinator
+      } = complex.simples[index];
+
+      if (combinator === '>') {
+        const parent = parentElementOrShadowHostInContext(element, context);
+        if (!parent || !this._matchesSimple(parent, simple, context)) return false;
+        return this._matchesParents(parent, complex, index - 1, context);
+      }
+
+      if (combinator === '+') {
+        const previousSibling = previousSiblingInContext(element, context);
+        if (!previousSibling || !this._matchesSimple(previousSibling, simple, context)) return false;
+        return this._matchesParents(previousSibling, complex, index - 1, context);
+      }
+
+      if (combinator === '') {
+        let parent = parentElementOrShadowHostInContext(element, context);
+
+        while (parent) {
+          if (this._matchesSimple(parent, simple, context)) {
+            if (this._matchesParents(parent, complex, index - 1, context)) return true;
+            if (complex.simples[index - 1].combinator === '') break;
+          }
+
+          parent = parentElementOrShadowHostInContext(parent, context);
+        }
+
+        return false;
+      }
+
+      if (combinator === '~') {
+        let previousSibling = previousSiblingInContext(element, context);
+
+        while (previousSibling) {
+          if (this._matchesSimple(previousSibling, simple, context)) {
+            if (this._matchesParents(previousSibling, complex, index - 1, context)) return true;
+            if (complex.simples[index - 1].combinator === '~') break;
+          }
+
+          previousSibling = previousSiblingInContext(previousSibling, context);
+        }
+
+        return false;
+      }
+
+      if (combinator === '>=') {
+        let parent = element;
+
+        while (parent) {
+          if (this._matchesSimple(parent, simple, context)) {
+            if (this._matchesParents(parent, complex, index - 1, context)) return true;
+            if (complex.simples[index - 1].combinator === '') break;
+          }
+
+          parent = parentElementOrShadowHostInContext(parent, context);
+        }
+
+        return false;
+      }
+
+      throw new Error(`Unsupported combinator "${combinator}"`);
+    });
+  }
+
+  _matchesEngine(engine, element, args, context) {
+    if (engine.matches) return this._callMatches(engine, element, args, context);
+    if (engine.query) return this._callQuery(engine, args, context).includes(element);
+    throw new Error(`Selector engine should implement "matches" or "query"`);
+  }
+
+  _queryEngine(engine, context, args) {
+    if (engine.query) return this._callQuery(engine, args, context);
+    if (engine.matches) return this._queryCSS(context, '*').filter(element => this._callMatches(engine, element, args, context));
+    throw new Error(`Selector engine should implement "matches" or "query"`);
+  }
+
+  _callMatches(engine, element, args, context) {
+    return this._cached(this._cacheCallMatches, element, [engine, context.scope, context.pierceShadow, ...args], () => {
+      return engine.matches(element, args, context, this);
+    });
+  }
+
+  _callQuery(engine, args, context) {
+    return this._cached(this._cacheCallQuery, engine, [context.scope, context.pierceShadow, ...args], () => {
+      return engine.query(context, args, this);
+    });
+  }
+
+  _matchesCSS(element, css) {
+    return element.matches(css);
+  }
+
+  _queryCSS(context, css) {
+    return this._cached(this._cacheQueryCSS, css, [context.scope, context.pierceShadow], () => {
+      let result = [];
+
+      function query(root) {
+        result = result.concat([...root.querySelectorAll(css)]);
+        if (!context.pierceShadow) return;
+        if (root.shadowRoot) query(root.shadowRoot);
+
+        for (const element of root.querySelectorAll('*')) {
+          if (element.shadowRoot) query(element.shadowRoot);
+        }
+      }
+
+      query(context.scope);
+      return result;
+    });
+  }
+
+  _getEngine(name) {
+    const engine = this._engines.get(name);
+
+    if (!engine) throw new Error(`Unknown selector engine "${name}"`);
+    return engine;
+  }
+
+}
+
+exports.SelectorEvaluatorImpl = SelectorEvaluatorImpl;
+const isEngine = {
+  matches(element, args, context, evaluator) {
+    if (args.length === 0) throw new Error(`"is" engine expects non-empty selector list`);
+    return args.some(selector => evaluator.matches(element, selector, context));
+  },
+
+  query(context, args, evaluator) {
+    if (args.length === 0) throw new Error(`"is" engine expects non-empty selector list`);
+    let elements = [];
+
+    for (const arg of args) elements = elements.concat(evaluator.query(context, arg));
+
+    return args.length === 1 ? elements : sortInDOMOrder(elements);
+  }
+
+};
+const hasEngine = {
+  matches(element, args, context, evaluator) {
+    if (args.length === 0) throw new Error(`"has" engine expects non-empty selector list`);
+    return evaluator.query({ ...context,
+      scope: element
+    }, args).length > 0;
+  } // TODO: we do not implement "relative selectors", as in "div:has(> span)" or "div:has(+ span)".
+  // TODO: we can implement efficient "query" by matching "args" and returning
+  // all parents/descendants, just have to be careful with the ":scope" matching.
+
+
+};
+const scopeEngine = {
+  matches(element, args, context, evaluator) {
+    if (args.length !== 0) throw new Error(`"scope" engine expects no arguments`);
+    if (context.scope.nodeType === 9
+    /* Node.DOCUMENT_NODE */
+    ) return element === context.scope.documentElement;
+    return element === context.scope;
+  },
+
+  query(context, args, evaluator) {
+    if (args.length !== 0) throw new Error(`"scope" engine expects no arguments`);
+
+    if (context.scope.nodeType === 9
+    /* Node.DOCUMENT_NODE */
+    ) {
+      const root = context.scope.documentElement;
+      return root ? [root] : [];
+    }
+
+    if (context.scope.nodeType === 1
+    /* Node.ELEMENT_NODE */
+    ) return [context.scope];
+    return [];
+  }
+
+};
+const notEngine = {
+  matches(element, args, context, evaluator) {
+    if (args.length === 0) throw new Error(`"not" engine expects non-empty selector list`);
+    return !evaluator.matches(element, args, context);
+  }
+
+};
+const lightEngine = {
+  query(context, args, evaluator) {
+    return evaluator.query({ ...context,
+      pierceShadow: false
+    }, args);
+  },
+
+  matches(element, args, context, evaluator) {
+    return evaluator.matches(element, args, { ...context,
+      pierceShadow: false
+    });
+  }
+
+};
+const visibleEngine = {
+  matches(element, args, context, evaluator) {
+    if (args.length) throw new Error(`"visible" engine expects no arguments`);
+    return isVisible(element);
+  }
+
+};
+const textEngine = {
+  matches(element, args, context, evaluator) {
+    if (args.length !== 1 || typeof args[0] !== 'string') throw new Error(`"text" engine expects a single string`);
+    const matcher = createLaxTextMatcher(args[0]);
+    return elementMatchesText(evaluator, element, matcher) === 'self';
+  }
+
+};
+const textIsEngine = {
+  matches(element, args, context, evaluator) {
+    if (args.length !== 1 || typeof args[0] !== 'string') throw new Error(`"text-is" engine expects a single string`);
+    const matcher = createStrictTextMatcher(args[0]);
+    return elementMatchesText(evaluator, element, matcher) !== 'none';
+  }
+
+};
+const textMatchesEngine = {
+  matches(element, args, context, evaluator) {
+    if (args.length === 0 || typeof args[0] !== 'string' || args.length > 2 || args.length === 2 && typeof args[1] !== 'string') throw new Error(`"text-matches" engine expects a regexp body and optional regexp flags`);
+    const matcher = createRegexTextMatcher(args[0], args.length === 2 ? args[1] : undefined);
+    return elementMatchesText(evaluator, element, matcher) === 'self';
+  }
+
+};
+const hasTextEngine = {
+  matches(element, args, context, evaluator) {
+    if (args.length !== 1 || typeof args[0] !== 'string') throw new Error(`"has-text" engine expects a single string`);
+    if (shouldSkipForTextMatching(element)) return false;
+    const matcher = createLaxTextMatcher(args[0]);
+    return matcher(elementText(evaluator, element));
+  }
+
+};
+
+function createLaxTextMatcher(text) {
+  text = text.trim().replace(/\s+/g, ' ').toLowerCase();
+  return elementText => {
+    const s = elementText.full.trim().replace(/\s+/g, ' ').toLowerCase();
+    return s.includes(text);
+  };
+}
+
+function createStrictTextMatcher(text) {
+  text = text.trim().replace(/\s+/g, ' ');
+  return elementText => {
+    return elementText.immediate.some(s => s.trim().replace(/\s+/g, ' ') === text);
+  };
+}
+
+function createRegexTextMatcher(source, flags) {
+  const re = new RegExp(source, flags);
+  return elementText => {
+    return re.test(elementText.full);
+  };
+}
+
+function shouldSkipForTextMatching(element) {
+  return element.nodeName === 'SCRIPT' || element.nodeName === 'STYLE' || document.head && document.head.contains(element);
+}
+
+function elementText(evaluator, root) {
+  let value = evaluator._cacheText.get(root);
+
+  if (value === undefined) {
+    value = {
+      full: '',
+      immediate: []
+    };
+
+    if (!shouldSkipForTextMatching(root)) {
+      let currentImmediate = '';
+
+      if (root instanceof HTMLInputElement && (root.type === 'submit' || root.type === 'button')) {
+        value = {
+          full: root.value,
+          immediate: [root.value]
+        };
+      } else {
+        for (let child = root.firstChild; child; child = child.nextSibling) {
+          if (child.nodeType === Node.TEXT_NODE) {
+            value.full += child.nodeValue || '';
+            currentImmediate += child.nodeValue || '';
+          } else {
+            if (currentImmediate) value.immediate.push(currentImmediate);
+            currentImmediate = '';
+            if (child.nodeType === Node.ELEMENT_NODE) value.full += elementText(evaluator, child).full;
+          }
+        }
+
+        if (currentImmediate) value.immediate.push(currentImmediate);
+        if (root.shadowRoot) value.full += elementText(evaluator, root.shadowRoot).full;
+      }
+    }
+
+    evaluator._cacheText.set(root, value);
+  }
+
+  return value;
+}
+
+function elementMatchesText(evaluator, element, matcher) {
+  if (shouldSkipForTextMatching(element)) return 'none';
+  if (!matcher(elementText(evaluator, element))) return 'none';
+
+  for (let child = element.firstChild; child; child = child.nextSibling) {
+    if (child.nodeType === Node.ELEMENT_NODE && matcher(elementText(evaluator, child))) return 'selfAndChildren';
+  }
+
+  if (element.shadowRoot && matcher(elementText(evaluator, element.shadowRoot))) return 'selfAndChildren';
+  return 'self';
+}
+
+function boxRightOf(box1, box2, maxDistance) {
+  const distance = box1.left - box2.right;
+  if (distance < 0 || maxDistance !== undefined && distance > maxDistance) return;
+  return distance + Math.max(box2.bottom - box1.bottom, 0) + Math.max(box1.top - box2.top, 0);
+}
+
+function boxLeftOf(box1, box2, maxDistance) {
+  const distance = box2.left - box1.right;
+  if (distance < 0 || maxDistance !== undefined && distance > maxDistance) return;
+  return distance + Math.max(box2.bottom - box1.bottom, 0) + Math.max(box1.top - box2.top, 0);
+}
+
+function boxAbove(box1, box2, maxDistance) {
+  const distance = box2.top - box1.bottom;
+  if (distance < 0 || maxDistance !== undefined && distance > maxDistance) return;
+  return distance + Math.max(box1.left - box2.left, 0) + Math.max(box2.right - box1.right, 0);
+}
+
+function boxBelow(box1, box2, maxDistance) {
+  const distance = box1.top - box2.bottom;
+  if (distance < 0 || maxDistance !== undefined && distance > maxDistance) return;
+  return distance + Math.max(box1.left - box2.left, 0) + Math.max(box2.right - box1.right, 0);
+}
+
+function boxNear(box1, box2, maxDistance) {
+  const kThreshold = maxDistance === undefined ? 50 : maxDistance;
+  let score = 0;
+  if (box1.left - box2.right >= 0) score += box1.left - box2.right;
+  if (box2.left - box1.right >= 0) score += box2.left - box1.right;
+  if (box2.top - box1.bottom >= 0) score += box2.top - box1.bottom;
+  if (box1.top - box2.bottom >= 0) score += box1.top - box2.bottom;
+  return score > kThreshold ? undefined : score;
+}
+
+function createPositionEngine(name, scorer) {
+  return {
+    matches(element, args, context, evaluator) {
+      const maxDistance = args.length && typeof args[args.length - 1] === 'number' ? args[args.length - 1] : undefined;
+      const queryArgs = maxDistance === undefined ? args : args.slice(0, args.length - 1);
+      if (args.length < 1 + (maxDistance === undefined ? 0 : 1)) throw new Error(`"${name}" engine expects a selector list and optional maximum distance in pixels`);
+      const box = element.getBoundingClientRect();
+      let bestScore;
+
+      for (const e of evaluator.query(context, queryArgs)) {
+        if (e === element) continue;
+        const score = scorer(box, e.getBoundingClientRect(), maxDistance);
+        if (score === undefined) continue;
+        if (bestScore === undefined || score < bestScore) bestScore = score;
+      }
+
+      if (bestScore === undefined) return false;
+
+      evaluator._markScore(element, bestScore);
+
+      return true;
+    }
+
+  };
+}
+
+const nthMatchEngine = {
+  query(context, args, evaluator) {
+    let index = args[args.length - 1];
+    if (args.length < 2) throw new Error(`"nth-match" engine expects non-empty selector list and an index argument`);
+    if (typeof index !== 'number' || index < 1) throw new Error(`"nth-match" engine expects a one-based index as the last argument`);
+    const elements = isEngine.query(context, args.slice(0, args.length - 1), evaluator);
+    index--; // one-based
+
+    return index < elements.length ? [elements[index]] : [];
+  }
+
+};
+
+function parentElementOrShadowHost(element) {
+  if (element.parentElement) return element.parentElement;
+  if (!element.parentNode) return;
+  if (element.parentNode.nodeType === Node.DOCUMENT_FRAGMENT_NODE && element.parentNode.host) return element.parentNode.host;
+}
+
+function parentElementOrShadowHostInContext(element, context) {
+  if (element === context.scope) return;
+  if (!context.pierceShadow) return element.parentElement || undefined;
+  return parentElementOrShadowHost(element);
+}
+
+function previousSiblingInContext(element, context) {
+  if (element === context.scope) return;
+  return element.previousElementSibling || undefined;
+}
+
+function isVisible(element) {
+  // Note: this logic should be similar to waitForDisplayedAtStablePosition() to avoid surprises.
+  if (!element.ownerDocument || !element.ownerDocument.defaultView) return true;
+  const style = element.ownerDocument.defaultView.getComputedStyle(element);
+  if (!style || style.visibility === 'hidden') return false;
+  const rect = element.getBoundingClientRect();
+  return rect.width > 0 && rect.height > 0;
+}
+
+function sortInDOMOrder(elements) {
+  const elementToEntry = new Map();
+  const roots = [];
+  const result = [];
+
+  function append(element) {
+    let entry = elementToEntry.get(element);
+    if (entry) return entry;
+    const parent = parentElementOrShadowHost(element);
+
+    if (parent) {
+      const parentEntry = append(parent);
+      parentEntry.children.push(element);
+    } else {
+      roots.push(element);
+    }
+
+    entry = {
+      children: [],
+      taken: false
+    };
+    elementToEntry.set(element, entry);
+    return entry;
+  }
+
+  elements.forEach(e => append(e).taken = true);
+
+  function visit(element) {
+    const entry = elementToEntry.get(element);
+    if (entry.taken) result.push(element);
+
+    if (entry.children.length > 1) {
+      const set = new Set(entry.children);
+      entry.children = [];
+      let child = element.firstElementChild;
+
+      while (child && entry.children.length < set.size) {
+        if (set.has(child)) entry.children.push(child);
+        child = child.nextElementSibling;
+      }
+
+      child = element.shadowRoot ? element.shadowRoot.firstElementChild : null;
+
+      while (child && entry.children.length < set.size) {
+        if (set.has(child)) entry.children.push(child);
+        child = child.nextElementSibling;
+      }
+    }
+
+    entry.children.forEach(visit);
+  }
+
+  roots.forEach(visit);
+  return result;
+}
\ No newline at end of file
diff --git a/node_modules/playwright/lib/server/injected/utilityScript.js b/node_modules/playwright/lib/server/injected/utilityScript.js
new file mode 100644
index 0000000..13e5ac5
--- /dev/null
+++ b/node_modules/playwright/lib/server/injected/utilityScript.js
@@ -0,0 +1,77 @@
+"use strict";
+
+Object.defineProperty(exports, "__esModule", {
+  value: true
+});
+exports.default = void 0;
+
+var _utilityScriptSerializers = require("../common/utilityScriptSerializers");
+
+/**
+ * Copyright (c) Microsoft Corporation.
+ *
+ * Licensed under the Apache License, Version 2.0 (the "License");
+ * you may not use this file except in compliance with the License.
+ * You may obtain a copy of the License at
+ *
+ * http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS,
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ * See the License for the specific language governing permissions and
+ * limitations under the License.
+ */
+class UtilityScript {
+  evaluate(isFunction, returnByValue, expression, argCount, ...argsAndHandles) {
+    const args = argsAndHandles.slice(0, argCount);
+    const handles = argsAndHandles.slice(argCount);
+    const parameters = args.map(a => (0, _utilityScriptSerializers.parseEvaluationResultValue)(a, handles));
+    let result = global.eval(expression);
+
+    if (isFunction === true) {
+      result = result(...parameters);
+    } else if (isFunction === false) {
+      result = result;
+    } else {
+      // auto detect.
+      if (typeof result === 'function') result = result(...parameters);
+    }
+
+    return returnByValue ? this._promiseAwareJsonValueNoThrow(result) : result;
+  }
+
+  jsonValue(returnByValue, value) {
+    // Special handling of undefined to work-around multi-step returnByValue handling in WebKit.
+    if (Object.is(value, undefined)) return undefined;
+    return (0, _utilityScriptSerializers.serializeAsCallArgument)(value, value => ({
+      fallThrough: value
+    }));
+  }
+
+  _promiseAwareJsonValueNoThrow(value) {
+    const safeJson = value => {
+      try {
+        return this.jsonValue(true, value);
+      } catch (e) {
+        return undefined;
+      }
+    };
+
+    if (value && typeof value === 'object' && typeof value.then === 'function') {
+      return (async () => {
+        // By using async function we ensure that return value is a native Promise,
+        // and not some overridden Promise in the page.
+        // This makes Firefox and WebKit debugging protocols recognize it as a Promise,
+        // properly await and return the value.
+        const promiseValue = await value;
+        return safeJson(promiseValue);
+      })();
+    }
+
+    return safeJson(value);
+  }
+
+}
+
+exports.default = UtilityScript;
\ No newline at end of file
diff --git a/node_modules/playwright/lib/server/injected/vueSelectorEngine.js b/node_modules/playwright/lib/server/injected/vueSelectorEngine.js
new file mode 100644
index 0000000..5bd419a
--- /dev/null
+++ b/node_modules/playwright/lib/server/injected/vueSelectorEngine.js
@@ -0,0 +1,234 @@
+"use strict";
+
+Object.defineProperty(exports, "__esModule", {
+  value: true
+});
+exports.VueEngine = void 0;
+
+var _componentUtils = require("../common/componentUtils");
+
+/**
+ * Copyright (c) Microsoft Corporation.
+ *
+ * Licensed under the Apache License, Version 2.0 (the "License");
+ * you may not use this file except in compliance with the License.
+ * You may obtain a copy of the License at
+ *
+ * http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS,
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ * See the License for the specific language governing permissions and
+ * limitations under the License.
+ */
+// @see https://github.com/vuejs/devtools/blob/14085e25313bcf8ffcb55f9092a40bc0fe3ac11c/packages/shared-utils/src/util.ts#L295
+function basename(filename, ext) {
+  const normalized = filename.replace(/^[a-zA-Z]:/, '').replace(/\\/g, '/');
+  let result = normalized.substring(normalized.lastIndexOf('/') + 1);
+  if (ext && result.endsWith(ext)) result = result.substring(0, result.length - ext.length);
+  return result;
+} // @see https://github.com/vuejs/devtools/blob/14085e25313bcf8ffcb55f9092a40bc0fe3ac11c/packages/shared-utils/src/util.ts#L41
+
+
+function toUpper(_, c) {
+  return c ? c.toUpperCase() : '';
+} // @see https://github.com/vuejs/devtools/blob/14085e25313bcf8ffcb55f9092a40bc0fe3ac11c/packages/shared-utils/src/util.ts#L23
+
+
+const classifyRE = /(?:^|[-_/])(\w)/g;
+
+const classify = str => {
+  return str && str.replace(classifyRE, toUpper);
+};
+
+function buildComponentsTreeVue3(instance) {
+  // @see https://github.com/vuejs/devtools/blob/e7132f3392b975e39e1d9a23cf30456c270099c2/packages/app-backend-vue3/src/components/util.ts#L47
+  function getComponentTypeName(options) {
+    const name = options.name || options._componentTag || options.__playwright_guessedName;
+    if (name) return name;
+    const file = options.__file; // injected by vue-loader
+
+    if (file) return classify(basename(file, '.vue'));
+  } // @see https://github.com/vuejs/devtools/blob/e7132f3392b975e39e1d9a23cf30456c270099c2/packages/app-backend-vue3/src/components/util.ts#L42
+
+
+  function saveComponentName(instance, key) {
+    instance.type.__playwright_guessedName = key;
+    return key;
+  } // @see https://github.com/vuejs/devtools/blob/e7132f3392b975e39e1d9a23cf30456c270099c2/packages/app-backend-vue3/src/components/util.ts#L29
+
+
+  function getInstanceName(instance) {
+    const name = getComponentTypeName(instance.type || {});
+    if (name) return name;
+    if (instance.root === instance) return 'Root';
+
+    for (const key in (_instance$parent = instance.parent) === null || _instance$parent === void 0 ? void 0 : (_instance$parent$type = _instance$parent.type) === null || _instance$parent$type === void 0 ? void 0 : _instance$parent$type.components) {
+      var _instance$parent, _instance$parent$type, _instance$parent2;
+
+      if (((_instance$parent2 = instance.parent) === null || _instance$parent2 === void 0 ? void 0 : _instance$parent2.type.components[key]) === instance.type) return saveComponentName(instance, key);
+    }
+
+    for (const key in (_instance$appContext = instance.appContext) === null || _instance$appContext === void 0 ? void 0 : _instance$appContext.components) {
+      var _instance$appContext;
+
+      if (instance.appContext.components[key] === instance.type) return saveComponentName(instance, key);
+    }
+
+    return 'Anonymous Component';
+  } // @see https://github.com/vuejs/devtools/blob/e7132f3392b975e39e1d9a23cf30456c270099c2/packages/app-backend-vue3/src/components/util.ts#L6
+
+
+  function isBeingDestroyed(instance) {
+    return instance._isBeingDestroyed || instance.isUnmounted;
+  } // @see https://github.com/vuejs/devtools/blob/e7132f3392b975e39e1d9a23cf30456c270099c2/packages/app-backend-vue3/src/components/util.ts#L16
+
+
+  function isFragment(instance) {
+    return instance.subTree.type.toString() === 'Symbol(Fragment)';
+  } // @see https://github.com/vuejs/devtools/blob/e7132f3392b975e39e1d9a23cf30456c270099c2/packages/app-backend-vue3/src/components/tree.ts#L79
+
+
+  function getInternalInstanceChildren(subTree) {
+    const list = [];
+    if (subTree.component) list.push(subTree.component);
+    if (subTree.suspense) list.push(...getInternalInstanceChildren(subTree.suspense.activeBranch));
+
+    if (Array.isArray(subTree.children)) {
+      subTree.children.forEach(childSubTree => {
+        if (childSubTree.component) list.push(childSubTree.component);else list.push(...getInternalInstanceChildren(childSubTree));
+      });
+    }
+
+    return list.filter(child => {
+      var _child$type$devtools;
+
+      return !isBeingDestroyed(child) && !((_child$type$devtools = child.type.devtools) !== null && _child$type$devtools !== void 0 && _child$type$devtools.hide);
+    });
+  } // @see https://github.com/vuejs/devtools/blob/e7132f3392b975e39e1d9a23cf30456c270099c2/packages/app-backend-vue3/src/components/el.ts#L8
+
+
+  function getRootElementsFromComponentInstance(instance) {
+    if (isFragment(instance)) return getFragmentRootElements(instance.subTree);
+    return [instance.subTree.el];
+  } // @see https://github.com/vuejs/devtools/blob/e7132f3392b975e39e1d9a23cf30456c270099c2/packages/app-backend-vue3/src/components/el.ts#L15
+
+
+  function getFragmentRootElements(vnode) {
+    if (!vnode.children) return [];
+    const list = [];
+
+    for (let i = 0, l = vnode.children.length; i < l; i++) {
+      const childVnode = vnode.children[i];
+      if (childVnode.component) list.push(...getRootElementsFromComponentInstance(childVnode.component));else if (childVnode.el) list.push(childVnode.el);
+    }
+
+    return list;
+  }
+
+  function buildComponentsTree(instance) {
+    return {
+      name: getInstanceName(instance),
+      children: getInternalInstanceChildren(instance.subTree).map(buildComponentsTree),
+      rootElements: getRootElementsFromComponentInstance(instance),
+      props: instance.props
+    };
+  }
+
+  return buildComponentsTree(instance);
+}
+
+function buildComponentsTreeVue2(instance) {
+  // @see https://github.com/vuejs/devtools/blob/e7132f3392b975e39e1d9a23cf30456c270099c2/packages/shared-utils/src/util.ts#L302
+  function getComponentName(options) {
+    const name = options.displayName || options.name || options._componentTag;
+    if (name) return name;
+    const file = options.__file; // injected by vue-loader
+
+    if (file) return classify(basename(file, '.vue'));
+  } // @see https://github.com/vuejs/devtools/blob/e7132f3392b975e39e1d9a23cf30456c270099c2/packages/app-backend-vue2/src/components/util.ts#L10
+
+
+  function getInstanceName(instance) {
+    const name = getComponentName(instance.$options || instance.fnOptions || {});
+    if (name) return name;
+    return instance.$root === instance ? 'Root' : 'Anonymous Component';
+  } // @see https://github.com/vuejs/devtools/blob/14085e25313bcf8ffcb55f9092a40bc0fe3ac11c/packages/app-backend-vue2/src/components/tree.ts#L103
+
+
+  function getInternalInstanceChildren(instance) {
+    if (instance.$children) return instance.$children;
+    if (Array.isArray(instance.subTree.children)) return instance.subTree.children.filter(vnode => !!vnode.component).map(vnode => vnode.component);
+    return [];
+  }
+
+  function buildComponentsTree(instance) {
+    return {
+      name: getInstanceName(instance),
+      children: getInternalInstanceChildren(instance).map(buildComponentsTree),
+      rootElements: [instance.$el],
+      props: instance._props
+    };
+  }
+
+  return buildComponentsTree(instance);
+}
+
+function filterComponentsTree(treeNode, searchFn, result = []) {
+  if (searchFn(treeNode)) result.push(treeNode);
+
+  for (const child of treeNode.children) filterComponentsTree(child, searchFn, result);
+
+  return result;
+}
+
+function findVueRoot() {
+  const walker = document.createTreeWalker(document);
+
+  while (walker.nextNode()) {
+    // Vue3 root
+    if (walker.currentNode._vnode && walker.currentNode._vnode.component) return {
+      root: walker.currentNode._vnode.component,
+      version: 3
+    }; // Vue2 root
+
+    if (walker.currentNode.__vue__) return {
+      root: walker.currentNode.__vue__,
+      version: 2
+    };
+  }
+
+  return undefined;
+}
+
+const VueEngine = {
+  queryAll(scope, selector) {
+    const {
+      name,
+      attributes
+    } = (0, _componentUtils.parseComponentSelector)(selector);
+    const vueRoot = findVueRoot();
+    if (!vueRoot) return [];
+    const tree = vueRoot.version === 3 ? buildComponentsTreeVue3(vueRoot.root) : buildComponentsTreeVue2(vueRoot.root);
+    const treeNodes = filterComponentsTree(tree, treeNode => {
+      if (name && treeNode.name !== name) return false;
+      if (treeNode.rootElements.some(rootElement => !scope.contains(rootElement))) return false;
+
+      for (const attr of attributes) {
+        if (!(0, _componentUtils.checkComponentAttribute)(treeNode.props, attr)) return false;
+      }
+
+      return true;
+    });
+    const allRootElements = new Set();
+
+    for (const treeNode of treeNodes) {
+      for (const rootElement of treeNode.rootElements) allRootElements.add(rootElement);
+    }
+
+    return [...allRootElements];
+  }
+
+};
+exports.VueEngine = VueEngine;
\ No newline at end of file
diff --git a/node_modules/playwright/lib/server/injected/xpathSelectorEngine.js b/node_modules/playwright/lib/server/injected/xpathSelectorEngine.js
new file mode 100644
index 0000000..dcc0997
--- /dev/null
+++ b/node_modules/playwright/lib/server/injected/xpathSelectorEngine.js
@@ -0,0 +1,39 @@
+"use strict";
+
+Object.defineProperty(exports, "__esModule", {
+  value: true
+});
+exports.XPathEngine = void 0;
+
+/**
+ * Copyright (c) Microsoft Corporation.
+ *
+ * Licensed under the Apache License, Version 2.0 (the "License");
+ * you may not use this file except in compliance with the License.
+ * You may obtain a copy of the License at
+ *
+ * http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS,
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ * See the License for the specific language governing permissions and
+ * limitations under the License.
+ */
+const XPathEngine = {
+  queryAll(root, selector) {
+    if (selector.startsWith('/')) selector = '.' + selector;
+    const result = [];
+    const document = root instanceof Document ? root : root.ownerDocument;
+    if (!document) return result;
+    const it = document.evaluate(selector, root, null, XPathResult.ORDERED_NODE_ITERATOR_TYPE);
+
+    for (let node = it.iterateNext(); node; node = it.iterateNext()) {
+      if (node.nodeType === Node.ELEMENT_NODE) result.push(node);
+    }
+
+    return result;
+  }
+
+};
+exports.XPathEngine = XPathEngine;
\ No newline at end of file
diff --git a/node_modules/playwright/lib/server/page.js b/node_modules/playwright/lib/server/page.js
index ffc4ab8..1eb7a75 100644
--- a/node_modules/playwright/lib/server/page.js
+++ b/node_modules/playwright/lib/server/page.js
@@ -466,6 +466,11 @@ class Page extends _instrumentation.SdkObject {
     this.emit(Page.Events.PageError, error);
   }
 
+  parseSelector(selector, options) {
+    const strict = typeof (options === null || options === void 0 ? void 0 : options.strict) === 'boolean' ? options.strict : !!this.context()._options.strictSelectors;
+    return this.selectors.parseSelector(selector, strict);
+  }
+
 }
 
 exports.Page = Page;
diff --git a/node_modules/playwright/lib/server/selectors.js b/node_modules/playwright/lib/server/selectors.js
index 66e371b..6e6e61c 100644
--- a/node_modules/playwright/lib/server/selectors.js
+++ b/node_modules/playwright/lib/server/selectors.js
@@ -31,8 +31,8 @@ class Selectors {
     this._engines = void 0;
     this.guid = `selectors@${(0, _utils.createGuid)()}`;
     // Note: keep in sync with InjectedScript class.
-    this._builtinEngines = new Set(['css', 'css:light', 'xpath', 'xpath:light', '_react', '_vue', 'text', 'text:light', 'id', 'id:light', 'data-testid', 'data-testid:light', 'data-test-id', 'data-test-id:light', 'data-test', 'data-test:light', 'nth', 'visible']);
-    this._builtinEnginesInMainWorld = new Set(['_react', '_vue']);
+    this._builtinEngines = new Set(['css', 'css:light', 'xpath', 'xpath:light', '_react', '_vue', 'text', 'text:light', 'id', 'id:light', 'data-testid', 'data-testid:light', 'data-test-id', 'data-test-id:light', 'data-test', 'data-test:light', 'nth', 'visible', 'crusher']);
+    this._builtinEnginesInMainWorld = new Set(['_react', '_vue', 'crusher']);
     this._engines = new Map();
   }
 
@@ -52,8 +52,8 @@ class Selectors {
     this._engines.clear();
   }
 
-  async _query(frame, selector, strict, scope) {
-    const info = this._parseSelector(selector, strict);
+  async query(frame, selector, options, scope) {
+    const info = frame._page.parseSelector(selector, options);
 
     const context = await frame._context(info.world);
     const injectedScript = await context.injectedScript();
@@ -66,7 +66,7 @@ class Selectors {
     }, {
       parsed: info.parsed,
       scope,
-      strict
+      strict: info.strict
     });
     const elementHandle = handle.asElement();
 
@@ -80,8 +80,7 @@ class Selectors {
   }
 
   async _queryArray(frame, selector, scope) {
-    const info = this._parseSelector(selector, false);
-
+    const info = this.parseSelector(selector, false);
     const context = await frame._mainContext();
     const injectedScript = await context.injectedScript();
     const arrayHandle = await injectedScript.evaluateHandle((injected, {
@@ -97,8 +96,7 @@ class Selectors {
   }
 
   async _queryAll(frame, selector, scope, adoptToMain) {
-    const info = this._parseSelector(selector, false);
-
+    const info = this.parseSelector(selector, false);
     const context = await frame._context(info.world);
     const injectedScript = await context.injectedScript();
     const arrayHandle = await injectedScript.evaluateHandle((injected, {
@@ -134,7 +132,7 @@ class Selectors {
     return adopted;
   }
 
-  _parseSelector(selector, strict) {
+  parseSelector(selector, strict) {
     const parsed = (0, _selectorParser.parseSelector)(selector);
     let needsMainWorld = false;
 
diff --git a/node_modules/playwright/lib/server/supplements/injected/consoleApi.js b/node_modules/playwright/lib/server/supplements/injected/consoleApi.js
new file mode 100644
index 0000000..e8031fe
--- /dev/null
+++ b/node_modules/playwright/lib/server/supplements/injected/consoleApi.js
@@ -0,0 +1,73 @@
+"use strict";
+
+Object.defineProperty(exports, "__esModule", {
+  value: true
+});
+exports.default = exports.ConsoleAPI = void 0;
+
+var _selectorGenerator = require("./selectorGenerator");
+
+/**
+ * Copyright (c) Microsoft Corporation.
+ *
+ * Licensed under the Apache License, Version 2.0 (the "License");
+ * you may not use this file except in compliance with the License.
+ * You may obtain a copy of the License at
+ *
+ * http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS,
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ * See the License for the specific language governing permissions and
+ * limitations under the License.
+ */
+class ConsoleAPI {
+  constructor(injectedScript) {
+    this._injectedScript = void 0;
+    this._injectedScript = injectedScript;
+    if (window.playwright) return;
+    window.playwright = {
+      $: (selector, strict) => this._querySelector(selector, !!strict),
+      $$: selector => this._querySelectorAll(selector),
+      inspect: selector => this._inspect(selector),
+      selector: element => this._selector(element),
+      resume: () => this._resume()
+    };
+  }
+
+  _querySelector(selector, strict) {
+    if (typeof selector !== 'string') throw new Error(`Usage: playwright.query('Playwright >> selector').`);
+
+    const parsed = this._injectedScript.parseSelector(selector);
+
+    return this._injectedScript.querySelector(parsed, document, strict);
+  }
+
+  _querySelectorAll(selector) {
+    if (typeof selector !== 'string') throw new Error(`Usage: playwright.$$('Playwright >> selector').`);
+
+    const parsed = this._injectedScript.parseSelector(selector);
+
+    return this._injectedScript.querySelectorAll(parsed, document);
+  }
+
+  _inspect(selector) {
+    if (typeof selector !== 'string') throw new Error(`Usage: playwright.inspect('Playwright >> selector').`);
+    window.inspect(this._querySelector(selector, false));
+  }
+
+  _selector(element) {
+    if (!(element instanceof Element)) throw new Error(`Usage: playwright.selector(element).`);
+    return (0, _selectorGenerator.generateSelector)(this._injectedScript, element).selector;
+  }
+
+  _resume() {
+    window._playwrightResume().catch(() => {});
+  }
+
+}
+
+exports.ConsoleAPI = ConsoleAPI;
+var _default = ConsoleAPI;
+exports.default = _default;
\ No newline at end of file
diff --git a/node_modules/playwright/lib/server/supplements/injected/recorder.js b/node_modules/playwright/lib/server/supplements/injected/recorder.js
new file mode 100644
index 0000000..1bd47c5
--- /dev/null
+++ b/node_modules/playwright/lib/server/supplements/injected/recorder.js
@@ -0,0 +1,615 @@
+"use strict";
+
+Object.defineProperty(exports, "__esModule", {
+  value: true
+});
+exports.default = exports.Recorder = void 0;
+
+var _selectorGenerator = require("./selectorGenerator");
+
+/**
+ * Copyright (c) Microsoft Corporation.
+ *
+ * Licensed under the Apache License, Version 2.0 (the "License");
+ * you may not use this file except in compliance with the License.
+ * You may obtain a copy of the License at
+ *
+ * http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS,
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ * See the License for the specific language governing permissions and
+ * limitations under the License.
+ */
+const scriptSymbol = Symbol('scriptSymbol');
+
+class Recorder {
+  constructor(injectedScript, params) {
+    this._injectedScript = void 0;
+    this._performingAction = false;
+    this._outerGlassPaneElement = void 0;
+    this._glassPaneShadow = void 0;
+    this._innerGlassPaneElement = void 0;
+    this._highlightElements = [];
+    this._tooltipElement = void 0;
+    this._listeners = [];
+    this._hoveredModel = null;
+    this._hoveredElement = null;
+    this._activeModel = null;
+    this._expectProgrammaticKeyUp = false;
+    this._pollRecorderModeTimer = void 0;
+    this._mode = 'none';
+    this._actionPointElement = void 0;
+    this._actionPoint = void 0;
+    this._actionSelector = void 0;
+    this._params = void 0;
+    this._params = params;
+    this._injectedScript = injectedScript;
+    this._outerGlassPaneElement = document.createElement('x-pw-glass');
+    this._outerGlassPaneElement.style.position = 'fixed';
+    this._outerGlassPaneElement.style.top = '0';
+    this._outerGlassPaneElement.style.right = '0';
+    this._outerGlassPaneElement.style.bottom = '0';
+    this._outerGlassPaneElement.style.left = '0';
+    this._outerGlassPaneElement.style.zIndex = '2147483647';
+    this._outerGlassPaneElement.style.pointerEvents = 'none';
+    this._outerGlassPaneElement.style.display = 'flex';
+    this._tooltipElement = document.createElement('x-pw-tooltip');
+    this._actionPointElement = document.createElement('x-pw-action-point');
+
+    this._actionPointElement.setAttribute('hidden', 'true');
+
+    this._innerGlassPaneElement = document.createElement('x-pw-glass-inner');
+    this._innerGlassPaneElement.style.flex = 'auto';
+
+    this._innerGlassPaneElement.appendChild(this._tooltipElement); // Use a closed shadow root to prevent selectors matching our internal previews.
+
+
+    this._glassPaneShadow = this._outerGlassPaneElement.attachShadow({
+      mode: this._params.isUnderTest ? 'open' : 'closed'
+    });
+
+    this._glassPaneShadow.appendChild(this._innerGlassPaneElement);
+
+    this._glassPaneShadow.appendChild(this._actionPointElement);
+
+    const styleElement = document.createElement('style');
+    styleElement.textContent = `
+        x-pw-tooltip {
+          align-items: center;
+          backdrop-filter: blur(5px);
+          background-color: rgba(0, 0, 0, 0.7);
+          border-radius: 2px;
+          box-shadow: rgba(0, 0, 0, 0.1) 0px 3.6px 3.7px,
+                      rgba(0, 0, 0, 0.15) 0px 12.1px 12.3px,
+                      rgba(0, 0, 0, 0.1) 0px -2px 4px,
+                      rgba(0, 0, 0, 0.15) 0px -12.1px 24px,
+                      rgba(0, 0, 0, 0.25) 0px 54px 55px;
+          color: rgb(204, 204, 204);
+          display: none;
+          font-family: 'Dank Mono', 'Operator Mono', Inconsolata, 'Fira Mono',
+                       'SF Mono', Monaco, 'Droid Sans Mono', 'Source Code Pro', monospace;
+          font-size: 12.8px;
+          font-weight: normal;
+          left: 0;
+          line-height: 1.5;
+          max-width: 600px;
+          padding: 3.2px 5.12px 3.2px;
+          position: absolute;
+          top: 0;
+        }
+        x-pw-action-point {
+          position: absolute;
+          width: 20px;
+          height: 20px;
+          background: red;
+          border-radius: 10px;
+          pointer-events: none;
+          margin: -10px 0 0 -10px;
+          z-index: 2;
+        }
+        *[hidden] {
+          display: none !important;
+        }
+    `;
+
+    this._glassPaneShadow.appendChild(styleElement);
+
+    this._refreshListenersIfNeeded();
+
+    setInterval(() => {
+      this._refreshListenersIfNeeded();
+
+      if (params.isUnderTest && !this._reportedReadyForTest) {
+        this._reportedReadyForTest = true;
+        console.error('Recorder script ready for test');
+      }
+    }, 500);
+
+    globalThis._playwrightRefreshOverlay = () => {
+      this._pollRecorderMode().catch(e => console.log(e)); // eslint-disable-line no-console
+
+    };
+
+    globalThis._playwrightRefreshOverlay();
+  }
+
+  _refreshListenersIfNeeded() {
+    if (document.documentElement[scriptSymbol]) return;
+    document.documentElement[scriptSymbol] = true;
+    removeEventListeners(this._listeners);
+    this._listeners = [addEventListener(document, 'click', event => this._onClick(event), true), addEventListener(document, 'auxclick', event => this._onClick(event), true), addEventListener(document, 'input', event => this._onInput(event), true), addEventListener(document, 'keydown', event => this._onKeyDown(event), true), addEventListener(document, 'keyup', event => this._onKeyUp(event), true), addEventListener(document, 'mousedown', event => this._onMouseDown(event), true), addEventListener(document, 'mouseup', event => this._onMouseUp(event), true), addEventListener(document, 'mousemove', event => this._onMouseMove(event), true), addEventListener(document, 'mouseleave', event => this._onMouseLeave(event), true), addEventListener(document, 'focus', () => this._onFocus(), true), addEventListener(document, 'scroll', () => {
+      this._hoveredModel = null;
+      this._actionPointElement.hidden = true;
+
+      this._updateHighlight();
+    }, true)];
+    document.documentElement.appendChild(this._outerGlassPaneElement);
+  }
+
+  async _pollRecorderMode() {
+    var _this$_hoveredModel;
+
+    const pollPeriod = 1000;
+    if (this._pollRecorderModeTimer) clearTimeout(this._pollRecorderModeTimer);
+    const state = await globalThis._playwrightRecorderState().catch(e => null);
+
+    if (!state) {
+      this._pollRecorderModeTimer = setTimeout(() => this._pollRecorderMode(), pollPeriod);
+      return;
+    }
+
+    const {
+      mode,
+      actionPoint,
+      actionSelector
+    } = state;
+
+    if (mode !== this._mode) {
+      this._mode = mode;
+
+      this._clearHighlight();
+    }
+
+    if (actionPoint && this._actionPoint && actionPoint.x === this._actionPoint.x && actionPoint.y === this._actionPoint.y) {// All good.
+    } else if (!actionPoint && !this._actionPoint) {// All good.
+    } else {
+      if (actionPoint) {
+        this._actionPointElement.style.top = actionPoint.y + 'px';
+        this._actionPointElement.style.left = actionPoint.x + 'px';
+        this._actionPointElement.hidden = false;
+      } else {
+        this._actionPointElement.hidden = true;
+      }
+
+      this._actionPoint = actionPoint;
+    } // Race or scroll.
+
+
+    if (this._actionSelector && !((_this$_hoveredModel = this._hoveredModel) !== null && _this$_hoveredModel !== void 0 && _this$_hoveredModel.elements.length)) this._actionSelector = undefined;
+
+    if (actionSelector !== this._actionSelector) {
+      this._hoveredModel = actionSelector ? (0, _selectorGenerator.querySelector)(this._injectedScript, actionSelector, document) : null;
+
+      this._updateHighlight();
+
+      this._actionSelector = actionSelector;
+    }
+
+    this._pollRecorderModeTimer = setTimeout(() => this._pollRecorderMode(), pollPeriod);
+  }
+
+  _clearHighlight() {
+    this._hoveredModel = null;
+    this._activeModel = null;
+
+    this._updateHighlight();
+  }
+
+  _actionInProgress(event) {
+    // If Playwright is performing action for us, bail.
+    if (this._performingAction) return true; // Consume as the first thing.
+
+    consumeEvent(event);
+    return false;
+  }
+
+  _consumedDueToNoModel(event, model) {
+    if (model) return false;
+    consumeEvent(event);
+    return true;
+  }
+
+  _consumedDueWrongTarget(event) {
+    if (this._activeModel && this._activeModel.elements[0] === this._deepEventTarget(event)) return false;
+    consumeEvent(event);
+    return true;
+  }
+
+  _onClick(event) {
+    if (this._mode === 'inspecting') globalThis._playwrightRecorderSetSelector(this._hoveredModel ? this._hoveredModel.selector : '');
+    if (this._shouldIgnoreMouseEvent(event)) return;
+    if (this._actionInProgress(event)) return;
+    if (this._consumedDueToNoModel(event, this._hoveredModel)) return;
+    const checkbox = asCheckbox(this._deepEventTarget(event));
+
+    if (checkbox) {
+      // Interestingly, inputElement.checked is reversed inside this event handler.
+      this._performAction({
+        name: checkbox.checked ? 'check' : 'uncheck',
+        selector: this._hoveredModel.selector,
+        signals: []
+      });
+
+      return;
+    }
+
+    this._performAction({
+      name: 'click',
+      selector: this._hoveredModel.selector,
+      signals: [],
+      button: buttonForEvent(event),
+      modifiers: modifiersForEvent(event),
+      clickCount: event.detail
+    });
+  }
+
+  _shouldIgnoreMouseEvent(event) {
+    const target = this._deepEventTarget(event);
+
+    if (this._mode === 'none') return true;
+
+    if (this._mode === 'inspecting') {
+      consumeEvent(event);
+      return true;
+    }
+
+    const nodeName = target.nodeName;
+    if (nodeName === 'SELECT') return true;
+    if (nodeName === 'INPUT' && ['date'].includes(target.type)) return true;
+    return false;
+  }
+
+  _onMouseDown(event) {
+    if (this._shouldIgnoreMouseEvent(event)) return;
+    if (!this._performingAction) consumeEvent(event);
+    this._activeModel = this._hoveredModel;
+  }
+
+  _onMouseUp(event) {
+    if (this._shouldIgnoreMouseEvent(event)) return;
+    if (!this._performingAction) consumeEvent(event);
+  }
+
+  _onMouseMove(event) {
+    if (this._mode === 'none') return;
+
+    const target = this._deepEventTarget(event);
+
+    if (this._hoveredElement === target) return;
+    this._hoveredElement = target;
+
+    this._updateModelForHoveredElement();
+  }
+
+  _onMouseLeave(event) {
+    // Leaving iframe.
+    if (this._deepEventTarget(event).nodeType === Node.DOCUMENT_NODE) {
+      this._hoveredElement = null;
+
+      this._updateModelForHoveredElement();
+    }
+  }
+
+  _onFocus() {
+    const activeElement = this._deepActiveElement(document);
+
+    const result = activeElement ? (0, _selectorGenerator.generateSelector)(this._injectedScript, activeElement) : null;
+    this._activeModel = result && result.selector ? result : null;
+    if (this._params.isUnderTest) console.error('Highlight updated for test: ' + (result ? result.selector : null));
+  }
+
+  _updateModelForHoveredElement() {
+    if (!this._hoveredElement) {
+      this._hoveredModel = null;
+
+      this._updateHighlight();
+
+      return;
+    }
+
+    const hoveredElement = this._hoveredElement;
+    const {
+      selector,
+      elements
+    } = (0, _selectorGenerator.generateSelector)(this._injectedScript, hoveredElement);
+    if (this._hoveredModel && this._hoveredModel.selector === selector || this._hoveredElement !== hoveredElement) return;
+    this._hoveredModel = selector ? {
+      selector,
+      elements
+    } : null;
+
+    this._updateHighlight();
+
+    if (this._params.isUnderTest) console.error('Highlight updated for test: ' + selector);
+  }
+
+  _updateHighlight() {
+    const elements = this._hoveredModel ? this._hoveredModel.elements : []; // Code below should trigger one layout and leave with the
+    // destroyed layout.
+    // Destroy the layout
+
+    this._tooltipElement.textContent = this._hoveredModel ? this._hoveredModel.selector : '';
+    this._tooltipElement.style.top = '0';
+    this._tooltipElement.style.left = '0';
+    this._tooltipElement.style.display = 'flex'; // Trigger layout.
+
+    const boxes = elements.map(e => e.getBoundingClientRect());
+    const tooltipWidth = this._tooltipElement.offsetWidth;
+    const tooltipHeight = this._tooltipElement.offsetHeight;
+    const totalWidth = this._innerGlassPaneElement.offsetWidth;
+    const totalHeight = this._innerGlassPaneElement.offsetHeight; // Destroy the layout again.
+
+    if (boxes.length) {
+      const primaryBox = boxes[0];
+      let anchorLeft = primaryBox.left;
+      if (anchorLeft + tooltipWidth > totalWidth - 5) anchorLeft = totalWidth - tooltipWidth - 5;
+      let anchorTop = primaryBox.bottom + 5;
+
+      if (anchorTop + tooltipHeight > totalHeight - 5) {
+        // If can't fit below, either position above...
+        if (primaryBox.top > tooltipHeight + 5) {
+          anchorTop = primaryBox.top - tooltipHeight - 5;
+        } else {
+          // Or on top in case of large element
+          anchorTop = totalHeight - 5 - tooltipHeight;
+        }
+      }
+
+      this._tooltipElement.style.top = anchorTop + 'px';
+      this._tooltipElement.style.left = anchorLeft + 'px';
+    } else {
+      this._tooltipElement.style.display = 'none';
+    }
+
+    const pool = this._highlightElements;
+    this._highlightElements = [];
+
+    for (const box of boxes) {
+      const highlightElement = pool.length ? pool.shift() : this._createHighlightElement();
+      const color = this._mode === 'recording' ? '#dc6f6f7f' : '#6fa8dc7f';
+      highlightElement.style.backgroundColor = this._highlightElements.length ? '#f6b26b7f' : color;
+      highlightElement.style.left = box.x + 'px';
+      highlightElement.style.top = box.y + 'px';
+      highlightElement.style.width = box.width + 'px';
+      highlightElement.style.height = box.height + 'px';
+      highlightElement.style.display = 'block';
+
+      this._highlightElements.push(highlightElement);
+    }
+
+    for (const highlightElement of pool) {
+      highlightElement.style.display = 'none';
+
+      this._highlightElements.push(highlightElement);
+    }
+  }
+
+  _createHighlightElement() {
+    const highlightElement = document.createElement('x-pw-highlight');
+    highlightElement.style.position = 'absolute';
+    highlightElement.style.top = '0';
+    highlightElement.style.left = '0';
+    highlightElement.style.width = '0';
+    highlightElement.style.height = '0';
+    highlightElement.style.boxSizing = 'border-box';
+
+    this._glassPaneShadow.appendChild(highlightElement);
+
+    return highlightElement;
+  }
+
+  _onInput(event) {
+    if (this._mode !== 'recording') return true;
+
+    const target = this._deepEventTarget(event);
+
+    if (['INPUT', 'TEXTAREA'].includes(target.nodeName)) {
+      const inputElement = target;
+      const elementType = (inputElement.type || '').toLowerCase();
+
+      if (elementType === 'checkbox') {
+        // Checkbox is handled in click, we can't let input trigger on checkbox - that would mean we dispatched click events while recording.
+        return;
+      }
+
+      if (elementType === 'file') {
+        globalThis._playwrightRecorderRecordAction({
+          name: 'setInputFiles',
+          selector: this._activeModel.selector,
+          signals: [],
+          files: [...(inputElement.files || [])].map(file => file.name)
+        });
+
+        return;
+      } // Non-navigating actions are simply recorded by Playwright.
+
+
+      if (this._consumedDueWrongTarget(event)) return;
+
+      globalThis._playwrightRecorderRecordAction({
+        name: 'fill',
+        selector: this._activeModel.selector,
+        signals: [],
+        text: inputElement.value
+      });
+    }
+
+    if (target.nodeName === 'SELECT') {
+      const selectElement = target;
+      if (this._actionInProgress(event)) return;
+
+      this._performAction({
+        name: 'select',
+        selector: this._hoveredModel.selector,
+        options: [...selectElement.selectedOptions].map(option => option.value),
+        signals: []
+      });
+    }
+  }
+
+  _shouldGenerateKeyPressFor(event) {
+    // Backspace, Delete, AltGraph are changing input, will handle it there.
+    if (['Backspace', 'Delete', 'AltGraph'].includes(event.key)) return false; // Ignore the QWERTZ shortcut for creating a at sign on MacOS
+
+    if (event.key === '@' && event.code === 'KeyL') return false; // Allow and ignore common used shortcut for pasting.
+
+    if (navigator.platform.includes('Mac')) {
+      if (event.key === 'v' && event.metaKey) return false;
+    } else {
+      if (event.key === 'v' && event.ctrlKey) return false;
+      if (event.key === 'Insert' && event.shiftKey) return false;
+    }
+
+    if (['Shift', 'Control', 'Meta', 'Alt'].includes(event.key)) return false;
+    const hasModifier = event.ctrlKey || event.altKey || event.metaKey;
+    if (event.key.length === 1 && !hasModifier) return !!asCheckbox(this._deepEventTarget(event));
+    return true;
+  }
+
+  _onKeyDown(event) {
+    if (this._mode === 'inspecting') {
+      consumeEvent(event);
+      return;
+    }
+
+    if (this._mode !== 'recording') return true;
+    if (!this._shouldGenerateKeyPressFor(event)) return;
+
+    if (this._actionInProgress(event)) {
+      this._expectProgrammaticKeyUp = true;
+      return;
+    }
+
+    if (this._consumedDueWrongTarget(event)) return; // Similarly to click, trigger checkbox on key event, not input.
+
+    if (event.key === ' ') {
+      const checkbox = asCheckbox(this._deepEventTarget(event));
+
+      if (checkbox) {
+        this._performAction({
+          name: checkbox.checked ? 'uncheck' : 'check',
+          selector: this._activeModel.selector,
+          signals: []
+        });
+
+        return;
+      }
+    }
+
+    this._performAction({
+      name: 'press',
+      selector: this._activeModel.selector,
+      signals: [],
+      key: event.key,
+      modifiers: modifiersForEvent(event)
+    });
+  }
+
+  _onKeyUp(event) {
+    if (!this._shouldGenerateKeyPressFor(event)) return; // Only allow programmatic keyups, ignore user input.
+
+    if (!this._expectProgrammaticKeyUp) {
+      consumeEvent(event);
+      return;
+    }
+
+    this._expectProgrammaticKeyUp = false;
+  }
+
+  async _performAction(action) {
+    this._performingAction = true;
+    await globalThis._playwrightRecorderPerformAction(action).catch(() => {});
+    this._performingAction = false; // Action could have changed DOM, update hovered model selectors.
+
+    this._updateModelForHoveredElement(); // If that was a keyboard action, it similarly requires new selectors for active model.
+
+
+    this._onFocus();
+
+    if (this._params.isUnderTest) {
+      // Serialize all to string as we cannot attribute console message to isolated world
+      // in Firefox.
+      console.error('Action performed for test: ' + JSON.stringify({
+        hovered: this._hoveredModel ? this._hoveredModel.selector : null,
+        active: this._activeModel ? this._activeModel.selector : null
+      }));
+    }
+  }
+
+  _deepEventTarget(event) {
+    return event.composedPath()[0];
+  }
+
+  _deepActiveElement(document) {
+    let activeElement = document.activeElement;
+
+    while (activeElement && activeElement.shadowRoot && activeElement.shadowRoot.activeElement) activeElement = activeElement.shadowRoot.activeElement;
+
+    return activeElement;
+  }
+
+}
+
+exports.Recorder = Recorder;
+
+function modifiersForEvent(event) {
+  return (event.altKey ? 1 : 0) | (event.ctrlKey ? 2 : 0) | (event.metaKey ? 4 : 0) | (event.shiftKey ? 8 : 0);
+}
+
+function buttonForEvent(event) {
+  switch (event.which) {
+    case 1:
+      return 'left';
+
+    case 2:
+      return 'middle';
+
+    case 3:
+      return 'right';
+  }
+
+  return 'left';
+}
+
+function consumeEvent(e) {
+  e.preventDefault();
+  e.stopPropagation();
+  e.stopImmediatePropagation();
+}
+
+function asCheckbox(node) {
+  if (!node || node.nodeName !== 'INPUT') return null;
+  const inputElement = node;
+  return inputElement.type === 'checkbox' ? inputElement : null;
+}
+
+function addEventListener(target, eventName, listener, useCapture) {
+  target.addEventListener(eventName, listener, useCapture);
+
+  const remove = () => {
+    target.removeEventListener(eventName, listener, useCapture);
+  };
+
+  return remove;
+}
+
+function removeEventListeners(listeners) {
+  for (const listener of listeners) listener();
+
+  listeners.splice(0, listeners.length);
+}
+
+var _default = Recorder;
+exports.default = _default;
\ No newline at end of file
diff --git a/node_modules/playwright/lib/server/supplements/injected/selectorGenerator.js b/node_modules/playwright/lib/server/supplements/injected/selectorGenerator.js
new file mode 100644
index 0000000..2d8c263
--- /dev/null
+++ b/node_modules/playwright/lib/server/supplements/injected/selectorGenerator.js
@@ -0,0 +1,418 @@
+"use strict";
+
+Object.defineProperty(exports, "__esModule", {
+  value: true
+});
+exports.querySelector = querySelector;
+exports.generateSelector = generateSelector;
+
+var _selectorEvaluator = require("../../injected/selectorEvaluator");
+
+/**
+ * Copyright (c) Microsoft Corporation.
+ *
+ * Licensed under the Apache License, Version 2.0 (the "License");
+ * you may not use this file except in compliance with the License.
+ * You may obtain a copy of the License at
+ *
+ * http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS,
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ * See the License for the specific language governing permissions and
+ * limitations under the License.
+ */
+const cacheAllowText = new Map();
+const cacheDisallowText = new Map();
+
+function querySelector(injectedScript, selector, ownerDocument) {
+  try {
+    const parsedSelector = injectedScript.parseSelector(selector);
+    return {
+      selector,
+      elements: injectedScript.querySelectorAll(parsedSelector, ownerDocument)
+    };
+  } catch (e) {
+    return {
+      selector,
+      elements: []
+    };
+  }
+}
+
+function generateSelector(injectedScript, targetElement) {
+  injectedScript._evaluator.begin();
+
+  try {
+    targetElement = targetElement.closest('button,select,input,[role=button],[role=checkbox],[role=radio]') || targetElement;
+    const targetTokens = generateSelectorFor(injectedScript, targetElement);
+    const bestTokens = targetTokens || [cssFallback(injectedScript, targetElement)];
+    const selector = joinTokens(bestTokens);
+    const parsedSelector = injectedScript.parseSelector(selector);
+    return {
+      selector,
+      elements: injectedScript.querySelectorAll(parsedSelector, targetElement.ownerDocument)
+    };
+  } finally {
+    cacheAllowText.clear();
+    cacheDisallowText.clear();
+
+    injectedScript._evaluator.end();
+  }
+}
+
+function filterRegexTokens(textCandidates) {
+  // Filter out regex-based selectors for better performance.
+  return textCandidates.filter(c => c[0].selector[0] !== '/');
+}
+
+function generateSelectorFor(injectedScript, targetElement) {
+  if (targetElement.ownerDocument.documentElement === targetElement) return [{
+    engine: 'css',
+    selector: 'html',
+    score: 1
+  }];
+
+  const calculate = (element, allowText) => {
+    const allowNthMatch = element === targetElement;
+    let textCandidates = allowText ? buildTextCandidates(injectedScript, element, element === targetElement).map(token => [token]) : [];
+
+    if (element !== targetElement) {
+      // Do not use regex for parent elements (for performance).
+      textCandidates = filterRegexTokens(textCandidates);
+    }
+
+    const noTextCandidates = buildCandidates(injectedScript, element).map(token => [token]); // First check all text and non-text candidates for the element.
+
+    let result = chooseFirstSelector(injectedScript, targetElement.ownerDocument, element, [...textCandidates, ...noTextCandidates], allowNthMatch); // Do not use regex for chained selectors (for performance).
+
+    textCandidates = filterRegexTokens(textCandidates);
+
+    const checkWithText = textCandidatesToUse => {
+      // Use the deepest possible text selector - works pretty good and saves on compute time.
+      const allowParentText = allowText && !textCandidatesToUse.length;
+      const candidates = [...textCandidatesToUse, ...noTextCandidates].filter(c => {
+        if (!result) return true;
+        return combineScores(c) < combineScores(result);
+      }); // This is best theoretically possible candidate from the current parent.
+      // We use the fact that widening the scope to grand-parent makes any selector
+      // even less likely to match.
+
+      let bestPossibleInParent = candidates[0];
+      if (!bestPossibleInParent) return;
+
+      for (let parent = parentElementOrShadowHost(element); parent; parent = parentElementOrShadowHost(parent)) {
+        const parentTokens = calculateCached(parent, allowParentText);
+        if (!parentTokens) continue; // Even the best selector won't be too good - skip this parent.
+
+        if (result && combineScores([...parentTokens, ...bestPossibleInParent]) >= combineScores(result)) continue; // Update the best candidate that finds "element" in the "parent".
+
+        bestPossibleInParent = chooseFirstSelector(injectedScript, parent, element, candidates, allowNthMatch);
+        if (!bestPossibleInParent) return;
+        const combined = [...parentTokens, ...bestPossibleInParent];
+        if (!result || combineScores(combined) < combineScores(result)) result = combined;
+      }
+    };
+
+    checkWithText(textCandidates); // Allow skipping text on the target element, and using text on one of the parents.
+
+    if (element === targetElement && textCandidates.length) checkWithText([]);
+    return result;
+  };
+
+  const calculateCached = (element, allowText) => {
+    const cache = allowText ? cacheAllowText : cacheDisallowText;
+    let value = cache.get(element);
+
+    if (value === undefined) {
+      value = calculate(element, allowText);
+      cache.set(element, value);
+    }
+
+    return value;
+  };
+
+  return calculateCached(targetElement, true);
+}
+
+function buildCandidates(injectedScript, element) {
+  const candidates = [];
+
+  for (const attribute of ['data-testid', 'data-test-id', 'data-test']) {
+    if (element.hasAttribute(attribute)) candidates.push({
+      engine: 'css',
+      selector: `[${attribute}=${quoteString(element.getAttribute(attribute))}]`,
+      score: 1
+    });
+  }
+
+  if (element.nodeName === 'INPUT') {
+    const input = element;
+    if (input.placeholder) candidates.push({
+      engine: 'css',
+      selector: `[placeholder=${quoteString(input.placeholder)}]`,
+      score: 10
+    });
+  }
+
+  if (element.hasAttribute('aria-label')) candidates.push({
+    engine: 'css',
+    selector: `[aria-label=${quoteString(element.getAttribute('aria-label'))}]`,
+    score: 10
+  });
+  if (element.getAttribute('alt') && ['APPLET', 'AREA', 'IMG', 'INPUT'].includes(element.nodeName)) candidates.push({
+    engine: 'css',
+    selector: `${element.nodeName.toLowerCase()}[alt=${quoteString(element.getAttribute('alt'))}]`,
+    score: 10
+  });
+  if (element.hasAttribute('role')) candidates.push({
+    engine: 'css',
+    selector: `${element.nodeName.toLocaleLowerCase()}[role=${quoteString(element.getAttribute('role'))}]`,
+    score: 50
+  });
+  if (element.getAttribute('name') && ['BUTTON', 'FORM', 'FIELDSET', 'IFRAME', 'INPUT', 'KEYGEN', 'OBJECT', 'OUTPUT', 'SELECT', 'TEXTAREA', 'MAP', 'META', 'PARAM'].includes(element.nodeName)) candidates.push({
+    engine: 'css',
+    selector: `${element.nodeName.toLowerCase()}[name=${quoteString(element.getAttribute('name'))}]`,
+    score: 50
+  });
+
+  if (['INPUT', 'TEXTAREA'].includes(element.nodeName) && element.getAttribute('type') !== 'hidden') {
+    if (element.getAttribute('type')) candidates.push({
+      engine: 'css',
+      selector: `${element.nodeName.toLowerCase()}[type=${quoteString(element.getAttribute('type'))}]`,
+      score: 50
+    });
+  }
+
+  if (['INPUT', 'TEXTAREA', 'SELECT'].includes(element.nodeName)) candidates.push({
+    engine: 'css',
+    selector: element.nodeName.toLowerCase(),
+    score: 50
+  });
+  const idAttr = element.getAttribute('id');
+  if (idAttr && !isGuidLike(idAttr)) candidates.push({
+    engine: 'css',
+    selector: makeSelectorForId(idAttr),
+    score: 100
+  });
+  candidates.push({
+    engine: 'css',
+    selector: element.nodeName.toLocaleLowerCase(),
+    score: 200
+  });
+  return candidates;
+}
+
+function buildTextCandidates(injectedScript, element, allowHasText) {
+  if (element.nodeName === 'SELECT') return [];
+  const text = (0, _selectorEvaluator.elementText)(injectedScript._evaluator, element).full.trim().replace(/\s+/g, ' ').substring(0, 80);
+  if (!text) return [];
+  const candidates = [];
+  let escaped = text;
+  if (text.includes('"') || text.includes('>>') || text[0] === '/') escaped = `/.*${escapeForRegex(text)}.*/`;
+  candidates.push({
+    engine: 'text',
+    selector: escaped,
+    score: 10
+  });
+
+  if (allowHasText && escaped === text) {
+    let prefix = element.nodeName.toLocaleLowerCase();
+    if (element.hasAttribute('role')) prefix += `[role=${quoteString(element.getAttribute('role'))}]`;
+    candidates.push({
+      engine: 'css',
+      selector: `${prefix}:has-text("${text}")`,
+      score: 30
+    });
+  }
+
+  return candidates;
+}
+
+function parentElementOrShadowHost(element) {
+  if (element.parentElement) return element.parentElement;
+  if (!element.parentNode) return null;
+  if (element.parentNode.nodeType === Node.DOCUMENT_FRAGMENT_NODE && element.parentNode.host) return element.parentNode.host;
+  return null;
+}
+
+function makeSelectorForId(id) {
+  return /^[a-zA-Z][a-zA-Z0-9\-\_]+$/.test(id) ? '#' + id : `[id="${id}"]`;
+}
+
+function cssFallback(injectedScript, targetElement) {
+  const kFallbackScore = 10000000;
+  const root = targetElement.ownerDocument;
+  const tokens = [];
+
+  function uniqueCSSSelector(prefix) {
+    const path = tokens.slice();
+    if (prefix) path.unshift(prefix);
+    const selector = path.join(' ');
+    const parsedSelector = injectedScript.parseSelector(selector);
+    const node = injectedScript.querySelector(parsedSelector, targetElement.ownerDocument, false);
+    return node === targetElement ? selector : undefined;
+  }
+
+  for (let element = targetElement; element && element !== root; element = parentElementOrShadowHost(element)) {
+    const nodeName = element.nodeName.toLowerCase(); // Element ID is the strongest signal, use it.
+
+    let bestTokenForLevel = '';
+
+    if (element.id) {
+      const token = makeSelectorForId(element.id);
+      const selector = uniqueCSSSelector(token);
+      if (selector) return {
+        engine: 'css',
+        selector,
+        score: kFallbackScore
+      };
+      bestTokenForLevel = token;
+    }
+
+    const parent = element.parentNode; // Combine class names until unique.
+
+    const classes = [...element.classList];
+
+    for (let i = 0; i < classes.length; ++i) {
+      const token = '.' + classes.slice(0, i + 1).join('.');
+      const selector = uniqueCSSSelector(token);
+      if (selector) return {
+        engine: 'css',
+        selector,
+        score: kFallbackScore
+      }; // Even if not unique, does this subset of classes uniquely identify node as a child?
+
+      if (!bestTokenForLevel && parent) {
+        const sameClassSiblings = parent.querySelectorAll(token);
+        if (sameClassSiblings.length === 1) bestTokenForLevel = token;
+      }
+    } // Ordinal is the weakest signal.
+
+
+    if (parent) {
+      const siblings = [...parent.children];
+      const sameTagSiblings = siblings.filter(sibling => sibling.nodeName.toLowerCase() === nodeName);
+      const token = sameTagSiblings.indexOf(element) === 0 ? nodeName : `${nodeName}:nth-child(${1 + siblings.indexOf(element)})`;
+      const selector = uniqueCSSSelector(token);
+      if (selector) return {
+        engine: 'css',
+        selector,
+        score: kFallbackScore
+      };
+      if (!bestTokenForLevel) bestTokenForLevel = token;
+    } else if (!bestTokenForLevel) {
+      bestTokenForLevel = nodeName;
+    }
+
+    tokens.unshift(bestTokenForLevel);
+  }
+
+  return {
+    engine: 'css',
+    selector: uniqueCSSSelector(),
+    score: kFallbackScore
+  };
+}
+
+function escapeForRegex(text) {
+  return text.replace(/[.*+?^>${}()|[\]\\]/g, '\\$&');
+}
+
+function quoteString(text) {
+  return `"${text.replace(/"/g, '\\"').replace(/\n/g, '\\n')}"`;
+}
+
+function joinTokens(tokens) {
+  const parts = [];
+  let lastEngine = '';
+
+  for (const {
+    engine,
+    selector
+  } of tokens) {
+    if (parts.length && (lastEngine !== 'css' || engine !== 'css' || selector.startsWith(':nth-match('))) parts.push('>>');
+    lastEngine = engine;
+    if (engine === 'css') parts.push(selector);else parts.push(`${engine}=${selector}`);
+  }
+
+  return parts.join(' ');
+}
+
+function combineScores(tokens) {
+  let score = 0;
+
+  for (let i = 0; i < tokens.length; i++) score += tokens[i].score * (tokens.length - i);
+
+  return score;
+}
+
+function chooseFirstSelector(injectedScript, scope, targetElement, selectors, allowNthMatch) {
+  const joined = selectors.map(tokens => ({
+    tokens,
+    score: combineScores(tokens)
+  }));
+  joined.sort((a, b) => a.score - b.score);
+  let bestWithIndex = null;
+
+  for (const {
+    tokens
+  } of joined) {
+    const parsedSelector = injectedScript.parseSelector(joinTokens(tokens));
+    const result = injectedScript.querySelectorAll(parsedSelector, scope);
+    const index = result.indexOf(targetElement);
+
+    if (index === 0) {
+      // We are the first match - found the best selector.
+      return tokens;
+    } // Otherwise, perhaps we can get nth-match?
+
+
+    if (!allowNthMatch || bestWithIndex || index === -1 || result.length > 5) continue; // To use nth-match, we must convert everything to css.
+
+    const allCss = tokens.map(token => {
+      if (token.engine !== 'text') return token;
+      if (token.selector.startsWith('/') && token.selector.endsWith('/')) return {
+        engine: 'css',
+        selector: `:text-matches("${token.selector.substring(1, token.selector.length - 1)}")`,
+        score: token.score
+      };
+      return {
+        engine: 'css',
+        selector: `:text("${token.selector}")`,
+        score: token.score
+      };
+    });
+    const combined = joinTokens(allCss);
+    bestWithIndex = [{
+      engine: 'css',
+      selector: `:nth-match(${combined}, ${index + 1})`,
+      score: combineScores(allCss) + 1000
+    }];
+  }
+
+  return bestWithIndex;
+}
+
+function isGuidLike(id) {
+  let lastCharacterType;
+  let transitionCount = 0;
+
+  for (let i = 0; i < id.length; ++i) {
+    const c = id[i];
+    let characterType;
+    if (c === '-' || c === '_') continue;
+    if (c >= 'a' && c <= 'z') characterType = 'lower';else if (c >= 'A' && c <= 'Z') characterType = 'upper';else if (c >= '0' && c <= '9') characterType = 'digit';else characterType = 'other';
+
+    if (characterType === 'lower' && lastCharacterType === 'upper') {
+      lastCharacterType = characterType;
+      continue;
+    }
+
+    if (lastCharacterType && lastCharacterType !== characterType) ++transitionCount;
+    lastCharacterType = characterType;
+  }
+
+  return transitionCount >= id.length / 4;
+}
\ No newline at end of file
diff --git a/node_modules/playwright/lib/server/trace/recorder/tracing.js b/node_modules/playwright/lib/server/trace/recorder/tracing.js
index 5c42fd5..16effe3 100644
--- a/node_modules/playwright/lib/server/trace/recorder/tracing.js
+++ b/node_modules/playwright/lib/server/trace/recorder/tracing.js
@@ -24,10 +24,10 @@ var _eventsHelper = require("../../../utils/eventsHelper");
 
 var _page = require("../../page");
 
-var _traceSnapshotter = require("./traceSnapshotter");
-
 var _channels = require("../../../protocol/channels");
 
+var _snapshotter = require("../../snapshot/snapshotter");
+
 function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }
 
 /**
@@ -55,7 +55,7 @@ const kScreencastOptions = {
 
 class Tracing {
   constructor(context) {
-    this._appendEventChain = Promise.resolve();
+    this._writeChain = Promise.resolve();
     this._snapshotter = void 0;
     this._screencastListeners = [];
     this._pendingCalls = new Map();
@@ -64,10 +64,11 @@ class Tracing {
     this._recording = void 0;
     this._isStopping = false;
     this._tracesDir = void 0;
+    this._allResources = new Set();
     this._context = context;
     this._tracesDir = context._browser.options.tracesDir;
     this._resourcesDir = _path.default.join(this._tracesDir, 'resources');
-    this._snapshotter = new _traceSnapshotter.TraceSnapshotter(this._context, this._resourcesDir, traceEvent => this._appendTraceEvent(traceEvent));
+    this._snapshotter = new _snapshotter.Snapshotter(context, this);
   }
 
   async start(options) {
@@ -88,7 +89,7 @@ class Tracing {
         lastReset: 0,
         sha1s: new Set()
       };
-      this._appendEventChain = (0, _utils.mkdirIfNeeded)(traceFile);
+      this._writeChain = (0, _utils.mkdirIfNeeded)(traceFile);
       const event = {
         version: VERSION,
         type: 'context-options',
@@ -151,13 +152,15 @@ class Tracing {
 
     await this._snapshotter.stop(); // Ensure all writes are finished.
 
-    await this._appendEventChain;
+    await this._writeChain;
     this._recording = undefined;
     this._isStopping = false;
   }
 
   async dispose() {
-    await this._snapshotter.dispose();
+    this._snapshotter.dispose();
+
+    await this._writeChain;
   }
 
   async export() {
@@ -190,7 +193,6 @@ class Tracing {
     // so that neither trace file nor sha1s change during the export.
 
     return await this._appendTraceOperation(async () => {
-      await this._snapshotter.checkpoint();
       const recording = this._recording;
       let state = recording; // Make a filtered trace if needed.
 
@@ -276,7 +278,7 @@ class Tracing {
       title: name,
       snapshotName
     });
-    await this._snapshotter.captureSnapshot(sdkObject.attribution.page, snapshotName, element);
+    await this._snapshotter.captureSnapshot(sdkObject.attribution.page, snapshotName, element).catch(() => {});
   }
 
   async onBeforeCall(sdkObject, metadata) {
@@ -333,6 +335,24 @@ class Tracing {
     this._appendTraceEvent(event);
   }
 
+  onBlob(blob) {
+    this._appendResource(blob.sha1, blob.buffer);
+  }
+
+  onResourceSnapshot(snapshot) {
+    this._appendTraceEvent({
+      type: 'resource-snapshot',
+      snapshot
+    });
+  }
+
+  onFrameSnapshot(snapshot) {
+    this._appendTraceEvent({
+      type: 'frame-snapshot',
+      snapshot
+    });
+  }
+
   _startScreencastInPage(page) {
     page.setScreencastOptions(kScreencastOptions);
     const prefix = page.guid;
@@ -350,9 +370,7 @@ class Tracing {
         timestamp: (0, _utils.monotonicTime)()
       }; // Make sure to write the screencast frame before adding a reference to it.
 
-      this._appendTraceOperation(async () => {
-        await _fs.default.promises.writeFile(_path.default.join(this._resourcesDir, sha1), params.buffer).catch(() => {});
-      });
+      this._appendResource(sha1, params.buffer);
 
       this._appendTraceEvent(event);
     }));
@@ -366,17 +384,36 @@ class Tracing {
     });
   }
 
+  _appendResource(sha1, buffer) {
+    if (this._allResources.has(sha1)) return;
+
+    this._allResources.add(sha1);
+
+    this._appendTraceOperation(async () => {
+      const resourcePath = _path.default.join(this._resourcesDir, sha1);
+
+      try {
+        // Perhaps we've already written this resource?
+        await _fs.default.promises.access(resourcePath);
+      } catch (e) {
+        // If not, let's write! Note that async access is safe because we
+        // never remove resources until the very end.
+        await _fs.default.promises.writeFile(resourcePath, buffer).catch(() => {});
+      }
+    });
+  }
+
   async _appendTraceOperation(cb) {
     let error;
     let result;
-    this._appendEventChain = this._appendEventChain.then(async () => {
+    this._writeChain = this._writeChain.then(async () => {
       try {
         result = await cb();
       } catch (e) {
         error = e;
       }
     });
-    await this._appendEventChain;
+    await this._writeChain;
     if (error) throw error;
     return result;
   }
diff --git a/node_modules/playwright/lib/test/dispatcher.js b/node_modules/playwright/lib/test/dispatcher.js
index 6d52339..d79f91c 100644
--- a/node_modules/playwright/lib/test/dispatcher.js
+++ b/node_modules/playwright/lib/test/dispatcher.js
@@ -55,7 +55,8 @@ class Dispatcher {
         this._testById.set(test._id, {
           test,
           result,
-          steps: new Map()
+          steps: new Map(),
+          stepStack: new Set()
         });
       }
     }
@@ -221,6 +222,7 @@ class Dispatcher {
         if (!this._isStopped && pair.test.expectedStatus === 'passed' && pair.test.results.length < pair.test.retries + 1) {
           pair.result = pair.test._appendTestResult();
           pair.steps = new Map();
+          pair.stepStack = new Set();
           remaining.push(pair.test);
         }
       }
@@ -322,17 +324,26 @@ class Dispatcher {
       const {
         test,
         result,
-        steps
+        steps,
+        stepStack
       } = this._testById.get(params.testId);
 
+      const parentStep = [...stepStack].pop();
       const step = {
         title: params.title,
+        titlePath: () => {
+          const parentPath = (parentStep === null || parentStep === void 0 ? void 0 : parentStep.titlePath()) || [];
+          return [...parentPath, params.title];
+        },
+        parent: parentStep,
         category: params.category,
         startTime: new Date(params.wallTime),
-        duration: 0
+        duration: 0,
+        steps: []
       };
       steps.set(params.stepId, step);
-      result.steps.push(step);
+      (parentStep || result).steps.push(step);
+      stepStack.add(step);
       (_this$_reporter$onSte = (_this$_reporter5 = this._reporter).onStepBegin) === null || _this$_reporter$onSte === void 0 ? void 0 : _this$_reporter$onSte.call(_this$_reporter5, test, result, step);
     });
     worker.on('stepEnd', params => {
@@ -341,7 +352,8 @@ class Dispatcher {
       const {
         test,
         result,
-        steps
+        steps,
+        stepStack
       } = this._testById.get(params.testId);
 
       const step = steps.get(params.stepId);
@@ -355,6 +367,7 @@ class Dispatcher {
 
       step.duration = params.wallTime - step.startTime.getTime();
       if (params.error) step.error = params.error;
+      stepStack.delete(step);
       steps.delete(params.stepId);
       (_this$_reporter$onSte2 = (_this$_reporter7 = this._reporter).onStepEnd) === null || _this$_reporter$onSte2 === void 0 ? void 0 : _this$_reporter$onSte2.call(_this$_reporter7, test, result, step);
     });
diff --git a/node_modules/playwright/lib/test/index.js b/node_modules/playwright/lib/test/index.js
index 9dd8136..916f1f0 100644
--- a/node_modules/playwright/lib/test/index.js
+++ b/node_modules/playwright/lib/test/index.js
@@ -215,7 +215,7 @@ const test = _baseTest.extend({
       if (captureTrace) await context.tracing.start({
         screenshots: true,
         snapshots: true
-      });
+      });else await context.tracing.stop();
       context._csi = {
         onApiCall: name => {
           return testInfo._addStep('pw:api', name);
diff --git a/node_modules/playwright/lib/test/reporters/.eslintrc.json b/node_modules/playwright/lib/test/reporters/.eslintrc.json
new file mode 100644
index 0000000..f919272
--- /dev/null
+++ b/node_modules/playwright/lib/test/reporters/.eslintrc.json
@@ -0,0 +1,5 @@
+{
+    "rules": {
+        "no-console": "off"
+    }
+}
\ No newline at end of file
diff --git a/node_modules/playwright/lib/test/reporters/base.js b/node_modules/playwright/lib/test/reporters/base.js
index bd6b401..3759669 100644
--- a/node_modules/playwright/lib/test/reporters/base.js
+++ b/node_modules/playwright/lib/test/reporters/base.js
@@ -236,12 +236,17 @@ function relativeTestPath(config, test) {
   return _path.default.relative(config.rootDir, test.location.file) || _path.default.basename(test.location.file);
 }
 
-function formatTestTitle(config, test) {
+function stepSuffix(step) {
+  const stepTitles = step ? step.titlePath() : [];
+  return stepTitles.map(t => ' › ' + t).join('');
+}
+
+function formatTestTitle(config, test, step) {
   // root, project, file, ...describes, test
   const [, projectName,, ...titles] = test.titlePath();
   const location = `${relativeTestPath(config, test)}:${test.location.line}:${test.location.column}`;
   const projectTitle = projectName ? `[${projectName}] › ` : '';
-  return `${projectTitle}${location} › ${titles.join(' ')}`;
+  return `${projectTitle}${location} › ${titles.join(' ')}${stepSuffix(step)}`;
 }
 
 function formatTestHeader(config, test, indent, index) {
diff --git a/node_modules/playwright/lib/test/reporters/html.js b/node_modules/playwright/lib/test/reporters/html.js
index 70bf0f9..51bbcea 100644
--- a/node_modules/playwright/lib/test/reporters/html.js
+++ b/node_modules/playwright/lib/test/reporters/html.js
@@ -139,7 +139,7 @@ class HtmlReporter {
       attachments: await this._createAttachments(testId, result),
       stdout: result.stdout,
       stderr: result.stderr,
-      steps: this._serializeSteps(result.steps)
+      steps: serializeSteps(result.steps)
     };
   }
 
@@ -193,45 +193,19 @@ class HtmlReporter {
     };
   }
 
-  _serializeSteps(steps) {
-    const stepStack = [];
-    const result = [];
-    const stepMap = new Map();
-
-    for (const step of steps) {
-      var _stepMap$get;
-
-      let lastStep = stepStack[stepStack.length - 1];
-
-      while (lastStep && !containsStep(lastStep, step)) {
-        stepStack.pop();
-        lastStep = stepStack[stepStack.length - 1];
-      }
-
-      const collection = ((_stepMap$get = stepMap.get(lastStep)) === null || _stepMap$get === void 0 ? void 0 : _stepMap$get.steps) || result;
-      const jsonStep = {
-        title: step.title,
-        category: step.category,
-        startTime: step.startTime.toISOString(),
-        duration: step.duration,
-        error: step.error,
-        steps: []
-      };
-      collection.push(jsonStep);
-      stepMap.set(step, jsonStep);
-      stepStack.push(step);
-    }
-
-    return result;
-  }
-
 }
 
-function containsStep(outer, inner) {
-  if (outer.startTime.getTime() > inner.startTime.getTime()) return false;
-  if (outer.startTime.getTime() + outer.duration < inner.startTime.getTime() + inner.duration) return false;
-  if (outer.startTime.getTime() + outer.duration <= inner.startTime.getTime()) return false;
-  return true;
+function serializeSteps(steps) {
+  return steps.map(step => {
+    return {
+      title: step.title,
+      category: step.category,
+      startTime: step.startTime.toISOString(),
+      duration: step.duration,
+      error: step.error,
+      steps: serializeSteps(step.steps)
+    };
+  });
 }
 
 function isTextAttachment(contentType) {
diff --git a/node_modules/playwright/lib/test/reporters/list.js b/node_modules/playwright/lib/test/reporters/list.js
index c7b228b..7e16924 100644
--- a/node_modules/playwright/lib/test/reporters/list.js
+++ b/node_modules/playwright/lib/test/reporters/list.js
@@ -37,11 +37,13 @@ const POSITIVE_STATUS_MARK = DOES_NOT_SUPPORT_UTF8_IN_TERMINAL ? 'ok' : '✓';
 const NEGATIVE_STATUS_MARK = DOES_NOT_SUPPORT_UTF8_IN_TERMINAL ? 'x' : '✘';
 
 class ListReporter extends _base.BaseReporter {
-  constructor(...args) {
-    super(...args);
+  constructor() {
+    super();
     this._lastRow = 0;
     this._testRows = new Map();
     this._needNewLine = false;
+    this._liveTerminal = void 0;
+    this._liveTerminal = process.stdout.isTTY || process.env.PWTEST_SKIP_TEST_OUTPUT;
   }
 
   onBegin(config, suite) {
@@ -50,7 +52,7 @@ class ListReporter extends _base.BaseReporter {
   }
 
   onTestBegin(test) {
-    if (process.stdout.isTTY) {
+    if (this._liveTerminal) {
       if (this._needNewLine) {
         this._needNewLine = false;
         process.stdout.write('\n');
@@ -75,12 +77,26 @@ class ListReporter extends _base.BaseReporter {
     this._dumpToStdio(test, chunk, process.stdout);
   }
 
+  onStepBegin(test, result, step) {
+    if (!this._liveTerminal) return;
+    if (step.category !== 'test.step') return;
+
+    this._updateTestLine(test, '     ' + _safe.default.gray((0, _base.formatTestTitle)(this.config, test, step)));
+  }
+
+  onStepEnd(test, result, step) {
+    if (!this._liveTerminal) return;
+    if (step.category !== 'test.step') return;
+
+    this._updateTestLine(test, '     ' + _safe.default.gray((0, _base.formatTestTitle)(this.config, test, step.parent)));
+  }
+
   _dumpToStdio(test, chunk, stream) {
     if (this.config.quiet) return;
     const text = chunk.toString('utf-8');
     this._needNewLine = text[text.length - 1] !== '\n';
 
-    if (process.stdout.isTTY) {
+    if (this._liveTerminal) {
       const newLineCount = text.split('\n').length - 1;
       this._lastRow += newLineCount;
     }
@@ -103,23 +119,39 @@ class ListReporter extends _base.BaseReporter {
       if (result.status === test.expectedStatus) text = '\u001b[2K\u001b[0G' + _safe.default.green(statusMark) + _safe.default.gray(title) + duration;else text = '\u001b[2K\u001b[0G' + _safe.default.red(statusMark + title) + duration;
     }
 
+    if (this._liveTerminal) {
+      this._updateTestLine(test, text);
+    } else {
+      if (this._needNewLine) {
+        this._needNewLine = false;
+        process.stdout.write('\n');
+      }
+
+      process.stdout.write(text);
+      process.stdout.write('\n');
+    }
+  }
+
+  _updateTestLine(test, line) {
+    if (process.env.PWTEST_SKIP_TEST_OUTPUT) this._updateTestLineForTest(test, line);else this._updateTestLineForTTY(test, line);
+  }
+
+  _updateTestLineForTTY(test, line) {
     const testRow = this._testRows.get(test); // Go up if needed
 
 
-    if (process.stdout.isTTY && testRow !== this._lastRow) process.stdout.write(`\u001B[${this._lastRow - testRow}A`); // Erase line
+    if (testRow !== this._lastRow) process.stdout.write(`\u001B[${this._lastRow - testRow}A`); // Erase line
 
-    if (process.stdout.isTTY) process.stdout.write('\u001B[2K');
+    process.stdout.write('\u001B[2K');
+    process.stdout.write(line); // Go down if needed.
 
-    if (!process.stdout.isTTY && this._needNewLine) {
-      this._needNewLine = false;
-      process.stdout.write('\n');
-    }
+    if (testRow !== this._lastRow) process.stdout.write(`\u001B[${this._lastRow - testRow}E`);
+  }
 
-    process.stdout.write(text); // Go down if needed.
+  _updateTestLineForTest(test, line) {
+    const testRow = this._testRows.get(test);
 
-    if (testRow !== this._lastRow) {
-      if (process.stdout.isTTY) process.stdout.write(`\u001B[${this._lastRow - testRow}E`);else process.stdout.write('\n');
-    }
+    process.stdout.write(testRow + ' : ' + line + '\n');
   }
 
   async onEnd(result) {
diff --git a/node_modules/playwright/lib/utils/browserFetcher.js.map b/node_modules/playwright/lib/utils/browserFetcher.js.map
new file mode 100644
index 0000000..0eafd27
--- /dev/null
+++ b/node_modules/playwright/lib/utils/browserFetcher.js.map
@@ -0,0 +1 @@
+{"version":3,"sources":["../../src/utils/browserFetcher.ts"],"names":["downloadBrowserWithProgressBar","title","browserDirectory","executablePath","downloadURL","downloadFileName","progressBarName","debugLogger","log","progressBar","lastDownloadedBytes","progress","downloadedBytes","totalBytes","process","stderr","isTTY","ProgressBar","toMegabytes","complete","incomplete","width","total","delta","tick","url","zipPath","path","join","os","tmpdir","attempt","N","error","progressCallback","bind","errorMessage","message","includes","millis","Math","random","pow","Promise","c","setTimeout","dir","fs","promises","chmod","e","exitCode","unlink","logPolitely","bytes","mb","round","toBeLogged","logLevel","env","npm_config_loglevel","logLevelDisplay","indexOf","console"],"mappings":"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","sourcesContent":["/**\n * Copyright 2017 Google Inc. All rights reserved.\n * Modifications copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport extract from 'extract-zip';\nimport fs from 'fs';\nimport os from 'os';\nimport path from 'path';\nimport ProgressBar from 'progress';\nimport { downloadFile, existsAsync } from './utils';\nimport { debugLogger } from './debugLogger';\n\nexport async function downloadBrowserWithProgressBar(title: string, browserDirectory: string, executablePath: string, downloadURL: string, downloadFileName: string): Promise<boolean> {\n  const progressBarName = `Playwright build of ${title}`;\n  if (await existsAsync(browserDirectory)) {\n    // Already downloaded.\n    debugLogger.log('install', `browser ${title} is already downloaded.`);\n    return false;\n  }\n\n  let progressBar: ProgressBar;\n  let lastDownloadedBytes = 0;\n\n  function progress(downloadedBytes: number, totalBytes: number) {\n    if (!process.stderr.isTTY)\n      return;\n    if (!progressBar) {\n      progressBar = new ProgressBar(`Downloading ${progressBarName} - ${toMegabytes(totalBytes)} [:bar] :percent :etas `, {\n        complete: '=',\n        incomplete: ' ',\n        width: 20,\n        total: totalBytes,\n      });\n    }\n    const delta = downloadedBytes - lastDownloadedBytes;\n    lastDownloadedBytes = downloadedBytes;\n    progressBar.tick(delta);\n  }\n\n  const url = downloadURL;\n  const zipPath = path.join(os.tmpdir(), downloadFileName);\n  try {\n    for (let attempt = 1, N = 3; attempt <= N; ++attempt) {\n      debugLogger.log('install', `downloading ${progressBarName} - attempt #${attempt}`);\n      const {error} = await downloadFile(url, zipPath, {progressCallback: progress, log: debugLogger.log.bind(debugLogger, 'install')});\n      if (!error) {\n        debugLogger.log('install', `SUCCESS downloading ${progressBarName}`);\n        break;\n      }\n      const errorMessage = typeof error === 'object' && typeof error.message === 'string' ? error.message : '';\n      debugLogger.log('install', `attempt #${attempt} - ERROR: ${errorMessage}`);\n      if (attempt < N && (errorMessage.includes('ECONNRESET') || errorMessage.includes('ETIMEDOUT'))) {\n        // Maximum delay is 3rd retry: 1337.5ms\n        const millis = (Math.random() * 200) + (250 * Math.pow(1.5, attempt));\n        debugLogger.log('install', `sleeping ${millis}ms before retry...`);\n        await new Promise(c => setTimeout(c, millis));\n      } else {\n        throw error;\n      }\n    }\n    debugLogger.log('install', `extracting archive`);\n    debugLogger.log('install', `-- zip: ${zipPath}`);\n    debugLogger.log('install', `-- location: ${browserDirectory}`);\n    await extract(zipPath, { dir: browserDirectory});\n    debugLogger.log('install', `fixing permissions at ${executablePath}`);\n    await fs.promises.chmod(executablePath, 0o755);\n  } catch (e) {\n    debugLogger.log('install', `FAILED installation ${progressBarName} with error: ${e}`);\n    process.exitCode = 1;\n    throw e;\n  } finally {\n    if (await existsAsync(zipPath))\n      await fs.promises.unlink(zipPath);\n  }\n  logPolitely(`${progressBarName} downloaded to ${browserDirectory}`);\n  return true;\n}\n\nfunction toMegabytes(bytes: number) {\n  const mb = bytes / 1024 / 1024;\n  return `${Math.round(mb * 10) / 10} Mb`;\n}\n\nexport function logPolitely(toBeLogged: string) {\n  const logLevel = process.env.npm_config_loglevel;\n  const logLevelDisplay = ['silent', 'error', 'warn'].indexOf(logLevel || '') > -1;\n\n  if (!logLevelDisplay)\n    console.log(toBeLogged);  // eslint-disable-line no-console\n}\n"],"file":"browserFetcher.js"}
\ No newline at end of file
diff --git a/node_modules/playwright/lib/utils/debugLogger.js.map b/node_modules/playwright/lib/utils/debugLogger.js.map
new file mode 100644
index 0000000..33a7c52
--- /dev/null
+++ b/node_modules/playwright/lib/utils/debugLogger.js.map
@@ -0,0 +1 @@
+{"version":3,"sources":["../../src/utils/debugLogger.ts"],"names":["debugLoggerColorMap","DebugLogger","constructor","_debuggers","Map","process","env","DEBUG_FILE","ansiRegex","RegExp","join","stream","fs","createWriteStream","debug","log","data","write","replace","name","message","cachedDebugger","get","set","color","isEnabled","enabled","debugLogger","kLogCount","RecentLogsCollector","_logs","push","length","splice","recentLogs","slice"],"mappings":";;;;;;;AAgBA;;AACA;;;;AAjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAKA,MAAMA,mBAAmB,GAAG;AAC1B,SAAO,EADmB;AACf;AACX,cAAY,EAFc;AAEV;AAChB,aAAW,EAHe;AAGX;AACf,aAAW,CAJe;AAIZ;AACd,WAAS,EALiB;AAKb;AACb,WAAS,GANiB;AAMZ;AACd,qBAAmB,EAPO;AAOH;AACvB,sBAAoB,GARM;AAQD;AACzB,mBAAiB,GATS,CASJ;;AATI,CAA5B;;AAaA,MAAMC,WAAN,CAAkB;AAGhBC,EAAAA,WAAW,GAAG;AAAA,SAFNC,UAEM,GAFO,IAAIC,GAAJ,EAEP;;AACZ,QAAIC,OAAO,CAACC,GAAR,CAAYC,UAAhB,EAA4B;AAC1B,YAAMC,SAAS,GAAG,IAAIC,MAAJ,CAAW,CAC3B,6FAD2B,EAE3B,0DAF2B,EAG3BC,IAH2B,CAGtB,GAHsB,CAAX,EAGL,GAHK,CAAlB;;AAIA,YAAMC,MAAM,GAAGC,YAAGC,iBAAH,CAAqBR,OAAO,CAACC,GAAR,CAAYC,UAAjC,CAAf;;AACCO,oBAAD,CAAeC,GAAf,GAAsBC,IAAD,IAAkB;AACrCL,QAAAA,MAAM,CAACM,KAAP,CAAaD,IAAI,CAACE,OAAL,CAAaV,SAAb,EAAwB,EAAxB,CAAb;AACAG,QAAAA,MAAM,CAACM,KAAP,CAAa,IAAb;AACD,OAHD;AAID;AACF;;AAEDF,EAAAA,GAAG,CAACI,IAAD,EAAgBC,OAAhB,EAAkD;AACnD,QAAIC,cAAc,GAAG,KAAKlB,UAAL,CAAgBmB,GAAhB,CAAoBH,IAApB,CAArB;;AACA,QAAI,CAACE,cAAL,EAAqB;AACnBA,MAAAA,cAAc,GAAG,oBAAO,MAAKF,IAAK,EAAjB,CAAjB;;AACA,WAAKhB,UAAL,CAAgBoB,GAAhB,CAAoBJ,IAApB,EAA0BE,cAA1B;;AACCA,MAAAA,cAAD,CAAwBG,KAAxB,GAAgCxB,mBAAmB,CAACmB,IAAD,CAAnD;AACD;;AACDE,IAAAA,cAAc,CAACD,OAAD,CAAd;AACD;;AAEDK,EAAAA,SAAS,CAACN,IAAD,EAAgB;AACvB,WAAOL,eAAMY,OAAN,CAAe,MAAKP,IAAK,EAAzB,CAAP;AACD;;AA7Be;;AAgCX,MAAMQ,WAAW,GAAG,IAAI1B,WAAJ,EAApB;;AAEP,MAAM2B,SAAS,GAAG,EAAlB;;AACO,MAAMC,mBAAN,CAA0B;AAAA;AAAA,SACvBC,KADuB,GACL,EADK;AAAA;;AAG/Bf,EAAAA,GAAG,CAACK,OAAD,EAAkB;AACnB,SAAKU,KAAL,CAAWC,IAAX,CAAgBX,OAAhB;;AACA,QAAI,KAAKU,KAAL,CAAWE,MAAX,KAAsBJ,SAAS,GAAG,CAAtC,EACE,KAAKE,KAAL,CAAWG,MAAX,CAAkB,CAAlB,EAAqBL,SAArB;AACH;;AAEDM,EAAAA,UAAU,GAAa;AACrB,QAAI,KAAKJ,KAAL,CAAWE,MAAX,GAAoBJ,SAAxB,EACE,OAAO,KAAKE,KAAL,CAAWK,KAAX,CAAiB,CAACP,SAAlB,CAAP;AACF,WAAO,KAAKE,KAAZ;AACD;;AAb8B","sourcesContent":["/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport debug from 'debug';\nimport fs from 'fs';\n\nconst debugLoggerColorMap = {\n  'api': 45, // cyan\n  'protocol': 34, // green\n  'install': 34, // green\n  'browser': 0, // reset\n  'proxy': 92, // purple\n  'error': 160, // red,\n  'channel:command': 33, // blue\n  'channel:response': 202, // orange\n  'channel:event': 207, // magenta\n};\nexport type LogName = keyof typeof debugLoggerColorMap;\n\nclass DebugLogger {\n  private _debuggers = new Map<string, debug.IDebugger>();\n\n  constructor() {\n    if (process.env.DEBUG_FILE) {\n      const ansiRegex = new RegExp([\n        '[\\\\u001B\\\\u009B][[\\\\]()#;?]*(?:(?:(?:[a-zA-Z\\\\d]*(?:;[-a-zA-Z\\\\d\\\\/#&.:=?%@~_]*)*)?\\\\u0007)',\n        '(?:(?:\\\\d{1,4}(?:;\\\\d{0,4})*)?[\\\\dA-PR-TZcf-ntqry=><~]))'\n      ].join('|'), 'g');\n      const stream = fs.createWriteStream(process.env.DEBUG_FILE);\n      (debug as any).log = (data: string) => {\n        stream.write(data.replace(ansiRegex, ''));\n        stream.write('\\n');\n      };\n    }\n  }\n\n  log(name: LogName, message: string | Error | object) {\n    let cachedDebugger = this._debuggers.get(name);\n    if (!cachedDebugger) {\n      cachedDebugger = debug(`pw:${name}`);\n      this._debuggers.set(name, cachedDebugger);\n      (cachedDebugger as any).color = debugLoggerColorMap[name];\n    }\n    cachedDebugger(message);\n  }\n\n  isEnabled(name: LogName) {\n    return debug.enabled(`pw:${name}`);\n  }\n}\n\nexport const debugLogger = new DebugLogger();\n\nconst kLogCount = 50;\nexport class RecentLogsCollector {\n  private _logs: string[] = [];\n\n  log(message: string) {\n    this._logs.push(message);\n    if (this._logs.length === kLogCount * 2)\n      this._logs.splice(0, kLogCount);\n  }\n\n  recentLogs(): string[] {\n    if (this._logs.length > kLogCount)\n      return this._logs.slice(-kLogCount);\n    return this._logs;\n  }\n}\n"],"file":"debugLogger.js"}
\ No newline at end of file
diff --git a/node_modules/playwright/lib/utils/dependencies.js.map b/node_modules/playwright/lib/utils/dependencies.js.map
new file mode 100644
index 0000000..3d1357e
--- /dev/null
+++ b/node_modules/playwright/lib/utils/dependencies.js.map
@@ -0,0 +1 @@
+{"version":3,"sources":["../../src/utils/dependencies.ts"],"names":["BIN_DIRECTORY","path","join","__dirname","checkExecutable","filePath","fs","promises","access","constants","X_OK","then","catch","e","isSupportedWindowsVersion","os","platform","arch","major","minor","release","split","map","token","parseInt","installDependenciesWindows","targets","has","code","utils","spawnAsync","cwd","stdio","Error","installDependenciesLinux","ubuntuVersion","console","warn","libraries","deps","require","target","push","uniqueLibraries","Array","from","Set","log","commands","isRoot","process","getuid","child","childProcess","spawn","Promise","f","on","validateDependenciesWindows","windowsExeAndDllDirectories","directoryPaths","lddPaths","directoryPath","executablesOrSharedLibraries","allMissingDeps","all","lddPath","missingFileDependenciesWindows","missingDeps","dep","add","size","isCrtMissing","isMediaFoundationMissing","startsWith","details","message","validateDependenciesLinux","linuxLddDirectories","dlOpenLibraries","missingFileDependencies","missingDLOPENLibraries","missingPackages","libraryToPackageNameMapping","LIBRARY_TO_PACKAGE_NAME_UBUNTU_18_04","LIBRARY_TO_PACKAGE_NAME_UBUNTU_20_04","LIBRARY_TO_PACKAGE_NAME_UBUNTU_21_04","Object","assign","MANUAL_LIBRARY_TO_PACKAGE_NAME_UBUNTU","missingDep","packageName","delete","maybeSudo","wrapInASCIIBox","missingPackagesMessage","missingDependenciesMessage","header","isSharedLib","basename","endsWith","includes","allPaths","readdir","file","resolve","allStats","aPath","stat","filePaths","filter","index","isFile","executablersOrLibraries","toLowerCase","Boolean","executable","dirname","stdout","env","LD_LIBRARY_PATH","line","trim","extraLDPaths","length","error","isLibraryAvailable","library"],"mappings":"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","sourcesContent":["/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport fs from 'fs';\nimport path from 'path';\nimport * as os from 'os';\nimport childProcess from 'child_process';\nimport { getUbuntuVersion } from './ubuntuVersion';\nimport * as utils from './utils';\n\nconst BIN_DIRECTORY = path.join(__dirname, '..', '..', 'bin');\n\nconst checkExecutable = (filePath: string) => fs.promises.access(filePath, fs.constants.X_OK).then(() => true).catch(e => false);\n\nfunction isSupportedWindowsVersion(): boolean {\n  if (os.platform() !== 'win32' || os.arch() !== 'x64')\n    return false;\n  const [major, minor] = os.release().split('.').map(token => parseInt(token, 10));\n  // This is based on: https://stackoverflow.com/questions/42524606/how-to-get-windows-version-using-node-js/44916050#44916050\n  // The table with versions is taken from: https://docs.microsoft.com/en-us/windows/win32/api/winnt/ns-winnt-osversioninfoexw#remarks\n  // Windows 7 is not supported and is encoded as `6.1`.\n  return major > 6 || (major === 6 && minor > 1);\n}\n\nexport type DependencyGroup = 'chromium' | 'firefox' | 'webkit' | 'tools';\n\nexport async function installDependenciesWindows(targets: Set<DependencyGroup>) {\n  if (targets.has('chromium')) {\n    const {code} = await utils.spawnAsync('powershell.exe', [path.join(BIN_DIRECTORY, 'install_media_pack.ps1')], { cwd: BIN_DIRECTORY, stdio: 'inherit' });\n    if (code !== 0)\n      throw new Error('Failed to install windows dependencies!');\n  }\n}\n\nexport async function installDependenciesLinux(targets: Set<DependencyGroup>) {\n  const ubuntuVersion = await getUbuntuVersion();\n  if (ubuntuVersion !== '18.04' && ubuntuVersion !== '20.04' && ubuntuVersion !== '21.04') {\n    console.warn('Cannot install dependencies for this linux distribution!');  // eslint-disable-line no-console\n    return;\n  }\n\n  const libraries: string[] = [];\n  const { deps } = require('../nativeDeps');\n  for (const target of targets) {\n    if (ubuntuVersion === '18.04')\n      libraries.push(...deps['bionic'][target]);\n    else if (ubuntuVersion === '20.04')\n      libraries.push(...deps['focal'][target]);\n    else if (ubuntuVersion === '21.04')\n      libraries.push(...deps['hirsute'][target]);\n  }\n  const uniqueLibraries = Array.from(new Set(libraries));\n  console.log('Installing Ubuntu dependencies...');  // eslint-disable-line no-console\n  const commands: string[] = [];\n  commands.push('apt-get update');\n  commands.push(['apt-get', 'install', '-y', '--no-install-recommends',\n    ...uniqueLibraries,\n  ].join(' '));\n  const isRoot = (process.getuid() === 0);\n  const child = isRoot ?\n    childProcess.spawn('sh', ['-c', `${commands.join('; ')}`], { stdio: 'inherit' }) :\n    childProcess.spawn('sudo', ['--', 'sh', '-c', `${commands.join('; ')}`], { stdio: 'inherit' });\n  await new Promise(f => child.on('exit', f));\n}\n\nexport async function validateDependenciesWindows(windowsExeAndDllDirectories: string[]) {\n  const directoryPaths = windowsExeAndDllDirectories;\n  const lddPaths: string[] = [];\n  for (const directoryPath of directoryPaths)\n    lddPaths.push(...(await executablesOrSharedLibraries(directoryPath)));\n  const allMissingDeps = await Promise.all(lddPaths.map(lddPath => missingFileDependenciesWindows(lddPath)));\n  const missingDeps: Set<string> = new Set();\n  for (const deps of allMissingDeps) {\n    for (const dep of deps)\n      missingDeps.add(dep);\n  }\n\n  if (!missingDeps.size)\n    return;\n\n  let isCrtMissing = false;\n  let isMediaFoundationMissing = false;\n  for (const dep of missingDeps) {\n    if (dep.startsWith('api-ms-win-crt') || dep === 'vcruntime140.dll' || dep === 'vcruntime140_1.dll' || dep === 'msvcp140.dll')\n      isCrtMissing = true;\n    else if (dep === 'mf.dll' || dep === 'mfplat.dll' ||  dep === 'msmpeg2vdec.dll' || dep === 'evr.dll' || dep === 'avrt.dll')\n      isMediaFoundationMissing = true;\n  }\n\n  const details = [];\n\n  if (isCrtMissing) {\n    details.push(\n        `Some of the Universal C Runtime files cannot be found on the system. You can fix`,\n        `that by installing Microsoft Visual C++ Redistributable for Visual Studio from:`,\n        `https://support.microsoft.com/en-us/help/2977003/the-latest-supported-visual-c-downloads`,\n        ``);\n  }\n\n  if (isMediaFoundationMissing) {\n    details.push(\n        `Some of the Media Foundation files cannot be found on the system. If you are`,\n        `on Windows Server try fixing this by running the following command in PowerShell`,\n        `as Administrator:`,\n        ``,\n        `    Install-WindowsFeature Server-Media-Foundation`,\n        ``,\n        `For Windows N editions visit:`,\n        `https://support.microsoft.com/en-us/help/3145500/media-feature-pack-list-for-windows-n-editions`,\n        ``);\n  }\n\n  details.push(\n      `Full list of missing libraries:`,\n      `    ${[...missingDeps].join('\\n    ')}`,\n      ``);\n\n  const message = `Host system is missing dependencies!\\n\\n${details.join('\\n')}`;\n  if (isSupportedWindowsVersion()) {\n    throw new Error(message);\n  } else {\n    console.warn(`WARNING: running on unsupported windows version!`);\n    console.warn(message);\n  }\n}\n\nexport async function validateDependenciesLinux(linuxLddDirectories: string[], dlOpenLibraries: string[]) {\n  const directoryPaths = linuxLddDirectories;\n  const lddPaths: string[] = [];\n  for (const directoryPath of directoryPaths)\n    lddPaths.push(...(await executablesOrSharedLibraries(directoryPath)));\n  const allMissingDeps = await Promise.all(lddPaths.map(lddPath => missingFileDependencies(lddPath, directoryPaths)));\n  const missingDeps: Set<string> = new Set();\n  for (const deps of allMissingDeps) {\n    for (const dep of deps)\n      missingDeps.add(dep);\n  }\n  for (const dep of (await missingDLOPENLibraries(dlOpenLibraries)))\n    missingDeps.add(dep);\n  if (!missingDeps.size)\n    return;\n  // Check Ubuntu version.\n  const missingPackages = new Set();\n\n  const ubuntuVersion = await getUbuntuVersion();\n  let libraryToPackageNameMapping = null;\n  if (ubuntuVersion === '18.04')\n    libraryToPackageNameMapping = LIBRARY_TO_PACKAGE_NAME_UBUNTU_18_04;\n  else if (ubuntuVersion === '20.04')\n    libraryToPackageNameMapping = LIBRARY_TO_PACKAGE_NAME_UBUNTU_20_04;\n  else if (ubuntuVersion === '21.04')\n    libraryToPackageNameMapping = LIBRARY_TO_PACKAGE_NAME_UBUNTU_21_04;\n  libraryToPackageNameMapping = Object.assign({}, libraryToPackageNameMapping, MANUAL_LIBRARY_TO_PACKAGE_NAME_UBUNTU);\n  if (libraryToPackageNameMapping) {\n    // Translate missing dependencies to package names to install with apt.\n    for (const missingDep of missingDeps) {\n      const packageName = libraryToPackageNameMapping[missingDep];\n      if (packageName) {\n        missingPackages.add(packageName);\n        missingDeps.delete(missingDep);\n      }\n    }\n  }\n\n  const maybeSudo = (process.getuid() !== 0) && os.platform() !== 'win32' ? 'sudo ' : '';\n  // Happy path: known dependencies are missing for browsers.\n  // Suggest installation with a Playwright CLI.\n  if (missingPackages.size && !missingDeps.size) {\n    throw new Error('\\n' + utils.wrapInASCIIBox([\n      `Host system is missing a few dependencies to run browsers.`,\n      `Please install them with the following command:`,\n      ``,\n      `    ${maybeSudo}npx playwright install-deps`,\n      ``,\n      `<3 Playwright Team`,\n    ].join('\\n'), 1));\n  }\n\n  // Unhappy path - unusual distribution configuration.\n  let missingPackagesMessage = '';\n  if (missingPackages.size) {\n    missingPackagesMessage = [\n      `  Install missing packages with:`,\n      `      ${maybeSudo}apt-get install ${[...missingPackages].join('\\\\\\n          ')}`,\n      ``,\n      ``,\n    ].join('\\n');\n  }\n\n  let missingDependenciesMessage = '';\n  if (missingDeps.size) {\n    const header = missingPackages.size ? `Missing libraries we didn't find packages for:` : `Missing libraries are:`;\n    missingDependenciesMessage = [\n      `  ${header}`,\n      `      ${[...missingDeps].join('\\n      ')}`,\n      ``,\n    ].join('\\n');\n  }\n\n  throw new Error('Host system is missing dependencies!\\n\\n' + missingPackagesMessage + missingDependenciesMessage);\n}\n\nfunction isSharedLib(basename: string) {\n  switch (os.platform()) {\n    case 'linux':\n      return basename.endsWith('.so') || basename.includes('.so.');\n    case 'win32':\n      return basename.endsWith('.dll');\n    default:\n      return false;\n  }\n}\n\nasync function executablesOrSharedLibraries(directoryPath: string): Promise<string[]> {\n  const allPaths = (await fs.promises.readdir(directoryPath)).map(file => path.resolve(directoryPath, file));\n  const allStats = await Promise.all(allPaths.map(aPath => fs.promises.stat(aPath)));\n  const filePaths = allPaths.filter((aPath, index) => (allStats[index] as any).isFile());\n\n  const executablersOrLibraries = (await Promise.all(filePaths.map(async filePath => {\n    const basename = path.basename(filePath).toLowerCase();\n    if (isSharedLib(basename))\n      return filePath;\n    if (await checkExecutable(filePath))\n      return filePath;\n    return false;\n  }))).filter(Boolean);\n\n  return executablersOrLibraries as string[];\n}\n\nasync function missingFileDependenciesWindows(filePath: string): Promise<Array<string>> {\n  const executable = path.join(__dirname, '..', '..', 'bin', 'PrintDeps.exe');\n  const dirname = path.dirname(filePath);\n  const {stdout, code} = await utils.spawnAsync(executable, [filePath], {\n    cwd: dirname,\n    env: {\n      ...process.env,\n      LD_LIBRARY_PATH: process.env.LD_LIBRARY_PATH ? `${process.env.LD_LIBRARY_PATH}:${dirname}` : dirname,\n    },\n  });\n  if (code !== 0)\n    return [];\n  const missingDeps = stdout.split('\\n').map(line => line.trim()).filter(line => line.endsWith('not found') && line.includes('=>')).map(line => line.split('=>')[0].trim().toLowerCase());\n  return missingDeps;\n}\n\nasync function missingFileDependencies(filePath: string, extraLDPaths: string[]): Promise<Array<string>> {\n  const dirname = path.dirname(filePath);\n  let LD_LIBRARY_PATH = extraLDPaths.join(':');\n  if (process.env.LD_LIBRARY_PATH)\n    LD_LIBRARY_PATH = `${process.env.LD_LIBRARY_PATH}:${LD_LIBRARY_PATH}`;\n  const {stdout, code} = await utils.spawnAsync('ldd', [filePath], {\n    cwd: dirname,\n    env: {\n      ...process.env,\n      LD_LIBRARY_PATH,\n    },\n  });\n  if (code !== 0)\n    return [];\n  const missingDeps = stdout.split('\\n').map(line => line.trim()).filter(line => line.endsWith('not found') && line.includes('=>')).map(line => line.split('=>')[0].trim());\n  return missingDeps;\n}\n\nasync function missingDLOPENLibraries(libraries: string[]): Promise<string[]> {\n  if (!libraries.length)\n    return [];\n  // NOTE: Using full-qualified path to `ldconfig` since `/sbin` is not part of the\n  // default PATH in CRON.\n  // @see https://github.com/microsoft/playwright/issues/3397\n  const {stdout, code, error} = await utils.spawnAsync('/sbin/ldconfig', ['-p'], {});\n  if (code !== 0 || error)\n    return [];\n  const isLibraryAvailable = (library: string) => stdout.toLowerCase().includes(library.toLowerCase());\n  return libraries.filter(library => !isLibraryAvailable(library));\n}\n\n// This list is generted with the following program:\n// ./utils/linux-browser-dependencies/run.sh ubuntu:18.04\nconst LIBRARY_TO_PACKAGE_NAME_UBUNTU_18_04: { [s: string]: string} = {\n  'libasound.so.2': 'libasound2',\n  'libatk-1.0.so.0': 'libatk1.0-0',\n  'libatk-bridge-2.0.so.0': 'libatk-bridge2.0-0',\n  'libatspi.so.0': 'libatspi2.0-0',\n  'libbrotlidec.so.1': 'libbrotli1',\n  'libcairo-gobject.so.2': 'libcairo-gobject2',\n  'libcairo.so.2': 'libcairo2',\n  'libcups.so.2': 'libcups2',\n  'libdbus-1.so.3': 'libdbus-1-3',\n  'libdbus-glib-1.so.2': 'libdbus-glib-1-2',\n  'libdrm.so.2': 'libdrm2',\n  'libEGL.so.1': 'libegl1',\n  'libenchant.so.1': 'libenchant1c2a',\n  'libepoxy.so.0': 'libepoxy0',\n  'libevent-2.1.so.6': 'libevent-2.1-6',\n  'libevdev.so.2': 'libevdev2',\n  'libfontconfig.so.1': 'libfontconfig1',\n  'libfreetype.so.6': 'libfreetype6',\n  'libgbm.so.1': 'libgbm1',\n  'libgdk_pixbuf-2.0.so.0': 'libgdk-pixbuf2.0-0',\n  'libgdk-3.so.0': 'libgtk-3-0',\n  'libgdk-x11-2.0.so.0': 'libgtk2.0-0',\n  'libgio-2.0.so.0': 'libglib2.0-0',\n  'libGL.so.1': 'libgl1',\n  'libGLESv2.so.2': 'libgles2',\n  'libglib-2.0.so.0': 'libglib2.0-0',\n  'libgmodule-2.0.so.0': 'libglib2.0-0',\n  'libgobject-2.0.so.0': 'libglib2.0-0',\n  'libgstapp-1.0.so.0': 'gstreamer1.0-plugins-base',\n  'libgstaudio-1.0.so.0': 'gstreamer1.0-plugins-base',\n  'libgstbase-1.0.so.0': 'libgstreamer1.0-0',\n  'libgstcodecparsers-1.0.so.0': 'gstreamer1.0-plugins-bad',\n  'libgstfft-1.0.so.0': 'gstreamer1.0-plugins-base',\n  'libgstgl-1.0.so.0': 'libgstreamer-gl1.0-0',\n  'libgstpbutils-1.0.so.0': 'gstreamer1.0-plugins-base',\n  'libgstreamer-1.0.so.0': 'libgstreamer1.0-0',\n  'libgsttag-1.0.so.0': 'gstreamer1.0-plugins-base',\n  'libgstvideo-1.0.so.0': 'gstreamer1.0-plugins-base',\n  'libgthread-2.0.so.0': 'libglib2.0-0',\n  'libgtk-3.so.0': 'libgtk-3-0',\n  'libgtk-x11-2.0.so.0': 'libgtk2.0-0',\n  'libharfbuzz-icu.so.0': 'libharfbuzz-icu0',\n  'libharfbuzz.so.0': 'libharfbuzz0b',\n  'libhyphen.so.0': 'libhyphen0',\n  'libicudata.so.60': 'libicu60',\n  'libicui18n.so.60': 'libicu60',\n  'libicuuc.so.60': 'libicu60',\n  'libjpeg.so.8': 'libjpeg-turbo8',\n  'libnotify.so.4': 'libnotify4',\n  'libnspr4.so': 'libnspr4',\n  'libnss3.so': 'libnss3',\n  'libnssutil3.so': 'libnss3',\n  'libopenjp2.so.7': 'libopenjp2-7',\n  'libopus.so.0': 'libopus0',\n  'libpango-1.0.so.0': 'libpango-1.0-0',\n  'libpangocairo-1.0.so.0': 'libpangocairo-1.0-0',\n  'libpangoft2-1.0.so.0': 'libpangoft2-1.0-0',\n  'libpng16.so.16': 'libpng16-16',\n  'libsecret-1.so.0': 'libsecret-1-0',\n  'libsmime3.so': 'libnss3',\n  'libvpx.so.5': 'libvpx5',\n  'libwayland-client.so.0': 'libwayland-client0',\n  'libwayland-egl.so.1': 'libwayland-egl1',\n  'libwayland-server.so.0': 'libwayland-server0',\n  'libwebp.so.6': 'libwebp6',\n  'libwebpdemux.so.2': 'libwebpdemux2',\n  'libwoff2dec.so.1.0.2': 'libwoff1',\n  'libX11-xcb.so.1': 'libx11-xcb1',\n  'libX11.so.6': 'libx11-6',\n  'libxcb-dri3.so.0': 'libxcb-dri3-0',\n  'libxcb-shm.so.0': 'libxcb-shm0',\n  'libxcb.so.1': 'libxcb1',\n  'libXcomposite.so.1': 'libxcomposite1',\n  'libXcursor.so.1': 'libxcursor1',\n  'libXdamage.so.1': 'libxdamage1',\n  'libXext.so.6': 'libxext6',\n  'libXfixes.so.3': 'libxfixes3',\n  'libXi.so.6': 'libxi6',\n  'libxkbcommon.so.0': 'libxkbcommon0',\n  'libxml2.so.2': 'libxml2',\n  'libXrandr.so.2': 'libxrandr2',\n  'libXrender.so.1': 'libxrender1',\n  'libxslt.so.1': 'libxslt1.1',\n  'libXt.so.6': 'libxt6',\n  'libXtst.so.6': 'libxtst6',\n};\n\n// This list is generted with the following program:\n// ./utils/linux-browser-dependencies/run.sh ubuntu:20.04\nconst LIBRARY_TO_PACKAGE_NAME_UBUNTU_20_04: { [s: string]: string} = {\n  'libasound.so.2': 'libasound2',\n  'libatk-1.0.so.0': 'libatk1.0-0',\n  'libatk-bridge-2.0.so.0': 'libatk-bridge2.0-0',\n  'libatspi.so.0': 'libatspi2.0-0',\n  'libcairo-gobject.so.2': 'libcairo-gobject2',\n  'libcairo.so.2': 'libcairo2',\n  'libcups.so.2': 'libcups2',\n  'libdbus-1.so.3': 'libdbus-1-3',\n  'libdbus-glib-1.so.2': 'libdbus-glib-1-2',\n  'libdrm.so.2': 'libdrm2',\n  'libEGL.so.1': 'libegl1',\n  'libenchant.so.1': 'libenchant1c2a',\n  'libevdev.so.2': 'libevdev2',\n  'libepoxy.so.0': 'libepoxy0',\n  'libfontconfig.so.1': 'libfontconfig1',\n  'libfreetype.so.6': 'libfreetype6',\n  'libgbm.so.1': 'libgbm1',\n  'libgdk_pixbuf-2.0.so.0': 'libgdk-pixbuf2.0-0',\n  'libgdk-3.so.0': 'libgtk-3-0',\n  'libgdk-x11-2.0.so.0': 'libgtk2.0-0',\n  'libgio-2.0.so.0': 'libglib2.0-0',\n  'libGL.so.1': 'libgl1',\n  'libGLESv2.so.2': 'libgles2',\n  'libglib-2.0.so.0': 'libglib2.0-0',\n  'libgmodule-2.0.so.0': 'libglib2.0-0',\n  'libgobject-2.0.so.0': 'libglib2.0-0',\n  'libgstapp-1.0.so.0': 'gstreamer1.0-plugins-base',\n  'libgstaudio-1.0.so.0': 'gstreamer1.0-plugins-base',\n  'libgstbase-1.0.so.0': 'libgstreamer1.0-0',\n  'libgstcodecparsers-1.0.so.0': 'gstreamer1.0-plugins-bad',\n  'libgstfft-1.0.so.0': 'gstreamer1.0-plugins-base',\n  'libgstgl-1.0.so.0': 'libgstreamer-gl1.0-0',\n  'libgstpbutils-1.0.so.0': 'gstreamer1.0-plugins-base',\n  'libgstreamer-1.0.so.0': 'libgstreamer1.0-0',\n  'libgsttag-1.0.so.0': 'gstreamer1.0-plugins-base',\n  'libgstvideo-1.0.so.0': 'gstreamer1.0-plugins-base',\n  'libgthread-2.0.so.0': 'libglib2.0-0',\n  'libgtk-3.so.0': 'libgtk-3-0',\n  'libgtk-x11-2.0.so.0': 'libgtk2.0-0',\n  'libharfbuzz-icu.so.0': 'libharfbuzz-icu0',\n  'libharfbuzz.so.0': 'libharfbuzz0b',\n  'libhyphen.so.0': 'libhyphen0',\n  'libicui18n.so.66': 'libicu66',\n  'libicuuc.so.66': 'libicu66',\n  'libjpeg.so.8': 'libjpeg-turbo8',\n  'libnotify.so.4': 'libnotify4',\n  'libnspr4.so': 'libnspr4',\n  'libnss3.so': 'libnss3',\n  'libnssutil3.so': 'libnss3',\n  'libopenjp2.so.7': 'libopenjp2-7',\n  'libopus.so.0': 'libopus0',\n  'libpango-1.0.so.0': 'libpango-1.0-0',\n  'libpangocairo-1.0.so.0': 'libpangocairo-1.0-0',\n  'libpangoft2-1.0.so.0': 'libpangoft2-1.0-0',\n  'libpng16.so.16': 'libpng16-16',\n  'libsecret-1.so.0': 'libsecret-1-0',\n  'libsmime3.so': 'libnss3',\n  'libsoup-2.4.so.1': 'libsoup2.4-1',\n  'libvpx.so.6': 'libvpx6',\n  'libwayland-client.so.0': 'libwayland-client0',\n  'libwayland-egl.so.1': 'libwayland-egl1',\n  'libwayland-server.so.0': 'libwayland-server0',\n  'libwebp.so.6': 'libwebp6',\n  'libwebpdemux.so.2': 'libwebpdemux2',\n  'libwoff2dec.so.1.0.2': 'libwoff1',\n  'libX11-xcb.so.1': 'libx11-xcb1',\n  'libX11.so.6': 'libx11-6',\n  'libxcb-dri3.so.0': 'libxcb-dri3-0',\n  'libxcb-shm.so.0': 'libxcb-shm0',\n  'libxcb.so.1': 'libxcb1',\n  'libXcomposite.so.1': 'libxcomposite1',\n  'libXcursor.so.1': 'libxcursor1',\n  'libXdamage.so.1': 'libxdamage1',\n  'libXext.so.6': 'libxext6',\n  'libXfixes.so.3': 'libxfixes3',\n  'libXi.so.6': 'libxi6',\n  'libxkbcommon.so.0': 'libxkbcommon0',\n  'libxml2.so.2': 'libxml2',\n  'libXrandr.so.2': 'libxrandr2',\n  'libXrender.so.1': 'libxrender1',\n  'libxslt.so.1': 'libxslt1.1',\n  'libXt.so.6': 'libxt6',\n  'libXtst.so.6': 'libxtst6',\n  'libxshmfence.so.1': 'libxshmfence1',\n};\n\nconst LIBRARY_TO_PACKAGE_NAME_UBUNTU_21_04: { [s: string]: string} = {\n  'libasound.so.2': 'libasound2',\n  'libatk-1.0.so.0': 'libatk1.0-0',\n  'libatk-bridge-2.0.so.0': 'libatk-bridge2.0-0',\n  'libatspi.so.0': 'libatspi2.0-0',\n  'libcairo-gobject.so.2': 'libcairo-gobject2',\n  'libcairo.so.2': 'libcairo2',\n  'libcups.so.2': 'libcups2',\n  'libdbus-1.so.3': 'libdbus-1-3',\n  'libdbus-glib-1.so.2': 'libdbus-glib-1-2',\n  'libdrm.so.2': 'libdrm2',\n  'libEGL.so.1': 'libegl1',\n  'libepoxy.so.0': 'libepoxy0',\n  'libfontconfig.so.1': 'libfontconfig1',\n  'libfreetype.so.6': 'libfreetype6',\n  'libgbm.so.1': 'libgbm1',\n  'libgdk_pixbuf-2.0.so.0': 'libgdk-pixbuf-2.0-0',\n  'libgdk-3.so.0': 'libgtk-3-0',\n  'libgdk-x11-2.0.so.0': 'libgtk2.0-0',\n  'libgio-2.0.so.0': 'libglib2.0-0',\n  'libGL.so.1': 'libgl1',\n  'libGLESv2.so.2': 'libgles2',\n  'libglib-2.0.so.0': 'libglib2.0-0',\n  'libgmodule-2.0.so.0': 'libglib2.0-0',\n  'libgobject-2.0.so.0': 'libglib2.0-0',\n  'libgstapp-1.0.so.0': 'libgstreamer-plugins-base1.0-0',\n  'libgstaudio-1.0.so.0': 'libgstreamer-plugins-base1.0-0',\n  'libgstbase-1.0.so.0': 'libgstreamer1.0-0',\n  'libgstcodecparsers-1.0.so.0': 'libgstreamer-plugins-bad1.0-0',\n  'libgstfft-1.0.so.0': 'libgstreamer-plugins-base1.0-0',\n  'libgstgl-1.0.so.0': 'libgstreamer-gl1.0-0',\n  'libgstpbutils-1.0.so.0': 'libgstreamer-plugins-base1.0-0',\n  'libgstreamer-1.0.so.0': 'libgstreamer1.0-0',\n  'libgsttag-1.0.so.0': 'libgstreamer-plugins-base1.0-0',\n  'libgstvideo-1.0.so.0': 'libgstreamer-plugins-base1.0-0',\n  'libgthread-2.0.so.0': 'libglib2.0-0',\n  'libgtk-3.so.0': 'libgtk-3-0',\n  'libgtk-x11-2.0.so.0': 'libgtk2.0-0',\n  'libharfbuzz-icu.so.0': 'libharfbuzz-icu0',\n  'libharfbuzz.so.0': 'libharfbuzz0b',\n  'libhyphen.so.0': 'libhyphen0',\n  'libjavascriptcoregtk-4.0.so.18': 'libjavascriptcoregtk-4.0-18',\n  'libjpeg.so.8': 'libjpeg-turbo8',\n  'liblcms2.so.2': 'liblcms2-2',\n  'libnotify.so.4': 'libnotify4',\n  'libnspr4.so': 'libnspr4',\n  'libnss3.so': 'libnss3',\n  'libnssutil3.so': 'libnss3',\n  'libopenjp2.so.7': 'libopenjp2-7',\n  'libopus.so.0': 'libopus0',\n  'libpango-1.0.so.0': 'libpango-1.0-0',\n  'libpangocairo-1.0.so.0': 'libpangocairo-1.0-0',\n  'libpangoft2-1.0.so.0': 'libpangoft2-1.0-0',\n  'libpng16.so.16': 'libpng16-16',\n  'libsecret-1.so.0': 'libsecret-1-0',\n  'libsmime3.so': 'libnss3',\n  'libsoup-2.4.so.1': 'libsoup2.4-1',\n  'libvpx.so.6': 'libvpx6',\n  'libwayland-client.so.0': 'libwayland-client0',\n  'libwayland-egl.so.1': 'libwayland-egl1',\n  'libwayland-server.so.0': 'libwayland-server0',\n  'libwebkit2gtk-4.0.so.37': 'libwebkit2gtk-4.0-37',\n  'libwebp.so.6': 'libwebp6',\n  'libwebpdemux.so.2': 'libwebpdemux2',\n  'libwoff2dec.so.1.0.2': 'libwoff1',\n  'libwpe-1.0.so.1': 'libwpe-1.0-1',\n  'libWPEBackend-fdo-1.0.so.1': 'libwpebackend-fdo-1.0-1',\n  'libWPEWebKit-1.0.so.3': 'libwpewebkit-1.0-3',\n  'libX11-xcb.so.1': 'libx11-xcb1',\n  'libX11.so.6': 'libx11-6',\n  'libxcb-shm.so.0': 'libxcb-shm0',\n  'libxcb.so.1': 'libxcb1',\n  'libXcomposite.so.1': 'libxcomposite1',\n  'libXcursor.so.1': 'libxcursor1',\n  'libXdamage.so.1': 'libxdamage1',\n  'libXext.so.6': 'libxext6',\n  'libXfixes.so.3': 'libxfixes3',\n  'libXi.so.6': 'libxi6',\n  'libxkbcommon.so.0': 'libxkbcommon0',\n  'libxml2.so.2': 'libxml2',\n  'libXrandr.so.2': 'libxrandr2',\n  'libXrender.so.1': 'libxrender1',\n  'libxshmfence.so.1': 'libxshmfence1',\n  'libxslt.so.1': 'libxslt1.1',\n  'libXt.so.6': 'libxt6',\n};\n\nconst MANUAL_LIBRARY_TO_PACKAGE_NAME_UBUNTU: { [s: string]: string} = {\n  // libgstlibav.so (the only actual library provided by gstreamer1.0-libav) is not\n  // in the ldconfig cache, so we detect the actual library required for playing h.264\n  // and if it's missing recommend installing missing gstreamer lib.\n  // gstreamer1.0-libav -> libavcodec57 -> libx264-152\n  'libx264.so': 'gstreamer1.0-libav',\n};\n"],"file":"dependencies.js"}
\ No newline at end of file
diff --git a/node_modules/playwright/lib/utils/errors.js.map b/node_modules/playwright/lib/utils/errors.js.map
new file mode 100644
index 0000000..1975d62
--- /dev/null
+++ b/node_modules/playwright/lib/utils/errors.js.map
@@ -0,0 +1 @@
+{"version":3,"sources":["../../src/utils/errors.ts"],"names":["CustomError","Error","constructor","message","name","captureStackTrace","TimeoutError","kBrowserClosedError","kBrowserOrContextClosedError","isSafeCloseError","error","endsWith"],"mappings":";;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,MAAMA,WAAN,SAA0BC,KAA1B,CAAgC;AAC9BC,EAAAA,WAAW,CAACC,OAAD,EAAkB;AAC3B,UAAMA,OAAN;AACA,SAAKC,IAAL,GAAY,KAAKF,WAAL,CAAiBE,IAA7B;AACAH,IAAAA,KAAK,CAACI,iBAAN,CAAwB,IAAxB,EAA8B,KAAKH,WAAnC;AACD;;AAL6B;;AAQzB,MAAMI,YAAN,SAA2BN,WAA3B,CAAuC;;;AAEvC,MAAMO,mBAAmB,GAAG,yBAA5B;;AACA,MAAMC,4BAA4B,GAAG,iDAArC;;;AAEA,SAASC,gBAAT,CAA0BC,KAA1B,EAAwC;AAC7C,SAAOA,KAAK,CAACP,OAAN,CAAcQ,QAAd,CAAuBJ,mBAAvB,KAA+CG,KAAK,CAACP,OAAN,CAAcQ,QAAd,CAAuBH,4BAAvB,CAAtD;AACD","sourcesContent":["/**\n * Copyright 2018 Google Inc. All rights reserved.\n * Modifications copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nclass CustomError extends Error {\n  constructor(message: string) {\n    super(message);\n    this.name = this.constructor.name;\n    Error.captureStackTrace(this, this.constructor);\n  }\n}\n\nexport class TimeoutError extends CustomError {}\n\nexport const kBrowserClosedError = 'Browser has been closed';\nexport const kBrowserOrContextClosedError = 'Target page, context or browser has been closed';\n\nexport function isSafeCloseError(error: Error) {\n  return error.message.endsWith(kBrowserClosedError) || error.message.endsWith(kBrowserOrContextClosedError);\n}\n"],"file":"errors.js"}
\ No newline at end of file
diff --git a/node_modules/playwright/lib/utils/eventsHelper.js.map b/node_modules/playwright/lib/utils/eventsHelper.js.map
new file mode 100644
index 0000000..b179002
--- /dev/null
+++ b/node_modules/playwright/lib/utils/eventsHelper.js.map
@@ -0,0 +1 @@
+{"version":3,"sources":["../../src/utils/eventsHelper.ts"],"names":["EventsHelper","addEventListener","emitter","eventName","handler","on","removeEventListeners","listeners","listener","removeListener","splice","length","eventsHelper"],"mappings":";;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAUA,MAAMA,YAAN,CAAmB;AACM,SAAhBC,gBAAgB,CACrBC,OADqB,EAErBC,SAFqB,EAGrBC,OAHqB,EAGkC;AACvDF,IAAAA,OAAO,CAACG,EAAR,CAAWF,SAAX,EAAsBC,OAAtB;AACA,WAAO;AAAEF,MAAAA,OAAF;AAAWC,MAAAA,SAAX;AAAsBC,MAAAA;AAAtB,KAAP;AACD;;AAE0B,SAApBE,oBAAoB,CAACC,SAAD,EAIrB;AACJ,SAAK,MAAMC,QAAX,IAAuBD,SAAvB,EACEC,QAAQ,CAACN,OAAT,CAAiBO,cAAjB,CAAgCD,QAAQ,CAACL,SAAzC,EAAoDK,QAAQ,CAACJ,OAA7D;;AACFG,IAAAA,SAAS,CAACG,MAAV,CAAiB,CAAjB,EAAoBH,SAAS,CAACI,MAA9B;AACD;;AAjBgB;;AAoBZ,MAAMC,YAAY,GAAGZ,YAArB","sourcesContent":["/**\n * Copyright 2017 Google Inc. All rights reserved.\n * Modifications copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { EventEmitter } from 'events';\n\nexport type RegisteredListener = {\n  emitter: EventEmitter;\n  eventName: (string | symbol);\n  handler: (...args: any[]) => void;\n};\n\nclass EventsHelper {\n  static addEventListener(\n    emitter: EventEmitter,\n    eventName: (string | symbol),\n    handler: (...args: any[]) => void): RegisteredListener {\n    emitter.on(eventName, handler);\n    return { emitter, eventName, handler };\n  }\n\n  static removeEventListeners(listeners: Array<{\n      emitter: EventEmitter;\n      eventName: (string | symbol);\n      handler: (...args: any[]) => void;\n    }>) {\n    for (const listener of listeners)\n      listener.emitter.removeListener(listener.eventName, listener.handler);\n    listeners.splice(0, listeners.length);\n  }\n}\n\nexport const eventsHelper = EventsHelper;\n"],"file":"eventsHelper.js"}
\ No newline at end of file
diff --git a/node_modules/playwright/lib/utils/httpServer.js.map b/node_modules/playwright/lib/utils/httpServer.js.map
new file mode 100644
index 0000000..fe77f06
--- /dev/null
+++ b/node_modules/playwright/lib/utils/httpServer.js.map
@@ -0,0 +1 @@
+{"version":3,"sources":["../../src/utils/httpServer.ts"],"names":["HttpServer","constructor","_server","_urlPrefix","_routes","routePrefix","prefix","handler","push","routePath","path","exact","start","port","http","createServer","_onRequest","bind","listen","Promise","cb","once","address","stop","close","urlPrefix","serveFile","response","absoluteFilePath","headers","content","fs","readFileSync","statusCode","contentType","extensionToMime","extname","substring","setHeader","byteLength","name","value","Object","entries","end","e","request","on","url","URL","route","pathname","startsWith"],"mappings":"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","sourcesContent":["/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport * as http from 'http';\nimport fs from 'fs';\nimport path from 'path';\n\nexport type ServerRouteHandler = (request: http.IncomingMessage, response: http.ServerResponse) => boolean;\n\nexport class HttpServer {\n  private _server: http.Server | undefined;\n  private _urlPrefix: string;\n  private _routes: { prefix?: string, exact?: string, handler: ServerRouteHandler }[] = [];\n\n  constructor() {\n    this._urlPrefix = '';\n  }\n\n  routePrefix(prefix: string, handler: ServerRouteHandler) {\n    this._routes.push({ prefix, handler });\n  }\n\n  routePath(path: string, handler: ServerRouteHandler) {\n    this._routes.push({ exact: path, handler });\n  }\n\n  async start(port?: number): Promise<string> {\n    this._server = http.createServer(this._onRequest.bind(this));\n    this._server.listen(port);\n    await new Promise(cb => this._server!.once('listening', cb));\n    const address = this._server.address();\n    this._urlPrefix = typeof address === 'string' ? address : `http://127.0.0.1:${address.port}`;\n    return this._urlPrefix;\n  }\n\n  async stop() {\n    await new Promise(cb => this._server!.close(cb));\n  }\n\n  urlPrefix() {\n    return this._urlPrefix;\n  }\n\n  serveFile(response: http.ServerResponse, absoluteFilePath: string, headers?: { [name: string]: string }): boolean {\n    try {\n      const content = fs.readFileSync(absoluteFilePath);\n      response.statusCode = 200;\n      const contentType = extensionToMime[path.extname(absoluteFilePath).substring(1)] || 'application/octet-stream';\n      response.setHeader('Content-Type', contentType);\n      response.setHeader('Content-Length', content.byteLength);\n      for (const [name, value] of Object.entries(headers || {}))\n        response.setHeader(name, value);\n      response.end(content);\n      return true;\n    } catch (e) {\n      return false;\n    }\n  }\n\n  private _onRequest(request: http.IncomingMessage, response: http.ServerResponse) {\n    request.on('error', () => response.end());\n    try {\n      if (!request.url) {\n        response.end();\n        return;\n      }\n      const url = new URL('http://localhost' + request.url);\n      for (const route of this._routes) {\n        if (route.exact && url.pathname === route.exact && route.handler(request, response))\n          return;\n        if (route.prefix && url.pathname.startsWith(route.prefix) && route.handler(request, response))\n          return;\n      }\n      response.statusCode = 404;\n      response.end();\n    } catch (e) {\n      response.end();\n    }\n  }\n}\n\nconst extensionToMime: { [key: string]: string } = {\n  'css': 'text/css',\n  'html': 'text/html',\n  'jpeg': 'image/jpeg',\n  'jpg': 'image/jpeg',\n  'js': 'application/javascript',\n  'png': 'image/png',\n  'ttf': 'font/ttf',\n  'svg': 'image/svg+xml',\n  'webp': 'image/webp',\n  'woff': 'font/woff',\n  'woff2': 'font/woff2',\n};\n"],"file":"httpServer.js"}
\ No newline at end of file
diff --git a/node_modules/playwright/lib/utils/processLauncher.js.map b/node_modules/playwright/lib/utils/processLauncher.js.map
new file mode 100644
index 0000000..69eccce
--- /dev/null
+++ b/node_modules/playwright/lib/utils/processLauncher.js.map
@@ -0,0 +1 @@
+{"version":3,"sources":["../../src/utils/processLauncher.ts"],"names":["gracefullyCloseSet","Set","gracefullyCloseAll","Promise","all","Array","from","map","gracefullyClose","catch","e","maxListeners","process","getMaxListeners","setMaxListeners","Math","max","launchProcess","options","stdio","log","command","args","join","spawnOptions","detached","platform","env","cwd","shell","spawnedProcess","childProcess","spawn","cleanup","pid","errors","tempDirectories","i","length","on","failed","failedPromise","f","r","once","error","Error","then","reject","stdout","readline","createInterface","input","data","stderr","processClosed","fulfillClose","waitForClose","fulfillCleanup","waitForCleanup","exitCode","signal","eventsHelper","removeEventListeners","listeners","delete","onExit","addEventListener","killProcess","handleSIGINT","push","setTimeout","exit","handleSIGTERM","handleSIGHUP","add","gracefullyClosing","attemptToGracefullyClose","killed","execSync","toString","kill","killAndWait","launchedProcess","envArrayToObject","result","name","value"],"mappings":"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","sourcesContent":["/**\n * Copyright 2017 Google Inc. All rights reserved.\n * Modifications copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport * as childProcess from 'child_process';\nimport * as readline from 'readline';\nimport { eventsHelper } from './eventsHelper';\nimport { isUnderTest, removeFolders } from './utils';\n\nexport type Env = {[key: string]: string | number | boolean | undefined};\n\nexport type LaunchProcessOptions = {\n  command: string,\n  args?: string[],\n  env?: Env,\n  shell?: boolean,\n\n  handleSIGINT?: boolean,\n  handleSIGTERM?: boolean,\n  handleSIGHUP?: boolean,\n  stdio: 'pipe' | 'stdin',\n  tempDirectories: string[],\n\n  cwd?: string,\n\n  // Note: attemptToGracefullyClose should reject if it does not close the browser.\n  attemptToGracefullyClose: () => Promise<any>,\n  onExit: (exitCode: number | null, signal: string | null) => void,\n  log: (message: string) => void,\n};\n\ntype LaunchResult = {\n  launchedProcess: childProcess.ChildProcess,\n  gracefullyClose: () => Promise<void>,\n  kill: () => Promise<void>,\n};\n\nconst gracefullyCloseSet = new Set<() => Promise<void>>();\n\nexport async function gracefullyCloseAll() {\n  await Promise.all(Array.from(gracefullyCloseSet).map(gracefullyClose => gracefullyClose().catch(e => {})));\n}\n\n// We currently spawn a process per page when recording video in Chromium.\n//  This triggers \"too many listeners\" on the process object once you have more than 10 pages open.\nconst maxListeners = process.getMaxListeners();\nif (maxListeners !== 0)\n  process.setMaxListeners(Math.max(maxListeners || 0, 100));\n\nexport async function launchProcess(options: LaunchProcessOptions): Promise<LaunchResult> {\n  const stdio: ('ignore' | 'pipe')[] = options.stdio === 'pipe' ? ['ignore', 'pipe', 'pipe', 'pipe', 'pipe'] : ['pipe', 'pipe', 'pipe'];\n  options.log(`<launching> ${options.command} ${options.args ? options.args.join(' ') : ''}`);\n  const spawnOptions: childProcess.SpawnOptions = {\n    // On non-windows platforms, `detached: true` makes child process a leader of a new\n    // process group, making it possible to kill child process tree with `.kill(-pid)` command.\n    // @see https://nodejs.org/api/child_process.html#child_process_options_detached\n    detached: process.platform !== 'win32',\n    env: (options.env as {[key: string]: string}),\n    cwd: options.cwd,\n    shell: options.shell,\n    stdio,\n  };\n  const spawnedProcess = childProcess.spawn(options.command, options.args, spawnOptions);\n\n  const cleanup = async () => {\n    options.log(`[pid=${spawnedProcess.pid || 'N/A'}] starting temporary directories cleanup`);\n    const errors = await removeFolders(options.tempDirectories);\n    for (let i = 0; i < options.tempDirectories.length; ++i) {\n      if (errors[i])\n        options.log(`[pid=${spawnedProcess.pid || 'N/A'}] exception while removing ${options.tempDirectories[i]}: ${errors[i]}`);\n    }\n    options.log(`[pid=${spawnedProcess.pid || 'N/A'}] finished temporary directories cleanup`);\n  };\n\n  // Prevent Unhandled 'error' event.\n  spawnedProcess.on('error', () => {});\n\n  if (!spawnedProcess.pid) {\n    let failed: (e: Error) => void;\n    const failedPromise = new Promise<Error>((f, r) => failed = f);\n    spawnedProcess.once('error', error => {\n      failed(new Error('Failed to launch: ' + error));\n    });\n    return cleanup().then(() => failedPromise).then(e => Promise.reject(e));\n  }\n  options.log(`<launched> pid=${spawnedProcess.pid}`);\n\n  const stdout = readline.createInterface({ input: spawnedProcess.stdout });\n  stdout.on('line', (data: string) => {\n    options.log(`[pid=${spawnedProcess.pid}][out] ` + data);\n  });\n\n  const stderr = readline.createInterface({ input: spawnedProcess.stderr });\n  stderr.on('line', (data: string) => {\n    options.log(`[pid=${spawnedProcess.pid}][err] ` + data);\n  });\n\n  let processClosed = false;\n  let fulfillClose = () => {};\n  const waitForClose = new Promise<void>(f => fulfillClose = f);\n  let fulfillCleanup = () => {};\n  const waitForCleanup = new Promise<void>(f => fulfillCleanup = f);\n  spawnedProcess.once('exit', (exitCode, signal) => {\n    options.log(`[pid=${spawnedProcess.pid}] <process did exit: exitCode=${exitCode}, signal=${signal}>`);\n    processClosed = true;\n    eventsHelper.removeEventListeners(listeners);\n    gracefullyCloseSet.delete(gracefullyClose);\n    options.onExit(exitCode, signal);\n    fulfillClose();\n    // Cleanup as process exits.\n    cleanup().then(fulfillCleanup);\n  });\n\n  const listeners = [ eventsHelper.addEventListener(process, 'exit', killProcess) ];\n  if (options.handleSIGINT) {\n    listeners.push(eventsHelper.addEventListener(process, 'SIGINT', () => {\n      gracefullyClose().then(() => {\n        // Give tests a chance to dispatch any async calls.\n        if (isUnderTest())\n          setTimeout(() => process.exit(130), 0);\n        else\n          process.exit(130);\n      });\n    }));\n  }\n  if (options.handleSIGTERM)\n    listeners.push(eventsHelper.addEventListener(process, 'SIGTERM', gracefullyClose));\n  if (options.handleSIGHUP)\n    listeners.push(eventsHelper.addEventListener(process, 'SIGHUP', gracefullyClose));\n  gracefullyCloseSet.add(gracefullyClose);\n\n  let gracefullyClosing = false;\n  async function gracefullyClose(): Promise<void> {\n    gracefullyCloseSet.delete(gracefullyClose);\n    // We keep listeners until we are done, to handle 'exit' and 'SIGINT' while\n    // asynchronously closing to prevent zombie processes. This might introduce\n    // reentrancy to this function, for example user sends SIGINT second time.\n    // In this case, let's forcefully kill the process.\n    if (gracefullyClosing) {\n      options.log(`[pid=${spawnedProcess.pid}] <forecefully close>`);\n      killProcess();\n      await waitForClose;  // Ensure the process is dead and we called options.onkill.\n      return;\n    }\n    gracefullyClosing = true;\n    options.log(`[pid=${spawnedProcess.pid}] <gracefully close start>`);\n    await options.attemptToGracefullyClose().catch(() => killProcess());\n    await waitForCleanup;  // Ensure the process is dead and we have cleaned up.\n    options.log(`[pid=${spawnedProcess.pid}] <gracefully close end>`);\n  }\n\n  // This method has to be sync to be used as 'exit' event handler.\n  function killProcess() {\n    options.log(`[pid=${spawnedProcess.pid}] <kill>`);\n    eventsHelper.removeEventListeners(listeners);\n    if (spawnedProcess.pid && !spawnedProcess.killed && !processClosed) {\n      options.log(`[pid=${spawnedProcess.pid}] <will force kill>`);\n      // Force kill the browser.\n      try {\n        if (process.platform === 'win32') {\n          const stdout = childProcess.execSync(`taskkill /pid ${spawnedProcess.pid} /T /F /FI \"MEMUSAGE gt 0\"`);\n          options.log(`[pid=${spawnedProcess.pid}] taskkill output: ${stdout.toString()}`);\n        } else {\n          process.kill(-spawnedProcess.pid, 'SIGKILL');\n        }\n      } catch (e) {\n        options.log(`[pid=${spawnedProcess.pid}] exception while trying to kill process: ${e}`);\n        // the process might have already stopped\n      }\n    } else {\n      options.log(`[pid=${spawnedProcess.pid}] <skipped force kill spawnedProcess.killed=${spawnedProcess.killed} processClosed=${processClosed}>`);\n    }\n    cleanup();\n  }\n\n  function killAndWait() {\n    killProcess();\n    return waitForCleanup;\n  }\n\n  return { launchedProcess: spawnedProcess, gracefullyClose, kill: killAndWait };\n}\n\nexport function envArrayToObject(env: { name: string, value: string }[]): Env {\n  const result: Env = {};\n  for (const { name, value } of env)\n    result[name] = value;\n  return result;\n}\n"],"file":"processLauncher.js"}
\ No newline at end of file
diff --git a/node_modules/playwright/lib/utils/registry.js.map b/node_modules/playwright/lib/utils/registry.js.map
new file mode 100644
index 0000000..f7b48e0
--- /dev/null
+++ b/node_modules/playwright/lib/utils/registry.js.map
@@ -0,0 +1 @@
+{"version":3,"sources":["../../src/utils/registry.ts"],"names":["PACKAGE_PATH","path","join","__dirname","BIN_PATH","EXECUTABLE_PATHS","undefined","DOWNLOAD_URLS","registryDirectory","result","envDefined","cacheDirectory","process","platform","env","XDG_CACHE_HOME","os","homedir","LOCALAPPDATA","Error","isAbsolute","resolve","cwd","isBrowserDirectory","browserDirectory","baseName","basename","browserName","allDownloadable","startsWith","readDescriptors","packagePath","browsersJSON","require","map","obj","name","revisionOverride","revisionOverrides","hostPlatform","revision","browserDirectoryPrefix","descriptor","installByDefault","dir","replace","Registry","constructor","_executables","descriptors","findExecutablePath","tokens","executablePathOrDie","e","prettyMessage","chromium","find","d","chromiumExecutable","push","type","directory","executablePath","installType","validateHostRequirements","_validateHostRequirements","_install","_downloadExecutable","_dependencyGroup","chromiumWithSymbols","chromiumWithSymbolsExecutable","_createChromiumChannel","_installChromiumChannel","_installMSEdgeChannel","firefox","firefoxExecutable","firefoxBeta","firefoxBetaExecutable","webkit","webkitExecutable","webkitLinuxLddDirectories","ffmpeg","ffmpegExecutable","Promise","lookAt","install","shouldThrow","suffix","prefixes","PROGRAMFILES","filter","Boolean","prefix","location","length","installation","executables","findExecutable","b","_addRequirementsAndDedupe","set","Set","executable","add","Array","from","linuxLddDirectories","dlOpenLibraries","windowsExeAndDllDirectories","stdout","write","ubuntuVersion","arch","installDeps","executablesToInstallDeps","targets","executablesToInstall","fs","promises","mkdir","recursive","lockfilePath","releaseLock","lockfile","lock","retries","factor","onCompromised","err","message","linksDir","writeFile","_validateInstallationCache","downloadURLTemplate","downloadHostEnv","downloadHost","downloadURL","util","format","title","downloadFileName","catch","stack","markerFilePath","channel","scripts","scriptArgs","products","JSON","parse","productName","product","Product","searchConfig","darwin","artifact","win32","release","Releases","Platform","Architecture","Artifacts","ArtifactName","Location","scriptName","shell","endsWith","code","stdio","usedBrowserPaths","fileName","readdir","linkPath","linkTarget","readFile","toString","usedBrowserPath","browserRevision","parseInt","shouldHaveMarkerFile","unlink","downloadedBrowsers","file","directories","delete","installDefaultBrowsersForNpmInstall","registry"],"mappings":"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","sourcesContent":["/**\n * Copyright 2017 Google Inc. All rights reserved.\n * Modifications copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport * as os from 'os';\nimport path from 'path';\nimport * as util from 'util';\nimport * as fs from 'fs';\nimport lockfile from 'proper-lockfile';\nimport { getUbuntuVersion } from './ubuntuVersion';\nimport { getFromENV, getAsBooleanFromENV, calculateSha1, removeFolders, existsAsync, hostPlatform, canAccessFile, spawnAsync, fetchData, wrapInASCIIBox } from './utils';\nimport { DependencyGroup, installDependenciesLinux, installDependenciesWindows, validateDependenciesLinux, validateDependenciesWindows } from './dependencies';\nimport { downloadBrowserWithProgressBar, logPolitely } from './browserFetcher';\n\nconst PACKAGE_PATH = path.join(__dirname, '..', '..');\nconst BIN_PATH = path.join(__dirname, '..', '..', 'bin');\n\nconst EXECUTABLE_PATHS = {\n  'chromium': {\n    'ubuntu18.04': ['chrome-linux', 'chrome'],\n    'ubuntu20.04': ['chrome-linux', 'chrome'],\n    'mac10.13': ['chrome-mac', 'Chromium.app', 'Contents', 'MacOS', 'Chromium'],\n    'mac10.14': ['chrome-mac', 'Chromium.app', 'Contents', 'MacOS', 'Chromium'],\n    'mac10.15': ['chrome-mac', 'Chromium.app', 'Contents', 'MacOS', 'Chromium'],\n    'mac11': ['chrome-mac', 'Chromium.app', 'Contents', 'MacOS', 'Chromium'],\n    'mac11-arm64': ['chrome-mac', 'Chromium.app', 'Contents', 'MacOS', 'Chromium'],\n    'win32': ['chrome-win', 'chrome.exe'],\n    'win64': ['chrome-win', 'chrome.exe'],\n  },\n  'firefox': {\n    'ubuntu18.04': ['firefox', 'firefox'],\n    'ubuntu20.04': ['firefox', 'firefox'],\n    'mac10.13': ['firefox', 'Nightly.app', 'Contents', 'MacOS', 'firefox'],\n    'mac10.14': ['firefox', 'Nightly.app', 'Contents', 'MacOS', 'firefox'],\n    'mac10.15': ['firefox', 'Nightly.app', 'Contents', 'MacOS', 'firefox'],\n    'mac11': ['firefox', 'Nightly.app', 'Contents', 'MacOS', 'firefox'],\n    'mac11-arm64': ['firefox', 'Nightly.app', 'Contents', 'MacOS', 'firefox'],\n    'win32': ['firefox', 'firefox.exe'],\n    'win64': ['firefox', 'firefox.exe'],\n  },\n  'webkit': {\n    'ubuntu18.04': ['pw_run.sh'],\n    'ubuntu20.04': ['pw_run.sh'],\n    'mac10.13': undefined,\n    'mac10.14': ['pw_run.sh'],\n    'mac10.15': ['pw_run.sh'],\n    'mac11': ['pw_run.sh'],\n    'mac11-arm64': ['pw_run.sh'],\n    'win32': ['Playwright.exe'],\n    'win64': ['Playwright.exe'],\n  },\n  'ffmpeg': {\n    'ubuntu18.04': ['ffmpeg-linux'],\n    'ubuntu20.04': ['ffmpeg-linux'],\n    'mac10.13': ['ffmpeg-mac'],\n    'mac10.14': ['ffmpeg-mac'],\n    'mac10.15': ['ffmpeg-mac'],\n    'mac11': ['ffmpeg-mac'],\n    'mac11-arm64': ['ffmpeg-mac'],\n    'win32': ['ffmpeg-win32.exe'],\n    'win64': ['ffmpeg-win64.exe'],\n  },\n};\n\nconst DOWNLOAD_URLS = {\n  'chromium': {\n    'ubuntu18.04': '%s/builds/chromium/%s/chromium-linux.zip',\n    'ubuntu20.04': '%s/builds/chromium/%s/chromium-linux.zip',\n    'mac10.13': '%s/builds/chromium/%s/chromium-mac.zip',\n    'mac10.14': '%s/builds/chromium/%s/chromium-mac.zip',\n    'mac10.15': '%s/builds/chromium/%s/chromium-mac.zip',\n    'mac11': '%s/builds/chromium/%s/chromium-mac.zip',\n    'mac11-arm64': '%s/builds/chromium/%s/chromium-mac-arm64.zip',\n    'win32': '%s/builds/chromium/%s/chromium-win32.zip',\n    'win64': '%s/builds/chromium/%s/chromium-win64.zip',\n  },\n  'chromium-with-symbols': {\n    'ubuntu18.04': '%s/builds/chromium/%s/chromium-with-symbols-linux.zip',\n    'ubuntu20.04': '%s/builds/chromium/%s/chromium-with-symbols-linux.zip',\n    'mac10.13': '%s/builds/chromium/%s/chromium-with-symbols-mac.zip',\n    'mac10.14': '%s/builds/chromium/%s/chromium-with-symbols-mac.zip',\n    'mac10.15': '%s/builds/chromium/%s/chromium-with-symbols-mac.zip',\n    'mac11': '%s/builds/chromium/%s/chromium-with-symbols-mac.zip',\n    'mac11-arm64': '%s/builds/chromium/%s/chromium-with-symbols-mac-arm64.zip',\n    'win32': '%s/builds/chromium/%s/chromium-with-symbols-win32.zip',\n    'win64': '%s/builds/chromium/%s/chromium-with-symbols-win64.zip',\n  },\n  'firefox': {\n    'ubuntu18.04': '%s/builds/firefox/%s/firefox-ubuntu-18.04.zip',\n    'ubuntu20.04': '%s/builds/firefox/%s/firefox-ubuntu-20.04.zip',\n    'mac10.13': '%s/builds/firefox/%s/firefox-mac-10.14.zip',\n    'mac10.14': '%s/builds/firefox/%s/firefox-mac-10.14.zip',\n    'mac10.15': '%s/builds/firefox/%s/firefox-mac-10.14.zip',\n    'mac11': '%s/builds/firefox/%s/firefox-mac-10.14.zip',\n    'mac11-arm64': '%s/builds/firefox/%s/firefox-mac-11.0-arm64.zip',\n    'win32': '%s/builds/firefox/%s/firefox-win32.zip',\n    'win64': '%s/builds/firefox/%s/firefox-win64.zip',\n  },\n  'firefox-beta': {\n    'ubuntu18.04': '%s/builds/firefox-beta/%s/firefox-beta-ubuntu-18.04.zip',\n    'ubuntu20.04': '%s/builds/firefox-beta/%s/firefox-beta-ubuntu-20.04.zip',\n    'mac10.13': '%s/builds/firefox-beta/%s/firefox-beta-mac-10.14.zip',\n    'mac10.14': '%s/builds/firefox-beta/%s/firefox-beta-mac-10.14.zip',\n    'mac10.15': '%s/builds/firefox-beta/%s/firefox-beta-mac-10.14.zip',\n    'mac11': '%s/builds/firefox-beta/%s/firefox-beta-mac-10.14.zip',\n    'mac11-arm64': '%s/builds/firefox-beta/%s/firefox-beta-mac-11.0-arm64.zip',\n    'win32': '%s/builds/firefox-beta/%s/firefox-beta-win32.zip',\n    'win64': '%s/builds/firefox-beta/%s/firefox-beta-win64.zip',\n  },\n  'webkit': {\n    'ubuntu18.04': '%s/builds/webkit/%s/webkit-ubuntu-18.04.zip',\n    'ubuntu20.04': '%s/builds/webkit/%s/webkit-ubuntu-20.04.zip',\n    'mac10.13': undefined,\n    'mac10.14': '%s/builds/deprecated-webkit-mac-10.14/%s/deprecated-webkit-mac-10.14.zip',\n    'mac10.15': '%s/builds/webkit/%s/webkit-mac-10.15.zip',\n    'mac11': '%s/builds/webkit/%s/webkit-mac-10.15.zip',\n    'mac11-arm64': '%s/builds/webkit/%s/webkit-mac-11.0-arm64.zip',\n    'win32': '%s/builds/webkit/%s/webkit-win64.zip',\n    'win64': '%s/builds/webkit/%s/webkit-win64.zip',\n  },\n  'ffmpeg': {\n    'ubuntu18.04': '%s/builds/ffmpeg/%s/ffmpeg-linux.zip',\n    'ubuntu20.04': '%s/builds/ffmpeg/%s/ffmpeg-linux.zip',\n    'mac10.13': '%s/builds/ffmpeg/%s/ffmpeg-mac.zip',\n    'mac10.14': '%s/builds/ffmpeg/%s/ffmpeg-mac.zip',\n    'mac10.15': '%s/builds/ffmpeg/%s/ffmpeg-mac.zip',\n    'mac11': '%s/builds/ffmpeg/%s/ffmpeg-mac.zip',\n    'mac11-arm64': '%s/builds/ffmpeg/%s/ffmpeg-mac.zip',\n    'win32': '%s/builds/ffmpeg/%s/ffmpeg-win32.zip',\n    'win64': '%s/builds/ffmpeg/%s/ffmpeg-win64.zip',\n  },\n};\n\nexport const registryDirectory = (() => {\n  let result: string;\n\n  const envDefined = getFromENV('PLAYWRIGHT_BROWSERS_PATH');\n  if (envDefined === '0') {\n    result = path.join(__dirname, '..', '..', '.local-browsers');\n  } else if (envDefined) {\n    result = envDefined;\n  } else {\n    let cacheDirectory: string;\n    if (process.platform === 'linux')\n      cacheDirectory = process.env.XDG_CACHE_HOME || path.join(os.homedir(), '.cache');\n    else if (process.platform === 'darwin')\n      cacheDirectory = path.join(os.homedir(), 'Library', 'Caches');\n    else if (process.platform === 'win32')\n      cacheDirectory = process.env.LOCALAPPDATA || path.join(os.homedir(), 'AppData', 'Local');\n    else\n      throw new Error('Unsupported platform: ' + process.platform);\n    result = path.join(cacheDirectory, 'ms-playwright');\n  }\n\n  if (!path.isAbsolute(result)) {\n    // It is important to resolve to the absolute path:\n    //   - for unzipping to work correctly;\n    //   - so that registry directory matches between installation and execution.\n    // INIT_CWD points to the root of `npm/yarn install` and is probably what\n    // the user meant when typing the relative path.\n    result = path.resolve(getFromENV('INIT_CWD') || process.cwd(), result);\n  }\n  return result;\n})();\n\nfunction isBrowserDirectory(browserDirectory: string): boolean {\n  const baseName = path.basename(browserDirectory);\n  for (const browserName of allDownloadable) {\n    if (baseName.startsWith(browserName + '-'))\n      return true;\n  }\n  return false;\n}\n\ntype BrowsersJSONDescriptor = {\n  name: string,\n  revision: string,\n  installByDefault: boolean,\n  dir: string,\n};\n\nfunction readDescriptors(packagePath: string) {\n  const browsersJSON = require(path.join(packagePath, 'browsers.json'));\n  return (browsersJSON['browsers'] as any[]).map(obj => {\n    const name = obj.name;\n    const revisionOverride = (obj.revisionOverrides || {})[hostPlatform];\n    const revision = revisionOverride || obj.revision;\n    const browserDirectoryPrefix = revisionOverride ? `${name}_${hostPlatform}_special` : `${name}`;\n    const descriptor: BrowsersJSONDescriptor = {\n      name,\n      revision,\n      installByDefault: !!obj.installByDefault,\n      // Method `isBrowserDirectory` determines directory to be browser iff\n      // it starts with some browser name followed by '-'. Some browser names\n      // are prefixes of others, e.g. 'webkit' is a prefix of `webkit-technology-preview`.\n      // To avoid older registries erroneously removing 'webkit-technology-preview', we have to\n      // ensure that browser folders to never include dashes inside.\n      dir: path.join(registryDirectory, browserDirectoryPrefix.replace(/-/g, '_') + '-' + revision),\n    };\n    return descriptor;\n  });\n}\n\nexport type BrowserName = 'chromium' | 'firefox' | 'webkit';\ntype InternalTool = 'ffmpeg' | 'firefox-beta' | 'chromium-with-symbols';\ntype ChromiumChannel = 'chrome' | 'chrome-beta' | 'chrome-dev' | 'chrome-canary' | 'msedge' | 'msedge-beta' | 'msedge-dev' | 'msedge-canary';\nconst allDownloadable = ['chromium', 'firefox', 'webkit', 'ffmpeg', 'firefox-beta', 'chromium-with-symbols'];\n\nexport interface Executable {\n  type: 'browser' | 'tool' | 'channel';\n  name: BrowserName | InternalTool | ChromiumChannel;\n  browserName: BrowserName | undefined;\n  installType: 'download-by-default' | 'download-on-demand' | 'install-script' | 'none';\n  directory: string | undefined;\n  executablePathOrDie(): string;\n  executablePath(): string | undefined;\n  validateHostRequirements(): Promise<void>;\n}\n\ninterface ExecutableImpl extends Executable {\n  _install?: () => Promise<void>;\n  _dependencyGroup?: DependencyGroup;\n}\n\nexport class Registry {\n  private _executables: ExecutableImpl[];\n\n  constructor(packagePath: string) {\n    const descriptors = readDescriptors(packagePath);\n    const findExecutablePath = (dir: string, name: keyof typeof EXECUTABLE_PATHS) => {\n      const tokens = EXECUTABLE_PATHS[name][hostPlatform];\n      return tokens ? path.join(dir, ...tokens) : undefined;\n    };\n    const executablePathOrDie = (name: string, e: string | undefined, installByDefault: boolean) => {\n      if (!e)\n        throw new Error(`${name} is not supported on ${hostPlatform}`);\n      // TODO: language-specific error message\n      if (!canAccessFile(e)) {\n        const prettyMessage = [\n          `Looks like Playwright Test or Playwright was just installed or updated.`,\n          `Please run the following command to download new browser${installByDefault ? 's' : ''}:`,\n          ``,\n          `    npx playwright install${installByDefault ? '' : ' ' + name}`,\n          ``,\n          `<3 Playwright Team`,\n        ].join('\\n');\n        throw new Error(`Executable doesn't exist at ${e}\\n${wrapInASCIIBox(prettyMessage, 1)}`);\n      }\n      return e;\n    };\n    this._executables = [];\n\n    const chromium = descriptors.find(d => d.name === 'chromium')!;\n    const chromiumExecutable = findExecutablePath(chromium.dir, 'chromium');\n    this._executables.push({\n      type: 'browser',\n      name: 'chromium',\n      browserName: 'chromium',\n      directory: chromium.dir,\n      executablePath: () => chromiumExecutable,\n      executablePathOrDie: () => executablePathOrDie('chromium', chromiumExecutable, chromium.installByDefault),\n      installType: chromium.installByDefault ? 'download-by-default' : 'download-on-demand',\n      validateHostRequirements: () => this._validateHostRequirements('chromium', chromium.dir, ['chrome-linux'], [], ['chrome-win']),\n      _install: () => this._downloadExecutable(chromium, chromiumExecutable, DOWNLOAD_URLS['chromium'][hostPlatform], 'PLAYWRIGHT_CHROMIUM_DOWNLOAD_HOST'),\n      _dependencyGroup: 'chromium',\n    });\n\n    const chromiumWithSymbols = descriptors.find(d => d.name === 'chromium-with-symbols')!;\n    const chromiumWithSymbolsExecutable = findExecutablePath(chromiumWithSymbols.dir, 'chromium');\n    this._executables.push({\n      type: 'tool',\n      name: 'chromium-with-symbols',\n      browserName: 'chromium',\n      directory: chromiumWithSymbols.dir,\n      executablePath: () => chromiumWithSymbolsExecutable,\n      executablePathOrDie: () => executablePathOrDie('chromium-with-symbols', chromiumWithSymbolsExecutable, chromiumWithSymbols.installByDefault),\n      installType: chromiumWithSymbols.installByDefault ? 'download-by-default' : 'download-on-demand',\n      validateHostRequirements: () => this._validateHostRequirements('chromium', chromiumWithSymbols.dir, ['chrome-linux'], [], ['chrome-win']),\n      _install: () => this._downloadExecutable(chromiumWithSymbols, chromiumWithSymbolsExecutable, DOWNLOAD_URLS['chromium-with-symbols'][hostPlatform], 'PLAYWRIGHT_CHROMIUM_DOWNLOAD_HOST'),\n      _dependencyGroup: 'chromium',\n    });\n\n    this._executables.push(this._createChromiumChannel('chrome', {\n      'linux': '/opt/google/chrome/chrome',\n      'darwin': '/Applications/Google Chrome.app/Contents/MacOS/Google Chrome',\n      'win32': `\\\\Google\\\\Chrome\\\\Application\\\\chrome.exe`,\n    }, () => this._installChromiumChannel('chrome', {\n      'linux': 'reinstall_chrome_stable_linux.sh',\n      'darwin': 'reinstall_chrome_stable_mac.sh',\n      'win32': 'reinstall_chrome_stable_win.ps1',\n    })));\n\n    this._executables.push(this._createChromiumChannel('chrome-beta', {\n      'linux': '/opt/google/chrome-beta/chrome',\n      'darwin': '/Applications/Google Chrome Beta.app/Contents/MacOS/Google Chrome Beta',\n      'win32': `\\\\Google\\\\Chrome Beta\\\\Application\\\\chrome.exe`,\n    }, () => this._installChromiumChannel('chrome-beta', {\n      'linux': 'reinstall_chrome_beta_linux.sh',\n      'darwin': 'reinstall_chrome_beta_mac.sh',\n      'win32': 'reinstall_chrome_beta_win.ps1',\n    })));\n\n    this._executables.push(this._createChromiumChannel('chrome-dev', {\n      'linux': '/opt/google/chrome-unstable/chrome',\n      'darwin': '/Applications/Google Chrome Dev.app/Contents/MacOS/Google Chrome Dev',\n      'win32': `\\\\Google\\\\Chrome Dev\\\\Application\\\\chrome.exe`,\n    }));\n\n    this._executables.push(this._createChromiumChannel('chrome-canary', {\n      'linux': '',\n      'darwin': '/Applications/Google Chrome Canary.app/Contents/MacOS/Google Chrome Canary',\n      'win32': `\\\\Google\\\\Chrome SxS\\\\Application\\\\chrome.exe`,\n    }));\n\n    this._executables.push(this._createChromiumChannel('msedge', {\n      'linux': '',\n      'darwin': '/Applications/Microsoft Edge.app/Contents/MacOS/Microsoft Edge',\n      'win32': `\\\\Microsoft\\\\Edge\\\\Application\\\\msedge.exe`,\n    }, () => this._installMSEdgeChannel('msedge', {\n      'linux': '',\n      'darwin': 'reinstall_msedge_stable_mac.sh',\n      'win32': 'reinstall_msedge_stable_win.ps1',\n    })));\n\n    this._executables.push(this._createChromiumChannel('msedge-beta', {\n      'linux': '/opt/microsoft/msedge-beta/msedge',\n      'darwin': '/Applications/Microsoft Edge Beta.app/Contents/MacOS/Microsoft Edge Beta',\n      'win32': `\\\\Microsoft\\\\Edge Beta\\\\Application\\\\msedge.exe`,\n    }, () => this._installMSEdgeChannel('msedge-beta', {\n      'darwin': 'reinstall_msedge_beta_mac.sh',\n      'linux': 'reinstall_msedge_beta_linux.sh',\n      'win32': 'reinstall_msedge_beta_win.ps1',\n    })));\n\n    this._executables.push(this._createChromiumChannel('msedge-dev', {\n      'linux': '/opt/microsoft/msedge-dev/msedge',\n      'darwin': '/Applications/Microsoft Edge Dev.app/Contents/MacOS/Microsoft Edge Dev',\n      'win32': `\\\\Microsoft\\\\Edge Dev\\\\Application\\\\msedge.exe`,\n    }, () => this._installMSEdgeChannel('msedge-dev', {\n      'darwin': 'reinstall_msedge_dev_mac.sh',\n      'linux': 'reinstall_msedge_dev_linux.sh',\n      'win32': 'reinstall_msedge_dev_win.ps1',\n    })));\n\n    this._executables.push(this._createChromiumChannel('msedge-canary', {\n      'linux': '',\n      'darwin': '/Applications/Microsoft Edge Canary.app/Contents/MacOS/Microsoft Edge Canary',\n      'win32': `\\\\Microsoft\\\\Edge SxS\\\\Application\\\\msedge.exe`,\n    }));\n\n    const firefox = descriptors.find(d => d.name === 'firefox')!;\n    const firefoxExecutable = findExecutablePath(firefox.dir, 'firefox');\n    this._executables.push({\n      type: 'browser',\n      name: 'firefox',\n      browserName: 'firefox',\n      directory: firefox.dir,\n      executablePath: () => firefoxExecutable,\n      executablePathOrDie: () => executablePathOrDie('firefox', firefoxExecutable, firefox.installByDefault),\n      installType: firefox.installByDefault ? 'download-by-default' : 'download-on-demand',\n      validateHostRequirements: () => this._validateHostRequirements('firefox', firefox.dir, ['firefox'], [], ['firefox']),\n      _install: () => this._downloadExecutable(firefox, firefoxExecutable, DOWNLOAD_URLS['firefox'][hostPlatform], 'PLAYWRIGHT_FIREFOX_DOWNLOAD_HOST'),\n      _dependencyGroup: 'firefox',\n    });\n\n    const firefoxBeta = descriptors.find(d => d.name === 'firefox-beta')!;\n    const firefoxBetaExecutable = findExecutablePath(firefoxBeta.dir, 'firefox');\n    this._executables.push({\n      type: 'tool',\n      name: 'firefox-beta',\n      browserName: 'firefox',\n      directory: firefoxBeta.dir,\n      executablePath: () => firefoxBetaExecutable,\n      executablePathOrDie: () => executablePathOrDie('firefox-beta', firefoxBetaExecutable, firefoxBeta.installByDefault),\n      installType: firefoxBeta.installByDefault ? 'download-by-default' : 'download-on-demand',\n      validateHostRequirements: () => this._validateHostRequirements('firefox', firefoxBeta.dir, ['firefox'], [], ['firefox']),\n      _install: () => this._downloadExecutable(firefoxBeta, firefoxBetaExecutable, DOWNLOAD_URLS['firefox-beta'][hostPlatform], 'PLAYWRIGHT_FIREFOX_DOWNLOAD_HOST'),\n      _dependencyGroup: 'firefox',\n    });\n\n    const webkit = descriptors.find(d => d.name === 'webkit')!;\n    const webkitExecutable = findExecutablePath(webkit.dir, 'webkit');\n    const webkitLinuxLddDirectories = [\n      path.join('minibrowser-gtk'),\n      path.join('minibrowser-gtk', 'bin'),\n      path.join('minibrowser-gtk', 'lib'),\n      path.join('minibrowser-wpe'),\n      path.join('minibrowser-wpe', 'bin'),\n      path.join('minibrowser-wpe', 'lib'),\n    ];\n    this._executables.push({\n      type: 'browser',\n      name: 'webkit',\n      browserName: 'webkit',\n      directory: webkit.dir,\n      executablePath: () => webkitExecutable,\n      executablePathOrDie: () => executablePathOrDie('webkit', webkitExecutable, webkit.installByDefault),\n      installType: webkit.installByDefault ? 'download-by-default' : 'download-on-demand',\n      validateHostRequirements: () => this._validateHostRequirements('webkit', webkit.dir, webkitLinuxLddDirectories, ['libGLESv2.so.2', 'libx264.so'], ['']),\n      _install: () => this._downloadExecutable(webkit, webkitExecutable, DOWNLOAD_URLS['webkit'][hostPlatform], 'PLAYWRIGHT_WEBKIT_DOWNLOAD_HOST'),\n      _dependencyGroup: 'webkit',\n    });\n\n    const ffmpeg = descriptors.find(d => d.name === 'ffmpeg')!;\n    const ffmpegExecutable = findExecutablePath(ffmpeg.dir, 'ffmpeg');\n    this._executables.push({\n      type: 'tool',\n      name: 'ffmpeg',\n      browserName: undefined,\n      directory: ffmpeg.dir,\n      executablePath: () => ffmpegExecutable,\n      executablePathOrDie: () => executablePathOrDie('ffmpeg', ffmpegExecutable, ffmpeg.installByDefault),\n      installType: ffmpeg.installByDefault ? 'download-by-default' : 'download-on-demand',\n      validateHostRequirements: () => Promise.resolve(),\n      _install: () => this._downloadExecutable(ffmpeg, ffmpegExecutable, DOWNLOAD_URLS['ffmpeg'][hostPlatform], 'PLAYWRIGHT_FFMPEG_DOWNLOAD_HOST'),\n      _dependencyGroup: 'tools',\n    });\n  }\n\n  private _createChromiumChannel(name: ChromiumChannel, lookAt: Record<'linux' | 'darwin' | 'win32', string>, install?: () => Promise<void>): ExecutableImpl {\n    const executablePath = (shouldThrow: boolean) => {\n      const suffix = lookAt[process.platform as 'linux' | 'darwin' | 'win32'];\n      if (!suffix) {\n        if (shouldThrow)\n          throw new Error(`Chromium distribution '${name}' is not supported on ${process.platform}`);\n        return undefined;\n      }\n      const prefixes = (process.platform === 'win32' ? [\n        process.env.LOCALAPPDATA, process.env.PROGRAMFILES, process.env['PROGRAMFILES(X86)']\n      ].filter(Boolean) : ['']) as string[];\n\n      for (const prefix of prefixes) {\n        const executablePath = path.join(prefix, suffix);\n        if (canAccessFile(executablePath))\n          return executablePath;\n      }\n      if (!shouldThrow)\n        return undefined;\n\n      const location = prefixes.length ? ` at ${path.join(prefixes[0], suffix)}` : ``;\n      // TODO: language-specific error message\n      const installation = install ? `\\nRun \"npx playwright install ${name}\"` : '';\n      throw new Error(`Chromium distribution '${name}' is not found${location}${installation}`);\n    };\n    return {\n      type: 'channel',\n      name,\n      browserName: 'chromium',\n      directory: undefined,\n      executablePath: () => executablePath(false),\n      executablePathOrDie: () => executablePath(true)!,\n      installType: install ? 'install-script' : 'none',\n      validateHostRequirements: () => Promise.resolve(),\n      _install: install,\n    };\n  }\n\n  executables(): Executable[] {\n    return this._executables;\n  }\n\n  findExecutable(name: BrowserName): Executable;\n  findExecutable(name: string): Executable | undefined;\n  findExecutable(name: string): Executable | undefined {\n    return this._executables.find(b => b.name === name);\n  }\n\n  private _addRequirementsAndDedupe(executables: Executable[] | undefined): ExecutableImpl[] {\n    const set = new Set<ExecutableImpl>();\n    if (!executables)\n      executables = this._executables.filter(executable => executable.installType === 'download-by-default');\n    for (const executable of executables as ExecutableImpl[]) {\n      set.add(executable);\n      if (executable.browserName === 'chromium')\n        set.add(this.findExecutable('ffmpeg')!);\n    }\n    return Array.from(set);\n  }\n\n  private async _validateHostRequirements(browserName: BrowserName, browserDirectory: string, linuxLddDirectories: string[], dlOpenLibraries: string[], windowsExeAndDllDirectories: string[]) {\n    if (getAsBooleanFromENV('PLAYWRIGHT_SKIP_VALIDATE_HOST_REQUIREMENTS')) {\n      process.stdout.write('Skipping host requirements validation logic because `PLAYWRIGHT_SKIP_VALIDATE_HOST_REQUIREMENTS` env variable is set.\\n');\n      return;\n    }\n    const ubuntuVersion = await getUbuntuVersion();\n    if (browserName === 'firefox' && ubuntuVersion === '16.04')\n      throw new Error(`Cannot launch Firefox on Ubuntu 16.04! Minimum required Ubuntu version for Firefox browser is 18.04`);\n\n    if (os.platform() === 'linux')\n      return await validateDependenciesLinux(linuxLddDirectories.map(d => path.join(browserDirectory, d)), dlOpenLibraries);\n    if (os.platform() === 'win32' && os.arch() === 'x64')\n      return await validateDependenciesWindows(windowsExeAndDllDirectories.map(d => path.join(browserDirectory, d)));\n  }\n\n  async installDeps(executablesToInstallDeps?: Executable[]) {\n    const executables = this._addRequirementsAndDedupe(executablesToInstallDeps);\n    const targets = new Set<DependencyGroup>();\n    for (const executable of executables) {\n      if (executable._dependencyGroup)\n        targets.add(executable._dependencyGroup);\n    }\n    targets.add('tools');\n    if (os.platform() === 'win32')\n      return await installDependenciesWindows(targets);\n    if (os.platform() === 'linux')\n      return await installDependenciesLinux(targets);\n  }\n\n  async install(executablesToInstall?: Executable[]) {\n    const executables = this._addRequirementsAndDedupe(executablesToInstall);\n    await fs.promises.mkdir(registryDirectory, { recursive: true });\n    const lockfilePath = path.join(registryDirectory, '__dirlock');\n    const releaseLock = await lockfile.lock(registryDirectory, {\n      retries: {\n        retries: 10,\n        // Retry 20 times during 10 minutes with\n        // exponential back-off.\n        // See documentation at: https://www.npmjs.com/package/retry#retrytimeoutsoptions\n        factor: 1.27579,\n      },\n      onCompromised: (err: Error) => {\n        throw new Error(`${err.message} Path: ${lockfilePath}`);\n      },\n      lockfilePath,\n    });\n    const linksDir = path.join(registryDirectory, '.links');\n\n    try {\n      // Create a link first, so that cache validation does not remove our own browsers.\n      await fs.promises.mkdir(linksDir, { recursive: true });\n      await fs.promises.writeFile(path.join(linksDir, calculateSha1(PACKAGE_PATH)), PACKAGE_PATH);\n\n      // Remove stale browsers.\n      await this._validateInstallationCache(linksDir);\n\n      // Install browsers for this package.\n      for (const executable of executables) {\n        if (executable._install)\n          await executable._install();\n        else\n          throw new Error(`ERROR: Playwright does not support installing ${executable.name}`);\n      }\n    } finally {\n      await releaseLock();\n    }\n  }\n\n  private async _downloadExecutable(descriptor: BrowsersJSONDescriptor, executablePath: string | undefined, downloadURLTemplate: string | undefined, downloadHostEnv: string) {\n    if (!downloadURLTemplate || !executablePath)\n      throw new Error(`ERROR: Playwright does not support ${descriptor.name} on ${hostPlatform}`);\n    const downloadHost =\n        (downloadHostEnv && getFromENV(downloadHostEnv)) ||\n        getFromENV('PLAYWRIGHT_DOWNLOAD_HOST') ||\n        'https://playwright.azureedge.net';\n    const downloadURL = util.format(downloadURLTemplate, downloadHost, descriptor.revision);\n    const title = `${descriptor.name} v${descriptor.revision}`;\n    const downloadFileName = `playwright-download-${descriptor.name}-${hostPlatform}-${descriptor.revision}.zip`;\n    await downloadBrowserWithProgressBar(title, descriptor.dir, executablePath, downloadURL, downloadFileName).catch(e => {\n      throw new Error(`Failed to download ${title}, caused by\\n${e.stack}`);\n    });\n    await fs.promises.writeFile(markerFilePath(descriptor.dir), '');\n  }\n\n  private async _installMSEdgeChannel(channel: 'msedge'|'msedge-beta'|'msedge-dev', scripts: Record<'linux' | 'darwin' | 'win32', string>) {\n    const scriptArgs: string[] = [];\n    if (process.platform !== 'linux') {\n      const products = JSON.parse(await fetchData('https://edgeupdates.microsoft.com/api/products'));\n      const productName = {\n        'msedge': 'Stable',\n        'msedge-beta': 'Beta',\n        'msedge-dev': 'Dev',\n      }[channel];\n      const product = products.find((product: any) => product.Product === productName);\n      const searchConfig = ({\n        darwin: {platform: 'MacOS', arch: 'universal', artifact: 'pkg'},\n        win32: {platform: 'Windows', arch: os.arch() === 'x64' ? 'x64' : 'x86', artifact: 'msi'},\n      } as any)[process.platform];\n      const release = searchConfig ? product.Releases.find((release: any) => release.Platform === searchConfig.platform && release.Architecture === searchConfig.arch) : null;\n      const artifact = release ? release.Artifacts.find((artifact: any) => artifact.ArtifactName === searchConfig.artifact) : null;\n      if (artifact)\n        scriptArgs.push(artifact.Location /* url */);\n      else\n        throw new Error(`Cannot install ${channel} on ${process.platform}`);\n    }\n    await this._installChromiumChannel(channel, scripts, scriptArgs);\n  }\n\n  private async _installChromiumChannel(channel: string, scripts: Record<'linux' | 'darwin' | 'win32', string>, scriptArgs: string[] = []) {\n    const scriptName = scripts[process.platform as 'linux' | 'darwin' | 'win32'];\n    if (!scriptName)\n      throw new Error(`Cannot install ${channel} on ${process.platform}`);\n    const shell = scriptName.endsWith('.ps1') ? 'powershell.exe' : 'bash';\n    const { code } = await spawnAsync(shell, [path.join(BIN_PATH, scriptName), ...scriptArgs], { cwd: BIN_PATH, stdio: 'inherit' });\n    if (code !== 0)\n      throw new Error(`Failed to install ${channel}`);\n  }\n\n  private async _validateInstallationCache(linksDir: string) {\n    // 1. Collect used downloads and package descriptors.\n    const usedBrowserPaths: Set<string> = new Set();\n    for (const fileName of await fs.promises.readdir(linksDir)) {\n      const linkPath = path.join(linksDir, fileName);\n      let linkTarget = '';\n      try {\n        linkTarget = (await fs.promises.readFile(linkPath)).toString();\n        const descriptors = readDescriptors(linkTarget);\n        for (const browserName of allDownloadable) {\n          // We retain browsers if they are found in the descriptor.\n          // Note, however, that there are older versions out in the wild that rely on\n          // the \"download\" field in the browser descriptor and use its value\n          // to retain and download browsers.\n          // As of v1.10, we decided to abandon \"download\" field.\n          const descriptor = descriptors.find(d => d.name === browserName);\n          if (!descriptor)\n            continue;\n          const usedBrowserPath = descriptor.dir;\n          const browserRevision = parseInt(descriptor.revision, 10);\n          // Old browser installations don't have marker file.\n          const shouldHaveMarkerFile = (browserName === 'chromium' && browserRevision >= 786218) ||\n              (browserName === 'firefox' && browserRevision >= 1128) ||\n              (browserName === 'webkit' && browserRevision >= 1307) ||\n              // All new applications have a marker file right away.\n              (browserName !== 'firefox' && browserName !== 'chromium' && browserName !== 'webkit');\n          if (!shouldHaveMarkerFile || (await existsAsync(markerFilePath(usedBrowserPath))))\n            usedBrowserPaths.add(usedBrowserPath);\n        }\n      } catch (e) {\n        await fs.promises.unlink(linkPath).catch(e => {});\n      }\n    }\n\n    // 2. Delete all unused browsers.\n    if (!getAsBooleanFromENV('PLAYWRIGHT_SKIP_BROWSER_GC')) {\n      let downloadedBrowsers = (await fs.promises.readdir(registryDirectory)).map(file => path.join(registryDirectory, file));\n      downloadedBrowsers = downloadedBrowsers.filter(file => isBrowserDirectory(file));\n      const directories = new Set<string>(downloadedBrowsers);\n      for (const browserDirectory of usedBrowserPaths)\n        directories.delete(browserDirectory);\n      for (const directory of directories)\n        logPolitely('Removing unused browser at ' + directory);\n      await removeFolders([...directories]);\n    }\n  }\n}\n\nfunction markerFilePath(browserDirectory: string): string {\n  return path.join(browserDirectory, 'INSTALLATION_COMPLETE');\n}\n\nexport async function installDefaultBrowsersForNpmInstall() {\n  // PLAYWRIGHT_SKIP_BROWSER_DOWNLOAD should have a value of 0 or 1\n  if (getAsBooleanFromENV('PLAYWRIGHT_SKIP_BROWSER_DOWNLOAD')) {\n    logPolitely('Skipping browsers download because `PLAYWRIGHT_SKIP_BROWSER_DOWNLOAD` env variable is set');\n    return false;\n  }\n  await registry.install();\n}\n\nexport const registry = new Registry(PACKAGE_PATH);\n"],"file":"registry.js"}
\ No newline at end of file
diff --git a/node_modules/playwright/lib/utils/stackTrace.js.map b/node_modules/playwright/lib/utils/stackTrace.js.map
new file mode 100644
index 0000000..afc1000
--- /dev/null
+++ b/node_modules/playwright/lib/utils/stackTrace.js.map
@@ -0,0 +1 @@
+{"version":3,"sources":["../../src/utils/stackTrace.ts"],"names":["stackUtils","StackUtils","rewriteErrorMessage","e","newMessage","stack","index","indexOf","message","substring","length","PW_LIB_DIRS","path","join","map","packageName","sep","runnerNpmPkgLib","runnerLib","runnerSrc","includesFileInPlaywrightSubDir","subDir","fileName","p","some","libDir","includes","captureStackTrace","stackTraceLimit","Error","error","frames","frameTexts","lines","split","reverse","apiName","isTesting","process","env","PWTEST_CLI_ALLOW_TEST_COMMAND","line","frame","parseLine","file","startsWith","resolve","cwd","isFilePartOfPlaywright","function","toLowerCase","slice","push","column","isPlaywrightTest","isLocalPlaywright","isInPlaywright","splitErrorMessage","separationIdx","name"],"mappings":"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","sourcesContent":["/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport path from 'path';\nimport { StackFrame } from '../protocol/channels';\nimport StackUtils from 'stack-utils';\nimport { isUnderTest } from './utils';\n\nconst stackUtils = new StackUtils();\n\nexport function rewriteErrorMessage(e: Error, newMessage: string): Error {\n  if (e.stack) {\n    const index = e.stack.indexOf(e.message);\n    if (index !== -1)\n      e.stack = e.stack.substring(0, index) + newMessage + e.stack.substring(index + e.message.length);\n  }\n  e.message = newMessage;\n  return e;\n}\n\nconst PW_LIB_DIRS = [\n  'playwright',\n  'playwright-chromium',\n  'playwright-firefox',\n  'playwright-webkit',\n  path.join('@playwright', 'test'),\n].map(packageName => path.sep + packageName);\n\nconst runnerNpmPkgLib = path.join('@playwright', 'test', 'lib', 'test');\nconst runnerLib = path.join('lib', 'test');\nconst runnerSrc = path.join('src', 'test');\n\nfunction includesFileInPlaywrightSubDir(subDir: string, fileName: string) {\n  return PW_LIB_DIRS.map(p => path.join(p, subDir)).some(libDir => fileName.includes(libDir));\n}\n\nexport type ParsedStackTrace = {\n  frames: StackFrame[];\n  frameTexts: string[];\n  apiName: string;\n};\n\nexport function captureStackTrace(): ParsedStackTrace {\n  const stackTraceLimit = Error.stackTraceLimit;\n  Error.stackTraceLimit = 30;\n  const error = new Error();\n  const stack = error.stack!;\n  Error.stackTraceLimit = stackTraceLimit;\n  const frames: StackFrame[] = [];\n  const frameTexts: string[] = [];\n  const lines = stack.split('\\n').reverse();\n  let apiName = '';\n\n  const isTesting = !!process.env.PWTEST_CLI_ALLOW_TEST_COMMAND || isUnderTest();\n\n  for (const line of lines) {\n    const frame = stackUtils.parseLine(line);\n    if (!frame || !frame.file)\n      continue;\n    if (frame.file.startsWith('internal'))\n      continue;\n    const fileName = path.resolve(process.cwd(), frame.file);\n    if (isTesting && fileName.includes(path.join('playwright', 'tests', 'config', 'coverage.js')))\n      continue;\n    if (isFilePartOfPlaywright(isTesting, fileName)) {\n      apiName = frame.function ? frame.function[0].toLowerCase() + frame.function.slice(1) : '';\n      break;\n    }\n    frameTexts.push(line);\n    frames.push({\n      file: fileName,\n      line: frame.line,\n      column: frame.column,\n      function: frame.function,\n    });\n  }\n  frames.reverse();\n  frameTexts.reverse();\n  return { frames, frameTexts, apiName };\n}\n\nfunction isFilePartOfPlaywright(isTesting: boolean, fileName: string): boolean {\n  const isPlaywrightTest = fileName.includes(runnerNpmPkgLib);\n  const isLocalPlaywright = isTesting && (fileName.includes(runnerSrc) || fileName.includes(runnerLib));\n  const isInPlaywright = (includesFileInPlaywrightSubDir('src', fileName) || includesFileInPlaywrightSubDir('lib', fileName));\n  return !isPlaywrightTest && !isLocalPlaywright && isInPlaywright;\n}\n\nexport function splitErrorMessage(message: string): { name: string, message: string } {\n  const separationIdx = message.indexOf(':');\n  return {\n    name: separationIdx !== -1 ? message.slice(0, separationIdx) : '',\n    message: separationIdx !== -1 && separationIdx + 2 <= message.length ? message.substring(separationIdx + 2) : message,\n  };\n}\n"],"file":"stackTrace.js"}
\ No newline at end of file
diff --git a/node_modules/playwright/lib/utils/timeoutSettings.js.map b/node_modules/playwright/lib/utils/timeoutSettings.js.map
new file mode 100644
index 0000000..8279418
--- /dev/null
+++ b/node_modules/playwright/lib/utils/timeoutSettings.js.map
@@ -0,0 +1 @@
+{"version":3,"sources":["../../src/utils/timeoutSettings.ts"],"names":["DEFAULT_TIMEOUT","TIMEOUT","TimeoutSettings","constructor","parent","_parent","_defaultTimeout","_defaultNavigationTimeout","setDefaultTimeout","timeout","setDefaultNavigationTimeout","navigationTimeout","options"],"mappings":";;;;;;;AAiBA;;AAjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAIO,MAAMA,eAAe,GAAG,KAAxB;;AACP,MAAMC,OAAO,GAAG,0BAAc,CAAd,GAAkBD,eAAlC;;AAEO,MAAME,eAAN,CAAsB;AAK3BC,EAAAA,WAAW,CAACC,MAAD,EAA2B;AAAA,SAJ9BC,OAI8B;AAAA,SAH9BC,eAG8B,GAHG,IAGH;AAAA,SAF9BC,yBAE8B,GAFa,IAEb;AACpC,SAAKF,OAAL,GAAeD,MAAf;AACD;;AAEDI,EAAAA,iBAAiB,CAACC,OAAD,EAAkB;AACjC,SAAKH,eAAL,GAAuBG,OAAvB;AACD;;AAEDC,EAAAA,2BAA2B,CAACD,OAAD,EAAkB;AAC3C,SAAKF,yBAAL,GAAiCE,OAAjC;AACD;;AAEDE,EAAAA,iBAAiB,CAACC,OAAD,EAAwC;AACvD,QAAI,OAAOA,OAAO,CAACH,OAAf,KAA2B,QAA/B,EACE,OAAOG,OAAO,CAACH,OAAf;AACF,QAAI,KAAKF,yBAAL,KAAmC,IAAvC,EACE,OAAO,KAAKA,yBAAZ;AACF,QAAI,KAAKD,eAAL,KAAyB,IAA7B,EACE,OAAO,KAAKA,eAAZ;AACF,QAAI,KAAKD,OAAT,EACE,OAAO,KAAKA,OAAL,CAAaM,iBAAb,CAA+BC,OAA/B,CAAP;AACF,WAAOX,OAAP;AACD;;AAEDQ,EAAAA,OAAO,CAACG,OAAD,EAAwC;AAC7C,QAAI,OAAOA,OAAO,CAACH,OAAf,KAA2B,QAA/B,EACE,OAAOG,OAAO,CAACH,OAAf;AACF,QAAI,KAAKH,eAAL,KAAyB,IAA7B,EACE,OAAO,KAAKA,eAAZ;AACF,QAAI,KAAKD,OAAT,EACE,OAAO,KAAKA,OAAL,CAAaI,OAAb,CAAqBG,OAArB,CAAP;AACF,WAAOX,OAAP;AACD;;AAEa,SAAPQ,OAAO,CAACG,OAAD,EAAwC;AACpD,QAAI,OAAOA,OAAO,CAACH,OAAf,KAA2B,QAA/B,EACE,OAAOG,OAAO,CAACH,OAAf;AACF,WAAOR,OAAP;AACD;;AA3C0B","sourcesContent":["/**\n * Copyright 2019 Google Inc. All rights reserved.\n * Modifications copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { debugMode } from './utils';\n\nexport const DEFAULT_TIMEOUT = 30000;\nconst TIMEOUT = debugMode() ? 0 : DEFAULT_TIMEOUT;\n\nexport class TimeoutSettings {\n  private _parent: TimeoutSettings | undefined;\n  private _defaultTimeout: number | null = null;\n  private _defaultNavigationTimeout: number | null = null;\n\n  constructor(parent?: TimeoutSettings) {\n    this._parent = parent;\n  }\n\n  setDefaultTimeout(timeout: number) {\n    this._defaultTimeout = timeout;\n  }\n\n  setDefaultNavigationTimeout(timeout: number) {\n    this._defaultNavigationTimeout = timeout;\n  }\n\n  navigationTimeout(options: { timeout?: number }): number {\n    if (typeof options.timeout === 'number')\n      return options.timeout;\n    if (this._defaultNavigationTimeout !== null)\n      return this._defaultNavigationTimeout;\n    if (this._defaultTimeout !== null)\n      return this._defaultTimeout;\n    if (this._parent)\n      return this._parent.navigationTimeout(options);\n    return TIMEOUT;\n  }\n\n  timeout(options: { timeout?: number }): number {\n    if (typeof options.timeout === 'number')\n      return options.timeout;\n    if (this._defaultTimeout !== null)\n      return this._defaultTimeout;\n    if (this._parent)\n      return this._parent.timeout(options);\n    return TIMEOUT;\n  }\n\n  static timeout(options: { timeout?: number }): number {\n    if (typeof options.timeout === 'number')\n      return options.timeout;\n    return TIMEOUT;\n  }\n}\n"],"file":"timeoutSettings.js"}
\ No newline at end of file
diff --git a/node_modules/playwright/lib/utils/ubuntuVersion.js.map b/node_modules/playwright/lib/utils/ubuntuVersion.js.map
new file mode 100644
index 0000000..857add3
--- /dev/null
+++ b/node_modules/playwright/lib/utils/ubuntuVersion.js.map
@@ -0,0 +1 @@
+{"version":3,"sources":["../../src/utils/ubuntuVersion.ts"],"names":["ubuntuVersionCached","getUbuntuVersion","undefined","getUbuntuVersionAsyncInternal","getUbuntuVersionSync","getUbuntuVersionSyncInternal","os","platform","osReleaseText","fs","promises","readFile","catch","e","parseUbuntuVersion","existsSync","readFileSync","fields","Map","line","split","tokens","name","shift","value","join","trim","startsWith","endsWith","substring","length","set","toLowerCase","get"],"mappings":"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","sourcesContent":["/**\n * Copyright 2017 Google Inc. All rights reserved.\n * Modifications copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport fs from 'fs';\nimport * as os from 'os';\n\nlet ubuntuVersionCached: string | undefined;\n\nexport async function getUbuntuVersion(): Promise<string> {\n  if (ubuntuVersionCached === undefined)\n    ubuntuVersionCached = await getUbuntuVersionAsyncInternal();\n  return ubuntuVersionCached;\n}\n\nexport function getUbuntuVersionSync(): string {\n  if (ubuntuVersionCached === undefined)\n    ubuntuVersionCached = getUbuntuVersionSyncInternal();\n  return ubuntuVersionCached;\n}\n\nasync function getUbuntuVersionAsyncInternal(): Promise<string> {\n  if (os.platform() !== 'linux')\n    return '';\n  let osReleaseText = await fs.promises.readFile('/etc/upstream-release/lsb-release', 'utf8').catch(e => '');\n  if (!osReleaseText)\n    osReleaseText = await fs.promises.readFile('/etc/os-release', 'utf8').catch(e => '');\n  if (!osReleaseText)\n    return '';\n  return parseUbuntuVersion(osReleaseText);\n}\n\nfunction getUbuntuVersionSyncInternal(): string {\n  if (os.platform() !== 'linux')\n    return '';\n  try {\n    let osReleaseText: string;\n    if (fs.existsSync('/etc/upstream-release/lsb-release'))\n      osReleaseText = fs.readFileSync('/etc/upstream-release/lsb-release', 'utf8');\n    else\n      osReleaseText = fs.readFileSync('/etc/os-release', 'utf8');\n    if (!osReleaseText)\n      return '';\n    return parseUbuntuVersion(osReleaseText);\n  } catch (e) {\n    return '';\n  }\n}\n\nfunction parseUbuntuVersion(osReleaseText: string): string {\n  const fields = new Map();\n  for (const line of osReleaseText.split('\\n')) {\n    const tokens = line.split('=');\n    const name = tokens.shift();\n    let value = tokens.join('=').trim();\n    if (value.startsWith('\"') && value.endsWith('\"'))\n      value = value.substring(1, value.length - 1);\n    if (!name)\n      continue;\n    fields.set(name.toLowerCase(), value);\n  }\n  // For Linux mint\n  if (fields.get('distrib_id') && fields.get('distrib_id').toLowerCase() === 'ubuntu')\n    return fields.get('distrib_release') || '';\n\n  if (!fields.get('name') || fields.get('name').toLowerCase() !== 'ubuntu')\n    return '';\n  return fields.get('version_id') || '';\n}\n"],"file":"ubuntuVersion.js"}
\ No newline at end of file
diff --git a/node_modules/playwright/lib/utils/utils.js.map b/node_modules/playwright/lib/utils/utils.js.map
new file mode 100644
index 0000000..fa458a3
--- /dev/null
+++ b/node_modules/playwright/lib/utils/utils.js.map
@@ -0,0 +1 @@
+{"version":3,"sources":["../../src/utils/utils.ts"],"names":["ProxyAgent","require","existsAsync","path","Promise","resolve","fs","stat","err","httpRequest","url","method","response","options","URL","parse","proxyURL","startsWith","proxy","href","host","hostname","port","parsedProxyURL","secureProxy","protocol","agent","rejectUnauthorized","requestCallback","res","statusCode","headers","location","request","end","fetchData","reject","Error","body","on","chunk","error","downloadFile","destinationPath","progressCallback","log","fulfill","downloadedBytes","totalBytes","promise","x","resume","file","createWriteStream","pipe","parseInt","onData","length","spawnAsync","cmd","args","process","stdout","stderr","data","code","makeWaitForNextTask","versions","electron","callback","setTimeout","node","setImmediate","spinning","callbacks","loop","shift","push","assert","value","message","debugAssert","isUnderTest","isString","obj","String","isRegExp","RegExp","Object","prototype","toString","call","isObject","isError","__proto__","name","debugEnv","getFromENV","debugMode","_isUnderTest","setUnderTest","env","undefined","toLowerCase","getAsBooleanFromENV","mkdirIfNeeded","filePath","promises","mkdir","dirname","recursive","catch","headersObjectToArray","result","is","headersArrayToObject","lowerCase","monotonicTime","seconds","nanoseconds","hrtime","HashStream","stream","Writable","_hash","crypto","createHash","_write","encoding","done","update","digest","calculateFileSha1","filename","hashStream","createReadStream","f","r","calculateSha1","buffer","hash","createGuid","randomBytes","removeFolders","dirs","all","map","dir","maxBusyTries","canAccessFile","accessSync","e","localIpAddresses","isLocalIpAddress","ipAdress","includes","getUserAgent","packageJson","version","os","arch","platform","release","constructURLBasedOnBaseURL","baseURL","givenURL","hostPlatform","ver","split","a","macVersion","LAST_STABLE_MAC_MAJOR_VERSION","Math","min","cpus","some","cpu","model","ubuntuVersion","wrapInASCIIBox","text","padding","lines","maxLength","max","line","repeat","join"],"mappings":"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","sourcesContent":["/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport path from 'path';\nimport fs from 'fs';\nimport stream from 'stream';\nimport removeFolder from 'rimraf';\nimport * as crypto from 'crypto';\nimport os from 'os';\nimport { spawn } from 'child_process';\nimport { getProxyForUrl } from 'proxy-from-env';\nimport * as URL from 'url';\nimport { getUbuntuVersionSync } from './ubuntuVersion';\n\n// `https-proxy-agent` v5 is written in TypeScript and exposes generated types.\n// However, as of June 2020, its types are generated with tsconfig that enables\n// `esModuleInterop` option.\n//\n// As a result, we can't depend on the package unless we enable the option\n// for our codebase. Instead of doing this, we abuse \"require\" to import module\n// without types.\nconst ProxyAgent = require('https-proxy-agent');\n\nexport const existsAsync = (path: string): Promise<boolean> => new Promise(resolve => fs.stat(path, err => resolve(!err)));\n\nfunction httpRequest(url: string, method: string, response: (r: any) => void) {\n  let options: any = URL.parse(url);\n  options.method = method;\n\n  const proxyURL = getProxyForUrl(url);\n  if (proxyURL) {\n    if (url.startsWith('http:')) {\n      const proxy = URL.parse(proxyURL);\n      options = {\n        path: options.href,\n        host: proxy.hostname,\n        port: proxy.port,\n      };\n    } else {\n      const parsedProxyURL: any = URL.parse(proxyURL);\n      parsedProxyURL.secureProxy = parsedProxyURL.protocol === 'https:';\n\n      options.agent = new ProxyAgent(parsedProxyURL);\n      options.rejectUnauthorized = false;\n    }\n  }\n\n  const requestCallback = (res: any) => {\n    if (res.statusCode >= 300 && res.statusCode < 400 && res.headers.location)\n      httpRequest(res.headers.location, method, response);\n    else\n      response(res);\n  };\n  const request = options.protocol === 'https:' ?\n    require('https').request(options, requestCallback) :\n    require('http').request(options, requestCallback);\n  request.end();\n  return request;\n}\n\nexport function fetchData(url: string): Promise<string> {\n  return new Promise((resolve, reject) => {\n    httpRequest(url, 'GET', function(response){\n      if (response.statusCode !== 200) {\n        reject(new Error(`fetch failed: server returned code ${response.statusCode}. URL: ${url}`));\n        return;\n      }\n      let body = '';\n      response.on('data', (chunk: string) => body += chunk);\n      response.on('error', (error: any) => reject(error));\n      response.on('end', () => resolve(body));\n    }).on('error', (error: any) => reject(error));\n  });\n}\n\ntype OnProgressCallback = (downloadedBytes: number, totalBytes: number) => void;\ntype DownloadFileLogger = (message: string) => void;\n\nexport function downloadFile(url: string, destinationPath: string, options: {progressCallback?: OnProgressCallback, log?: DownloadFileLogger} = {}): Promise<{error: any}> {\n  const {\n    progressCallback,\n    log = () => {},\n  } = options;\n  log(`running download:`);\n  log(`-- from url: ${url}`);\n  log(`-- to location: ${destinationPath}`);\n  let fulfill: ({error}: {error: any}) => void = ({error}) => {};\n  let downloadedBytes = 0;\n  let totalBytes = 0;\n\n  const promise: Promise<{error: any}> = new Promise(x => { fulfill = x; });\n\n  const request = httpRequest(url, 'GET', response => {\n    log(`-- response status code: ${response.statusCode}`);\n    if (response.statusCode !== 200) {\n      const error = new Error(`Download failed: server returned code ${response.statusCode}. URL: ${url}`);\n      // consume response data to free up memory\n      response.resume();\n      fulfill({error});\n      return;\n    }\n    const file = fs.createWriteStream(destinationPath);\n    file.on('finish', () => fulfill({error: null}));\n    file.on('error', error => fulfill({error}));\n    response.pipe(file);\n    totalBytes = parseInt(response.headers['content-length'], 10);\n    log(`-- total bytes: ${totalBytes}`);\n    if (progressCallback)\n      response.on('data', onData);\n  });\n  request.on('error', (error: any) => fulfill({error}));\n  return promise;\n\n  function onData(chunk: string) {\n    downloadedBytes += chunk.length;\n    progressCallback!(downloadedBytes, totalBytes);\n  }\n}\n\nexport function spawnAsync(cmd: string, args: string[], options: any): Promise<{stdout: string, stderr: string, code: number, error?: Error}> {\n  const process = spawn(cmd, args, options);\n\n  return new Promise(resolve => {\n    let stdout = '';\n    let stderr = '';\n    if (process.stdout)\n      process.stdout.on('data', data => stdout += data);\n    if (process.stderr)\n      process.stderr.on('data', data => stderr += data);\n    process.on('close', code => resolve({stdout, stderr, code}));\n    process.on('error', error => resolve({stdout, stderr, code: 0, error}));\n  });\n}\n\n// See https://joel.tools/microtasks/\nexport function makeWaitForNextTask() {\n  // As of Mar 2021, Electorn v12 doesn't create new task with `setImmediate` despite\n  // using Node 14 internally, so we fallback to `setTimeout(0)` instead.\n  // @see https://github.com/electron/electron/issues/28261\n  if ((process.versions as any).electron)\n    return (callback: () => void) => setTimeout(callback, 0);\n  if (parseInt(process.versions.node, 10) >= 11)\n    return setImmediate;\n\n  // Unlike Node 11, Node 10 and less have a bug with Task and MicroTask execution order:\n  // - https://github.com/nodejs/node/issues/22257\n  //\n  // So we can't simply run setImmediate to dispatch code in a following task.\n  // However, we can run setImmediate from-inside setImmediate to make sure we're getting\n  // in the following task.\n\n  let spinning = false;\n  const callbacks: (() => void)[] = [];\n  const loop = () => {\n    const callback = callbacks.shift();\n    if (!callback) {\n      spinning = false;\n      return;\n    }\n    setImmediate(loop);\n    // Make sure to call callback() as the last thing since it's\n    // untrusted code that might throw.\n    callback();\n  };\n\n  return (callback: () => void) => {\n    callbacks.push(callback);\n    if (!spinning) {\n      spinning = true;\n      setImmediate(loop);\n    }\n  };\n}\n\nexport function assert(value: any, message?: string): asserts value {\n  if (!value)\n    throw new Error(message || 'Assertion error');\n}\n\nexport function debugAssert(value: any, message?: string): asserts value {\n  if (isUnderTest() && !value)\n    throw new Error(message);\n}\n\nexport function isString(obj: any): obj is string {\n  return typeof obj === 'string' || obj instanceof String;\n}\n\nexport function isRegExp(obj: any): obj is RegExp {\n  return obj instanceof RegExp || Object.prototype.toString.call(obj) === '[object RegExp]';\n}\n\nexport function isObject(obj: any): obj is NonNullable<object> {\n  return typeof obj === 'object' && obj !== null;\n}\n\nexport function isError(obj: any): obj is Error {\n  return obj instanceof Error || (obj && obj.__proto__ && obj.__proto__.name === 'Error');\n}\n\nconst debugEnv = getFromENV('PWDEBUG') || '';\nexport function debugMode() {\n  if (debugEnv === 'console')\n    return 'console';\n  return debugEnv ? 'inspector' : '';\n}\n\nlet _isUnderTest = false;\nexport function setUnderTest() {\n  _isUnderTest = true;\n}\nexport function isUnderTest(): boolean {\n  return _isUnderTest;\n}\n\nexport function getFromENV(name: string): string | undefined {\n  let value = process.env[name];\n  value = value === undefined ? process.env[`npm_config_${name.toLowerCase()}`] : value;\n  value = value === undefined ?  process.env[`npm_package_config_${name.toLowerCase()}`] : value;\n  return value;\n}\n\nexport function getAsBooleanFromENV(name: string): boolean {\n  const value = getFromENV(name);\n  return !!value && value !== 'false' && value !== '0';\n}\n\nexport async function mkdirIfNeeded(filePath: string) {\n  // This will harmlessly throw on windows if the dirname is the root directory.\n  await fs.promises.mkdir(path.dirname(filePath), {recursive: true}).catch(() => {});\n}\n\ntype HeadersArray = { name: string, value: string }[];\ntype HeadersObject = { [key: string]: string };\n\nexport function headersObjectToArray(headers: HeadersObject): HeadersArray {\n  const result: HeadersArray = [];\n  for (const name in headers) {\n    if (!Object.is(headers[name], undefined))\n      result.push({ name, value: headers[name] });\n  }\n  return result;\n}\n\nexport function headersArrayToObject(headers: HeadersArray, lowerCase: boolean): HeadersObject {\n  const result: HeadersObject = {};\n  for (const { name, value } of headers)\n    result[lowerCase ? name.toLowerCase() : name] = value;\n  return result;\n}\n\nexport function monotonicTime(): number {\n  const [seconds, nanoseconds] = process.hrtime();\n  return seconds * 1000 + (nanoseconds / 1000 | 0) / 1000;\n}\n\nclass HashStream extends stream.Writable {\n  private _hash = crypto.createHash('sha1');\n\n  _write(chunk: Buffer, encoding: string, done: () => void) {\n    this._hash.update(chunk);\n    done();\n  }\n\n  digest(): string {\n    return this._hash.digest('hex');\n  }\n}\n\nexport async function calculateFileSha1(filename: string): Promise<string> {\n  const hashStream = new HashStream();\n  const stream = fs.createReadStream(filename);\n  stream.on('open', () => stream.pipe(hashStream));\n  await new Promise((f, r) => {\n    hashStream.on('finish', f);\n    hashStream.on('error', r);\n  });\n  return hashStream.digest();\n}\n\nexport function calculateSha1(buffer: Buffer | string): string {\n  const hash = crypto.createHash('sha1');\n  hash.update(buffer);\n  return hash.digest('hex');\n}\n\nexport function createGuid(): string {\n  return crypto.randomBytes(16).toString('hex');\n}\n\nexport async function removeFolders(dirs: string[]): Promise<Array<Error|undefined>> {\n  return await Promise.all(dirs.map((dir: string) => {\n    return new Promise<Error|undefined>(fulfill => {\n      removeFolder(dir, { maxBusyTries: 10 }, error => {\n        fulfill(error);\n      });\n    });\n  }));\n}\n\nexport function canAccessFile(file: string) {\n  if (!file)\n    return false;\n\n  try {\n    fs.accessSync(file);\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nconst localIpAddresses = [\n  'localhost',\n  '127.0.0.1',\n  '::ffff:127.0.0.1',\n  '::1',\n  '0000:0000:0000:0000:0000:0000:0000:0001', // WebKit (Windows)\n];\n\nexport function isLocalIpAddress(ipAdress: string): boolean {\n  return localIpAddresses.includes(ipAdress);\n}\n\nexport function getUserAgent() {\n  const packageJson = require('./../../package.json');\n  return `Playwright/${packageJson.version} (${os.arch()}/${os.platform()}/${os.release()})`;\n}\n\nexport function constructURLBasedOnBaseURL(baseURL: string | undefined, givenURL: string): string {\n  try {\n    return (new URL.URL(givenURL, baseURL)).toString();\n  } catch (e) {\n    return givenURL;\n  }\n}\n\nexport type HostPlatform = 'win32'|'win64'|'mac10.13'|'mac10.14'|'mac10.15'|'mac11'|'mac11-arm64'|'ubuntu18.04'|'ubuntu20.04';\nexport const hostPlatform = ((): HostPlatform => {\n  const platform = os.platform();\n  if (platform === 'darwin') {\n    const ver = os.release().split('.').map((a: string) => parseInt(a, 10));\n    let macVersion = '';\n    if (ver[0] < 18) {\n      // Everything before 10.14 is considered 10.13.\n      macVersion = 'mac10.13';\n    } else if (ver[0] === 18) {\n      macVersion = 'mac10.14';\n    } else if (ver[0] === 19) {\n      macVersion = 'mac10.15';\n    } else {\n      // ver[0] >= 20\n      const LAST_STABLE_MAC_MAJOR_VERSION = 11;\n      // Best-effort support for MacOS beta versions.\n      macVersion = 'mac' + Math.min(ver[0] - 9, LAST_STABLE_MAC_MAJOR_VERSION);\n      // BigSur is the first version that might run on Apple Silicon.\n      if (os.cpus().some(cpu => cpu.model.includes('Apple')))\n        macVersion += '-arm64';\n    }\n    return macVersion as HostPlatform;\n  }\n  if (platform === 'linux') {\n    const ubuntuVersion = getUbuntuVersionSync();\n    if (parseInt(ubuntuVersion, 10) <= 19)\n      return 'ubuntu18.04';\n    return 'ubuntu20.04';\n  }\n  if (platform === 'win32')\n    return os.arch() === 'x64' ? 'win64' : 'win32';\n  return platform as HostPlatform;\n})();\n\nexport function wrapInASCIIBox(text: string, padding = 0): string {\n  const lines = text.split('\\n');\n  const maxLength = Math.max(...lines.map(line => line.length));\n  return [\n    '╔' + '═'.repeat(maxLength + padding * 2) + '╗',\n    ...lines.map(line => '║' + ' '.repeat(padding) + line + ' '.repeat(maxLength - line.length + padding) + '║'),\n    '╚' + '═'.repeat(maxLength + padding * 2) + '╝',\n  ].join('\\n');\n}\n"],"file":"utils.js"}
\ No newline at end of file
diff --git a/node_modules/playwright/types/testReporter.d.ts b/node_modules/playwright/types/testReporter.d.ts
index d15aefe..cae0ed5 100644
--- a/node_modules/playwright/types/testReporter.d.ts
+++ b/node_modules/playwright/types/testReporter.d.ts
@@ -227,11 +227,20 @@ export interface TestStep {
    * User-friendly test step title.
    */
   title: string;
+  /**
+   * Returns a list of step titles from the root step down to this step.
+   */
+  titlePath(): string[];
+  /**
+   * Parent step, if any.
+   */
+  parent?: TestStep;
   /**
    * Step category to differentiate steps with different origin and verbosity. Built-in categories are:
    * - `hook` for fixtures and hooks initialization and teardown
    * - `expect` for expect calls
    * - `pw:api` for Playwright API calls.
+   * - `test.step` for test.step API calls.
    */
   category: string,
   /**
@@ -246,6 +255,10 @@ export interface TestStep {
    * An error thrown during the step execution, if any.
    */
   error?: TestError;
+  /**
+   * List of steps inside this step.
+   */
+  steps: TestStep[];
 }
 
 /**
diff --git a/node_modules/playwright/types/types.d.ts b/node_modules/playwright/types/types.d.ts
index 2611eda..c8ea6ed 100644
--- a/node_modules/playwright/types/types.d.ts
+++ b/node_modules/playwright/types/types.d.ts
@@ -8501,6 +8501,13 @@ export interface BrowserType<Unused = {}> {
      */
     slowMo?: number;
 
+    /**
+     * It specified, enables strict selectors mode for this context. In the strict selectors mode all operations on selectors
+     * that imply single target DOM element will throw when more than one element matches the selector. See [Locator] to learn
+     * more about the strict mode.
+     */
+    strictSelectors?: boolean;
+
     /**
      * Maximum time in milliseconds to wait for the browser instance to start. Defaults to `30000` (30 seconds). Pass `0` to
      * disable timeout.
@@ -9553,6 +9560,13 @@ export interface AndroidDevice {
       height: number;
     };
 
+    /**
+     * It specified, enables strict selectors mode for this context. In the strict selectors mode all operations on selectors
+     * that imply single target DOM element will throw when more than one element matches the selector. See [Locator] to learn
+     * more about the strict mode.
+     */
+    strictSelectors?: boolean;
+
     /**
      * Changes the timezone of the context. See
      * [ICU's metaZones.txt](https://cs.chromium.org/chromium/src/third_party/icu/source/data/misc/metaZones.txt?rcl=faee8bc70570192d82d2978a71e2a615788597d1)
@@ -10408,6 +10422,13 @@ export interface Browser extends EventEmitter {
       }>;
     };
 
+    /**
+     * It specified, enables strict selectors mode for this context. In the strict selectors mode all operations on selectors
+     * that imply single target DOM element will throw when more than one element matches the selector. See [Locator] to learn
+     * more about the strict mode.
+     */
+    strictSelectors?: boolean;
+
     /**
      * Changes the timezone of the context. See
      * [ICU's metaZones.txt](https://cs.chromium.org/chromium/src/third_party/icu/source/data/misc/metaZones.txt?rcl=faee8bc70570192d82d2978a71e2a615788597d1)
@@ -12526,6 +12547,13 @@ export interface BrowserContextOptions {
     }>;
   };
 
+  /**
+   * It specified, enables strict selectors mode for this context. In the strict selectors mode all operations on selectors
+   * that imply single target DOM element will throw when more than one element matches the selector. See [Locator] to learn
+   * more about the strict mode.
+   */
+  strictSelectors?: boolean;
+
   /**
    * Changes the timezone of the context. See
    * [ICU's metaZones.txt](https://cs.chromium.org/chromium/src/third_party/icu/source/data/misc/metaZones.txt?rcl=faee8bc70570192d82d2978a71e2a615788597d1)
@@ -12728,6 +12756,11 @@ export interface LaunchOptions {
 }
 
 export interface ConnectOverCDPOptions {
+  /**
+   * For crusher, set this as "electron-webview"
+   */
+  customBrowserName?: string;
+
   /**
    * Deprecated, use the first argument instead. Optional.
    */
@@ -13032,7 +13065,7 @@ type Devices = {
   "Desktop Firefox HiDPI": DeviceDescriptor;
   "Desktop Safari": DeviceDescriptor;
   "Desktop Chrome": DeviceDescriptor;
-  "Dekstop Edge": DeviceDescriptor;
+  "Desktop Edge": DeviceDescriptor;
   "Desktop Firefox": DeviceDescriptor;
   [key: string]: DeviceDescriptor;
 }
